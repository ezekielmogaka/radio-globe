{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/Earth.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef, useMemo } from \"react\";\nimport { useFrame } from \"@react-three/fiber\";\nimport { Sphere } from \"@react-three/drei\";\nimport * as THREE from \"three\";\n\nexport function Earth() {\n  const earthRef = useRef<THREE.Mesh>(null);\n  const nightLightsRef = useRef<THREE.Mesh>(null);\n  const cloudsRef = useRef<THREE.Mesh>(null);\n  const atmosphereRef = useRef<THREE.Mesh>(null);\n\n  // Load real Earth day texture using NASA-style satellite imagery\n  const dayTexture = useMemo(() => {\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\")!;\n    canvas.width = 2048;\n    canvas.height = 1024;\n\n    // Create high-contrast realistic Earth texture\n    createSatelliteEarthTexture(ctx, canvas.width, canvas.height);\n\n    const texture = new THREE.CanvasTexture(canvas);\n    texture.wrapS = THREE.RepeatWrapping;\n    texture.wrapT = THREE.ClampToEdgeWrapping;\n    texture.generateMipmaps = false;\n    texture.minFilter = THREE.LinearFilter;\n    texture.magFilter = THREE.LinearFilter;\n    return texture;\n  }, []);\n\n  // Create realistic night lights from satellite data\n  const nightTexture = useMemo(() => {\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\")!;\n    canvas.width = 2048;\n    canvas.height = 1024;\n\n    // Black background\n    ctx.fillStyle = \"#000000\";\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // Add NASA-style night lights\n    addNASAStyleNightLights(ctx, canvas.width, canvas.height);\n\n    const texture = new THREE.CanvasTexture(canvas);\n    texture.wrapS = THREE.RepeatWrapping;\n    texture.wrapT = THREE.ClampToEdgeWrapping;\n    return texture;\n  }, []);\n\n  // Create realistic cloud texture\n  const cloudTexture = useMemo(() => {\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\")!;\n    canvas.width = 1024;\n    canvas.height = 512;\n\n    createRealisticClouds(ctx, canvas.width, canvas.height);\n\n    const texture = new THREE.CanvasTexture(canvas);\n    texture.wrapS = THREE.RepeatWrapping;\n    texture.wrapT = THREE.ClampToEdgeWrapping;\n    return texture;\n  }, []);\n\n  // Create topographical normal map\n  const normalTexture = useMemo(() => {\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\")!;\n    canvas.width = 1024;\n    canvas.height = 512;\n\n    createTopographicalNormalMap(ctx, canvas.width, canvas.height);\n\n    const texture = new THREE.CanvasTexture(canvas);\n    texture.wrapS = THREE.RepeatWrapping;\n    texture.wrapT = THREE.ClampToEdgeWrapping;\n    return texture;\n  }, []);\n\n  // Animation with realistic rotation speed\n  useFrame((state, delta) => {\n    if (earthRef.current && nightLightsRef.current && cloudsRef.current) {\n      // Earth rotates once every 24 hours - scale it for demo (much faster)\n      earthRef.current.rotation.y += delta * 0.1;\n      nightLightsRef.current.rotation.y += delta * 0.1;\n      cloudsRef.current.rotation.y += delta * 0.12; // Clouds move slightly faster\n\n      // Dynamic atmosphere\n      if (atmosphereRef.current && atmosphereRef.current.material) {\n        const material = atmosphereRef.current.material as THREE.ShaderMaterial;\n        if (material.uniforms) {\n          material.uniforms.time.value = state.clock.getElapsedTime();\n        }\n      }\n    }\n  });\n\n  return (\n    <group>\n      {/* Main Earth sphere with satellite imagery */}\n      <Sphere ref={earthRef} args={[2, 128, 64]}>\n        <meshPhongMaterial\n          map={dayTexture}\n          normalMap={normalTexture}\n          normalScale={new THREE.Vector2(0.6, 0.6)}\n          shininess={2}\n          specular={new THREE.Color(0x222222)}\n          transparent={false}\n        />\n      </Sphere>\n\n      {/* Night lights layer */}\n      <Sphere ref={nightLightsRef} args={[2.001, 64, 32]}>\n        <meshBasicMaterial\n          map={nightTexture}\n          transparent={true}\n          opacity={1}\n          blending={THREE.AdditiveBlending}\n        />\n      </Sphere>\n\n      {/* Realistic cloud layer */}\n      <Sphere ref={cloudsRef} args={[2.008, 64, 32]}>\n        <meshLambertMaterial\n          map={cloudTexture}\n          transparent={true}\n          opacity={0.4}\n          alphaTest={0.1}\n        />\n      </Sphere>\n\n      {/* Enhanced atmospheric glow */}\n      <Sphere ref={atmosphereRef} args={[2.15, 64, 32]}>\n        <shaderMaterial\n          uniforms={{\n            time: { value: 0 },\n            color: { value: new THREE.Color(0.4, 0.7, 1.0) },\n          }}\n          vertexShader={`\n            varying vec3 vNormal;\n            varying vec3 vPositionNormal;\n            \n            void main() {\n              vNormal = normalize(normalMatrix * normal);\n              vPositionNormal = normalize((modelViewMatrix * vec4(position, 1.0)).xyz);\n              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n          `}\n          fragmentShader={`\n            uniform float time;\n            uniform vec3 color;\n            varying vec3 vNormal;\n            varying vec3 vPositionNormal;\n            \n            void main() {\n              float intensity = pow(0.6 - dot(vNormal, vPositionNormal), 2.0);\n              vec3 atmosphere = color * pow(intensity, 0.8);\n              float alpha = intensity * 0.4;\n              gl_FragColor = vec4(atmosphere, alpha);\n            }\n          `}\n          side={THREE.BackSide}\n          transparent={true}\n        />\n      </Sphere>\n    </group>\n  );\n}\n\n// Create satellite-style Earth texture with high contrast between land and water\nfunction createSatelliteEarthTexture(ctx: CanvasRenderingContext2D, width: number, height: number) {\n  // Deep ocean background with realistic color gradients\n  const oceanGradient = ctx.createLinearGradient(0, 0, 0, height);\n  oceanGradient.addColorStop(0, \"#0c1445\");    // Arctic waters\n  oceanGradient.addColorStop(0.2, \"#1a2980\");  // Northern ocean\n  oceanGradient.addColorStop(0.4, \"#26d0ce\");  // Tropical waters\n  oceanGradient.addColorStop(0.6, \"#1a2980\");  // Southern ocean  \n  oceanGradient.addColorStop(0.8, \"#0c1445\");  // Antarctic waters\n  oceanGradient.addColorStop(1, \"#000000\");    // Polar ice edge\n\n  ctx.fillStyle = oceanGradient;\n  ctx.fillRect(0, 0, width, height);\n\n  // Add ocean depth variations\n  addOceanDepth(ctx, width, height);\n\n  // Define highly detailed continents with realistic satellite colors\n  const continentData = [\n    // North America with diverse biomes\n    {\n      name: \"North America\",\n      regions: [\n        { x: 0.12, y: 0.15, w: 0.08, h: 0.15, color: \"#2d5a0d\", type: \"tundra\" },    // Alaska\n        { x: 0.15, y: 0.25, w: 0.18, h: 0.25, color: \"#4a7c59\", type: \"forest\" },   // Canada\n        { x: 0.13, y: 0.35, w: 0.22, h: 0.18, color: \"#8fbc8f\", type: \"plains\" },   // US Plains\n        { x: 0.08, y: 0.42, w: 0.12, h: 0.08, color: \"#daa520\", type: \"desert\" },   // Southwest\n        { x: 0.18, y: 0.48, w: 0.15, h: 0.12, color: \"#228b22\", type: \"subtropical\" }, // Southeast\n        { x: 0.17, y: 0.52, w: 0.08, h: 0.15, color: \"#cd853f\", type: \"desert\" },   // Mexico\n      ]\n    },\n    // South America\n    {\n      name: \"South America\", \n      regions: [\n        { x: 0.22, y: 0.55, w: 0.15, h: 0.15, color: \"#228b22\", type: \"rainforest\" }, // Amazon\n        { x: 0.24, y: 0.68, w: 0.12, h: 0.12, color: \"#9acd32\", type: \"savanna\" },   // Brazilian highlands\n        { x: 0.20, y: 0.78, w: 0.18, h: 0.15, color: \"#daa520\", type: \"pampas\" },    // Argentina\n        { x: 0.22, y: 0.88, w: 0.08, h: 0.08, color: \"#708090\", type: \"patagonia\" }, // Patagonia\n      ]\n    },\n    // Europe\n    {\n      name: \"Europe\",\n      regions: [\n        { x: 0.48, y: 0.18, w: 0.12, h: 0.08, color: \"#2f4f2f\", type: \"nordic\" },    // Scandinavia\n        { x: 0.46, y: 0.28, w: 0.18, h: 0.15, color: \"#6b8e23\", type: \"temperate\" }, // Central Europe\n        { x: 0.48, y: 0.38, w: 0.15, h: 0.08, color: \"#daa520\", type: \"mediterranean\" }, // Mediterranean\n      ]\n    },\n    // Africa\n    {\n      name: \"Africa\",\n      regions: [\n        { x: 0.50, y: 0.38, w: 0.20, h: 0.12, color: \"#daa520\", type: \"sahara\" },    // Sahara\n        { x: 0.48, y: 0.48, w: 0.08, h: 0.08, color: \"#9acd32\", type: \"sahel\" },     // Sahel\n        { x: 0.48, y: 0.55, w: 0.18, h: 0.15, color: \"#228b22\", type: \"tropical\" },  // Central Africa\n        { x: 0.50, y: 0.68, w: 0.16, h: 0.18, color: \"#8fbc8f\", type: \"savanna\" },   // Southern Africa\n      ]\n    },\n    // Asia\n    {\n      name: \"Asia\",\n      regions: [\n        { x: 0.65, y: 0.15, w: 0.30, h: 0.20, color: \"#2f4f2f\", type: \"siberia\" },   // Siberia\n        { x: 0.68, y: 0.32, w: 0.25, h: 0.15, color: \"#daa520\", type: \"centralasia\" }, // Central Asia\n        { x: 0.72, y: 0.42, w: 0.08, h: 0.08, color: \"#8b4513\", type: \"himalaya\" },  // Himalayas\n        { x: 0.74, y: 0.48, w: 0.18, h: 0.15, color: \"#228b22\", type: \"southasia\" }, // South Asia\n        { x: 0.82, y: 0.45, w: 0.15, h: 0.18, color: \"#6b8e23\", type: \"eastasia\" },  // East Asia\n        { x: 0.75, y: 0.58, w: 0.20, h: 0.12, color: \"#32cd32\", type: \"southeast\" }, // Southeast Asia\n      ]\n    },\n    // Australia & Oceania\n    {\n      name: \"Australia\",\n      regions: [\n        { x: 0.82, y: 0.72, w: 0.15, h: 0.12, color: \"#cd853f\", type: \"outback\" },   // Australian Outback\n        { x: 0.83, y: 0.75, w: 0.05, h: 0.05, color: \"#228b22\", type: \"coastal\" },   // Coastal regions\n      ]\n    }\n  ];\n\n  // Draw continents with realistic satellite imagery style\n  continentData.forEach(continent => {\n    continent.regions.forEach(region => {\n      drawSatelliteRegion(ctx, region, width, height);\n    });\n  });\n\n  // Add topographical features\n  addMountainRanges(ctx, width, height);\n  addRiverSystems(ctx, width, height);\n  addDesertDetails(ctx, width, height);\n}\n\nfunction addOceanDepth(ctx: CanvasRenderingContext2D, width: number, height: number) {\n  // Add darker areas for deep ocean trenches and lighter for shallow seas\n  const oceanFeatures = [\n    // Mariana Trench\n    { x: 0.88, y: 0.48, w: 0.02, h: 0.08, color: \"#000033\" },\n    // Mid-Atlantic Ridge\n    { x: 0.35, y: 0.3, w: 0.01, h: 0.4, color: \"#1a4480\" },\n    // Continental shelves (lighter blue)\n    { x: 0.12, y: 0.35, w: 0.25, h: 0.03, color: \"#4682b4\" }, // North American shelf\n    { x: 0.48, y: 0.25, w: 0.15, h: 0.02, color: \"#4682b4\" }, // European shelf\n  ];\n\n  oceanFeatures.forEach(feature => {\n    ctx.fillStyle = feature.color;\n    drawOrganicShape(ctx, feature, width, height, 0.3);\n  });\n}\n\nfunction drawSatelliteRegion(ctx: CanvasRenderingContext2D, region: any, width: number, height: number) {\n  // Base terrain color\n  ctx.fillStyle = region.color;\n  drawOrganicShape(ctx, region, width, height, 0.4);\n\n  // Add terrain texture variation\n  const imageData = ctx.getImageData(\n    region.x * width - region.w * width * 0.1,\n    region.y * height - region.h * height * 0.1,\n    region.w * width * 1.2,\n    region.h * height * 1.2\n  );\n  \n  const data = imageData.data;\n  \n  for (let i = 0; i < data.length; i += 4) {\n    // Add realistic terrain variation\n    const variation = (Math.random() - 0.5) * 30;\n    data[i] = Math.max(0, Math.min(255, data[i] + variation));\n    data[i + 1] = Math.max(0, Math.min(255, data[i + 1] + variation));\n    data[i + 2] = Math.max(0, Math.min(255, data[i + 2] + variation));\n  }\n  \n  ctx.putImageData(imageData, \n    region.x * width - region.w * width * 0.1,\n    region.y * height - region.h * height * 0.1\n  );\n}\n\nfunction drawOrganicShape(ctx: CanvasRenderingContext2D, shape: any, canvasWidth: number, canvasHeight: number, variation: number = 0.4) {\n  const centerX = shape.x * canvasWidth;\n  const centerY = shape.y * canvasHeight;\n  const radiusX = (shape.w * canvasWidth) / 2;\n  const radiusY = (shape.h * canvasHeight) / 2;\n\n  ctx.beginPath();\n  \n  // Create irregular, realistic coastlines\n  for (let i = 0; i <= 64; i++) {\n    const angle = (i / 64) * Math.PI * 2;\n    const randomVariation = 0.5 + Math.random() * variation;\n    const x = centerX + Math.cos(angle) * radiusX * randomVariation;\n    const y = centerY + Math.sin(angle) * radiusY * randomVariation;\n    \n    if (i === 0) {\n      ctx.moveTo(x, y);\n    } else {\n      ctx.lineTo(x, y);\n    }\n  }\n  \n  ctx.closePath();\n  ctx.fill();\n}\n\nfunction addMountainRanges(ctx: CanvasRenderingContext2D, width: number, height: number) {\n  const mountains = [\n    // Himalayas\n    { x: 0.72, y: 0.42, w: 0.12, h: 0.03, color: \"#8b7355\" },\n    // Andes\n    { x: 0.22, y: 0.55, w: 0.02, h: 0.35, color: \"#a0522d\" },\n    // Rocky Mountains\n    { x: 0.16, y: 0.32, w: 0.03, h: 0.18, color: \"#696969\" },\n    // Alps\n    { x: 0.51, y: 0.31, w: 0.06, h: 0.02, color: \"#708090\" },\n    // Urals\n    { x: 0.58, y: 0.25, w: 0.01, h: 0.15, color: \"#778899\" },\n  ];\n\n  mountains.forEach(range => {\n    ctx.fillStyle = range.color;\n    drawOrganicShape(ctx, range, width, height, 0.2);\n  });\n}\n\nfunction addRiverSystems(ctx: CanvasRenderingContext2D, width: number, height: number) {\n  ctx.strokeStyle = \"#4169e1\";\n  ctx.lineWidth = 1;\n  \n  // Amazon River\n  ctx.beginPath();\n  ctx.moveTo(0.18 * width, 0.62 * height);\n  ctx.quadraticCurveTo(0.25 * width, 0.60 * height, 0.32 * width, 0.62 * height);\n  ctx.stroke();\n  \n  // Nile River\n  ctx.beginPath();\n  ctx.moveTo(0.54 * width, 0.38 * height);\n  ctx.quadraticCurveTo(0.55 * width, 0.50 * height, 0.54 * width, 0.65 * height);\n  ctx.stroke();\n  \n  // Mississippi River\n  ctx.beginPath();\n  ctx.moveTo(0.20 * width, 0.32 * height);\n  ctx.quadraticCurveTo(0.21 * width, 0.40 * height, 0.23 * width, 0.48 * height);\n  ctx.stroke();\n}\n\nfunction addDesertDetails(ctx: CanvasRenderingContext2D, width: number, height: number) {\n  const deserts = [\n    // Sahara with dune patterns\n    { x: 0.50, y: 0.40, w: 0.18, h: 0.08, color: \"#f4e4bc\" },\n    // Arabian Desert\n    { x: 0.58, y: 0.42, w: 0.08, h: 0.06, color: \"#ddbf94\" },\n    // Gobi Desert\n    { x: 0.78, y: 0.35, w: 0.12, h: 0.06, color: \"#c19a6b\" },\n    // Mojave\n    { x: 0.14, y: 0.43, w: 0.06, h: 0.04, color: \"#d2b48c\" },\n  ];\n\n  deserts.forEach(desert => {\n    ctx.fillStyle = desert.color;\n    drawOrganicShape(ctx, desert, width, height, 0.3);\n    \n    // Add dune patterns\n    for (let i = 0; i < 5; i++) {\n      const duneX = (desert.x + (Math.random() - 0.5) * desert.w) * width;\n      const duneY = (desert.y + (Math.random() - 0.5) * desert.h) * height;\n      \n      ctx.fillStyle = `rgba(240, 230, 180, 0.3)`;\n      ctx.beginPath();\n      ctx.ellipse(duneX, duneY, 8, 4, Math.random() * Math.PI, 0, Math.PI * 2);\n      ctx.fill();\n    }\n  });\n}\n\n// Enhanced night lights based on NASA satellite imagery patterns\nfunction addNASAStyleNightLights(ctx: CanvasRenderingContext2D, width: number, height: number) {\n  // Major megalopolis regions with accurate light distribution\n  const lightRegions = [\n    // Northeast US Corridor (Boston-NYC-Washington)\n    { centerX: 0.22, centerY: 0.39, density: 80, spread: 0.08, intensity: 1.0 },\n    // California Coast (SF-LA)\n    { centerX: 0.13, centerY: 0.45, density: 60, spread: 0.06, intensity: 0.9 },\n    // European Megalopolis (London-Paris-Amsterdam-Ruhr)\n    { centerX: 0.51, centerY: 0.30, density: 100, spread: 0.12, intensity: 1.0 },\n    // Tokyo-Osaka Corridor\n    { centerX: 0.89, centerY: 0.43, density: 70, spread: 0.08, intensity: 1.0 },\n    // East China Coast (Shanghai-Beijing corridor)\n    { centerX: 0.84, centerY: 0.40, density: 120, spread: 0.15, intensity: 1.1 },\n    // Delhi-Mumbai Corridor\n    { centerX: 0.77, centerY: 0.47, density: 90, spread: 0.10, intensity: 0.8 },\n    // SÃ£o Paulo-Rio de Janeiro\n    { centerX: 0.28, centerY: 0.72, density: 50, spread: 0.06, intensity: 0.8 },\n    // Cairo-Nile Delta\n    { centerX: 0.54, centerY: 0.45, density: 40, spread: 0.04, intensity: 0.7 },\n    // Mexico City\n    { centerX: 0.18, centerY: 0.52, density: 30, spread: 0.04, intensity: 0.8 },\n    // Nigeria Coast (Lagos)\n    { centerX: 0.51, centerY: 0.58, density: 25, spread: 0.03, intensity: 0.6 },\n  ];\n\n  lightRegions.forEach(region => {\n    for (let i = 0; i < region.density; i++) {\n      // Use normal distribution for realistic city clustering\n      const angle = Math.random() * Math.PI * 2;\n      const distance = Math.abs(normalRandom()) * region.spread * 0.5;\n      const x = (region.centerX + Math.cos(angle) * distance) * width;\n      const y = (region.centerY + Math.sin(angle) * distance) * height;\n      \n      // Variable light sizes for cities, towns, and suburbs\n      const lightType = Math.random();\n      let size, brightness, color;\n      \n      if (lightType < 0.1) {\n        // Major cities - bright white/blue\n        size = 3 + Math.random() * 5;\n        brightness = 0.9 * region.intensity;\n        color = [255, 245, 220]; // Warm white\n      } else if (lightType < 0.3) {\n        // Medium cities - yellow-white\n        size = 2 + Math.random() * 3;\n        brightness = 0.7 * region.intensity;\n        color = [255, 220, 180]; // Warm yellow\n      } else {\n        // Towns and suburbs - orange\n        size = 1 + Math.random() * 2;\n        brightness = 0.4 * region.intensity;\n        color = [255, 180, 120]; // Orange\n      }\n      \n      // Create realistic light bloom effect\n      const maxRadius = size * 12;\n      const gradient = ctx.createRadialGradient(x, y, 0, x, y, maxRadius);\n      gradient.addColorStop(0, `rgba(${color[0]}, ${color[1]}, ${color[2]}, ${brightness})`);\n      gradient.addColorStop(0.2, `rgba(${color[0]}, ${color[1] * 0.9}, ${color[2] * 0.8}, ${brightness * 0.8})`);\n      gradient.addColorStop(0.5, `rgba(${color[0] * 0.9}, ${color[1] * 0.7}, ${color[2] * 0.5}, ${brightness * 0.4})`);\n      gradient.addColorStop(0.8, `rgba(${color[0] * 0.8}, ${color[1] * 0.5}, ${color[2] * 0.3}, ${brightness * 0.1})`);\n      gradient.addColorStop(1, \"transparent\");\n      \n      ctx.fillStyle = gradient;\n      ctx.beginPath();\n      ctx.arc(x, y, maxRadius, 0, Math.PI * 2);\n      ctx.fill();\n      \n      // Bright core\n      ctx.fillStyle = `rgba(${color[0]}, ${color[1]}, ${color[2]}, ${brightness})`;\n      ctx.beginPath();\n      ctx.arc(x, y, size * 0.8, 0, Math.PI * 2);\n      ctx.fill();\n    }\n  });\n}\n\n// Create realistic cloud patterns using multiple noise octaves\nfunction createRealisticClouds(ctx: CanvasRenderingContext2D, width: number, height: number) {\n  const imageData = ctx.createImageData(width, height);\n  const data = imageData.data;\n\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      const i = (y * width + x) * 4;\n      \n      // Multiple octaves of noise for realistic cloud formation\n      const scale1 = 0.005;\n      const scale2 = 0.01;\n      const scale3 = 0.02;\n      const scale4 = 0.04;\n      \n      const noise = \n        Math.sin(x * scale1) * Math.cos(y * scale1) * 0.4 +\n        Math.sin(x * scale2) * Math.cos(y * scale2) * 0.3 +\n        Math.sin(x * scale3) * Math.cos(y * scale3) * 0.2 +\n        Math.sin(x * scale4) * Math.cos(y * scale4) * 0.1;\n      \n      // Create realistic cloud density\n      let cloudDensity = Math.max(0, noise + 0.2);\n      \n      // Add weather patterns - more clouds in certain latitudes\n      const latitude = Math.abs((y / height) - 0.5) * 2; // 0 at equator, 1 at poles\n      if (latitude > 0.3 && latitude < 0.7) {\n        cloudDensity *= 1.3; // More clouds in temperate zones\n      }\n      \n      const alpha = cloudDensity * 255;\n      const brightness = Math.min(255, alpha * 1.2);\n      \n      data[i] = brightness;     // Red\n      data[i + 1] = brightness; // Green\n      data[i + 2] = brightness; // Blue\n      data[i + 3] = alpha;      // Alpha\n    }\n  }\n\n  ctx.putImageData(imageData, 0, 0);\n}\n\n// Enhanced topographical normal map with real elevation data patterns\nfunction createTopographicalNormalMap(ctx: CanvasRenderingContext2D, width: number, height: number) {\n  const imageData = ctx.createImageData(width, height);\n  const data = imageData.data;\n\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      const i = (y * width + x) * 4;\n      \n      // Create elevation-based normal mapping\n      const elevation = \n        Math.sin(x * 0.02) * Math.sin(y * 0.02) * 0.3 +  // Large features\n        Math.sin(x * 0.05) * Math.sin(y * 0.05) * 0.2 +  // Medium features\n        Math.sin(x * 0.1) * Math.sin(y * 0.1) * 0.1;     // Fine detail\n      \n      const normalizedElevation = (elevation + 0.6) * 0.8;\n      const normalValue = normalizedElevation * 255;\n      \n      data[i] = normalValue * 0.6 + 127;     // Red (X normal)\n      data[i + 1] = normalValue * 0.6 + 127; // Green (Y normal)\n      data[i + 2] = 255;                     // Blue (Z normal)\n      data[i + 3] = 255;                     // Alpha\n    }\n  }\n\n  ctx.putImageData(imageData, 0, 0);\n}\n\n// Helper function for normal distribution (Box-Muller transform)\nfunction normalRandom(): number {\n  const u1 = Math.random();\n  const u2 = Math.random();\n  return Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);\n}\n"],"names":["Earth","earthRef","nightLightsRef","cloudsRef","atmosphereRef","dayTexture","canvas","document","createElement","ctx","getContext","width","height","createSatelliteEarthTexture","texture","wrapS","wrapT","generateMipmaps","minFilter","magFilter","nightTexture","fillStyle","fillRect","addNASAStyleNightLights","cloudTexture","createRealisticClouds","normalTexture","createTopographicalNormalMap","state","delta","current","rotation","y","material","uniforms","time","value","clock","getElapsedTime","ref","args","map","normalMap","normalScale","shininess","specular","transparent","opacity","blending","alphaTest","color","vertexShader","fragmentShader","side","oceanGradient","createLinearGradient","addColorStop","addOceanDepth","continentData","name","regions","x","w","h","type","forEach","continent","region","drawSatelliteRegion","addMountainRanges","addRiverSystems","addDesertDetails","oceanFeatures","feature","drawOrganicShape","imageData","getImageData","data","i","length","variation","Math","random","max","min","putImageData","shape","canvasWidth","canvasHeight","centerX","centerY","radiusX","radiusY","beginPath","angle","PI","randomVariation","cos","sin","moveTo","lineTo","closePath","fill","mountains","range","strokeStyle","lineWidth","quadraticCurveTo","stroke","deserts","desert","duneX","duneY","ellipse","lightRegions","density","spread","intensity","distance","abs","normalRandom","lightType","size","brightness","maxRadius","gradient","createRadialGradient","arc","createImageData","scale1","scale2","scale3","scale4","noise","cloudDensity","latitude","alpha","elevation","normalizedElevation","normalValue","u1","u2","sqrt","log"],"mappings":"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"}},
    {"offset": {"line": 885, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/events/GlobeEventBus.ts"],"sourcesContent":["/**\n * Event types for the Globe Observer system\n */\nexport enum GlobeEventType {\n  STATION_SELECTED = 'station_selected',\n  STATION_HOVERED = 'station_hovered',\n  STATIONS_LOADED = 'stations_loaded',\n  ZOOM_CHANGED = 'zoom_changed',\n  LOCATION_CHANGED = 'location_changed',\n  AUDIO_STATE_CHANGED = 'audio_state_changed',\n  ERROR_OCCURRED = 'error_occurred'\n}\n\n/**\n * Base event interface\n */\nexport interface GlobeEvent {\n  type: GlobeEventType;\n  timestamp: number;\n  data?: any;\n}\n\n/**\n * Specific event interfaces\n */\nexport interface StationSelectedEvent extends GlobeEvent {\n  type: GlobeEventType.STATION_SELECTED;\n  data: {\n    stationId: string;\n    station: any;\n  };\n}\n\nexport interface StationsLoadedEvent extends GlobeEvent {\n  type: GlobeEventType.STATIONS_LOADED;\n  data: {\n    count: number;\n    region?: string;\n    zoomLevel: number;\n  };\n}\n\nexport interface ZoomChangedEvent extends GlobeEvent {\n  type: GlobeEventType.ZOOM_CHANGED;\n  data: {\n    oldZoom: number;\n    newZoom: number;\n    cameraDistance: number;\n  };\n}\n\nexport interface ErrorOccurredEvent extends GlobeEvent {\n  type: GlobeEventType.ERROR_OCCURRED;\n  data: {\n    message: string;\n    source: string;\n    error?: Error;\n  };\n}\n\n/**\n * Observer interface for subscribing to globe events\n */\nexport interface IGlobeObserver {\n  onEvent(event: GlobeEvent): void;\n  getObserverId(): string;\n}\n\n/**\n * Observable interface for publishing globe events\n */\nexport interface IGlobeObservable {\n  subscribe(observer: IGlobeObserver, eventTypes?: GlobeEventType[]): void;\n  unsubscribe(observerId: string): void;\n  notify(event: GlobeEvent): void;\n}\n\n/**\n * Implementation of Observable pattern for Globe events\n * Provides decoupled communication between components\n */\nexport class GlobeEventBus implements IGlobeObservable {\n  private observers = new Map<string, {\n    observer: IGlobeObserver;\n    eventTypes: Set<GlobeEventType>;\n  }>();\n  \n  private eventHistory: GlobeEvent[] = [];\n  private readonly maxHistorySize = 100;\n\n  /**\n   * Subscribe an observer to specific event types\n   */\n  subscribe(observer: IGlobeObserver, eventTypes?: GlobeEventType[]): void {\n    const observerId = observer.getObserverId();\n    const subscribedTypes = new Set(eventTypes || Object.values(GlobeEventType));\n    \n    this.observers.set(observerId, {\n      observer,\n      eventTypes: subscribedTypes\n    });\n\n    console.log(`Observer ${observerId} subscribed to events:`, Array.from(subscribedTypes));\n  }\n\n  /**\n   * Unsubscribe an observer\n   */\n  unsubscribe(observerId: string): void {\n    if (this.observers.delete(observerId)) {\n      console.log(`Observer ${observerId} unsubscribed`);\n    }\n  }\n\n  /**\n   * Notify all subscribed observers of an event\n   */\n  notify(event: GlobeEvent): void {\n    // Add to event history\n    this.addToHistory(event);\n\n    // Notify relevant observers\n    Array.from(this.observers.entries()).forEach(([observerId, { observer, eventTypes }]) => {\n      if (eventTypes.has(event.type)) {\n        try {\n          observer.onEvent(event);\n        } catch (error) {\n          console.error(`Error in observer ${observerId}:`, error);\n          \n          // Emit error event\n          this.notify({\n            type: GlobeEventType.ERROR_OCCURRED,\n            timestamp: Date.now(),\n            data: {\n              message: `Observer ${observerId} error`,\n              source: 'GlobeEventBus',\n              error: error instanceof Error ? error : new Error(String(error))\n            }\n          });\n        }\n      }\n    });\n  }\n\n  /**\n   * Get list of active observers\n   */\n  getObservers(): string[] {\n    return Array.from(this.observers.keys());\n  }\n\n  /**\n   * Get event history\n   */\n  getEventHistory(eventType?: GlobeEventType): GlobeEvent[] {\n    if (eventType) {\n      return this.eventHistory.filter(event => event.type === eventType);\n    }\n    return [...this.eventHistory];\n  }\n\n  /**\n   * Clear event history\n   */\n  clearHistory(): void {\n    this.eventHistory = [];\n  }\n\n  /**\n   * Get statistics about event bus usage\n   */\n  getStats(): {\n    observerCount: number;\n    eventHistorySize: number;\n    eventTypeCounts: Record<string, number>;\n  } {\n    const eventTypeCounts: Record<string, number> = {};\n    \n    this.eventHistory.forEach(event => {\n      eventTypeCounts[event.type] = (eventTypeCounts[event.type] || 0) + 1;\n    });\n\n    return {\n      observerCount: this.observers.size,\n      eventHistorySize: this.eventHistory.length,\n      eventTypeCounts\n    };\n  }\n\n  private addToHistory(event: GlobeEvent): void {\n    this.eventHistory.push(event);\n    \n    // Maintain max history size\n    if (this.eventHistory.length > this.maxHistorySize) {\n      this.eventHistory.shift();\n    }\n  }\n}\n\n/**\n * Singleton event bus instance\n */\nexport const globeEventBus = new GlobeEventBus();\n\n/**\n * Base class for components that need to observe globe events\n */\nexport abstract class GlobeObserver implements IGlobeObserver {\n  protected eventBus: GlobeEventBus;\n  private observerId: string;\n\n  constructor(observerId: string, eventBus: GlobeEventBus = globeEventBus) {\n    this.observerId = observerId;\n    this.eventBus = eventBus;\n  }\n\n  getObserverId(): string {\n    return this.observerId;\n  }\n\n  abstract onEvent(event: GlobeEvent): void;\n\n  protected subscribe(eventTypes?: GlobeEventType[]): void {\n    this.eventBus.subscribe(this, eventTypes);\n  }\n\n  protected unsubscribe(): void {\n    this.eventBus.unsubscribe(this.observerId);\n  }\n\n  protected emit(event: Omit<GlobeEvent, 'timestamp'>): void {\n    this.eventBus.notify({\n      ...event,\n      timestamp: Date.now()\n    });\n  }\n}\n\n/**\n * Utility functions for creating common events\n */\nexport const createGlobeEvent = {\n  stationSelected: (stationId: string, station: any): StationSelectedEvent => ({\n    type: GlobeEventType.STATION_SELECTED,\n    timestamp: Date.now(),\n    data: { stationId, station }\n  }),\n\n  stationsLoaded: (count: number, region?: string, zoomLevel = 1): StationsLoadedEvent => ({\n    type: GlobeEventType.STATIONS_LOADED,\n    timestamp: Date.now(),\n    data: { count, region, zoomLevel }\n  }),\n\n  zoomChanged: (oldZoom: number, newZoom: number, cameraDistance: number): ZoomChangedEvent => ({\n    type: GlobeEventType.ZOOM_CHANGED,\n    timestamp: Date.now(),\n    data: { oldZoom, newZoom, cameraDistance }\n  }),\n\n  error: (message: string, source: string, error?: Error): ErrorOccurredEvent => ({\n    type: GlobeEventType.ERROR_OCCURRED,\n    timestamp: Date.now(),\n    data: { message, source, error }\n  })\n};"],"names":["GlobeEventType","GlobeEventBus","observers","Map","eventHistory","maxHistorySize","subscribe","observer","eventTypes","observerId","getObserverId","subscribedTypes","Set","Object","values","set","console","log","Array","from","unsubscribe","delete","notify","event","addToHistory","entries","forEach","has","type","onEvent","error","timestamp","Date","now","data","message","source","Error","String","getObservers","keys","getEventHistory","eventType","filter","clearHistory","getStats","eventTypeCounts","observerCount","size","eventHistorySize","length","push","shift","globeEventBus","GlobeObserver","eventBus","emit","createGlobeEvent","stationSelected","stationId","station","stationsLoaded","count","region","zoomLevel","zoomChanged","oldZoom","newZoom","cameraDistance"],"mappings":"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"}},
    {"offset": {"line": 1063, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/commands/GlobeCommands.ts"],"sourcesContent":["/**\n * Command pattern implementation for Globe actions\n * Provides undo/redo functionality and action queuing\n */\n\nexport interface ICommand {\n  execute(): Promise<void> | void;\n  undo(): Promise<void> | void;\n  canUndo(): boolean;\n  getDescription(): string;\n}\n\n/**\n * Abstract base command with common functionality\n */\nexport abstract class BaseCommand implements ICommand {\n  protected timestamp: number;\n  protected executed = false;\n\n  constructor() {\n    this.timestamp = Date.now();\n  }\n\n  abstract execute(): Promise<void> | void;\n  abstract undo(): Promise<void> | void;\n  abstract getDescription(): string;\n\n  canUndo(): boolean {\n    return this.executed;\n  }\n\n  protected markExecuted(): void {\n    this.executed = true;\n  }\n\n  protected markUndo(): void {\n    this.executed = false;\n  }\n\n  getTimestamp(): number {\n    return this.timestamp;\n  }\n}\n\n/**\n * Station selection command\n */\nexport class SelectStationCommand extends BaseCommand {\n  constructor(\n    private stationId: string,\n    private station: any,\n    private onExecute: (stationId: string, station: any) => void,\n    private onUndo: () => void,\n    private previousSelection?: { stationId: string; station: any }\n  ) {\n    super();\n  }\n\n  execute(): void {\n    this.onExecute(this.stationId, this.station);\n    this.markExecuted();\n  }\n\n  undo(): void {\n    if (this.previousSelection) {\n      this.onExecute(this.previousSelection.stationId, this.previousSelection.station);\n    } else {\n      this.onUndo();\n    }\n    this.markUndo();\n  }\n\n  getDescription(): string {\n    return `Select station: ${this.station?.name || this.stationId}`;\n  }\n}\n\n/**\n * Camera position command\n */\nexport class SetCameraPositionCommand extends BaseCommand {\n  constructor(\n    private newPosition: [number, number, number],\n    private setCameraPosition: (position: [number, number, number]) => void,\n    private previousPosition: [number, number, number]\n  ) {\n    super();\n  }\n\n  execute(): void {\n    this.setCameraPosition(this.newPosition);\n    this.markExecuted();\n  }\n\n  undo(): void {\n    this.setCameraPosition(this.previousPosition);\n    this.markUndo();\n  }\n\n  getDescription(): string {\n    return `Move camera to ${this.newPosition.join(', ')}`;\n  }\n}\n\n/**\n * Load stations command\n */\nexport class LoadStationsCommand extends BaseCommand {\n  constructor(\n    private region: string,\n    private onLoad: (region: string) => Promise<void>,\n    private onUnload: () => void\n  ) {\n    super();\n  }\n\n  async execute(): Promise<void> {\n    await this.onLoad(this.region);\n    this.markExecuted();\n  }\n\n  undo(): void {\n    this.onUnload();\n    this.markUndo();\n  }\n\n  getDescription(): string {\n    return `Load stations for region: ${this.region}`;\n  }\n}\n\n/**\n * Filter stations command\n */\nexport class FilterStationsCommand extends BaseCommand {\n  constructor(\n    private filterCriteria: any,\n    private onFilter: (criteria: any) => void,\n    private onClearFilter: () => void\n  ) {\n    super();\n  }\n\n  execute(): void {\n    this.onFilter(this.filterCriteria);\n    this.markExecuted();\n  }\n\n  undo(): void {\n    this.onClearFilter();\n    this.markUndo();\n  }\n\n  getDescription(): string {\n    return `Apply filter: ${JSON.stringify(this.filterCriteria)}`;\n  }\n}\n\n/**\n * Batch command for executing multiple commands together\n */\nexport class BatchCommand extends BaseCommand {\n  constructor(\n    private commands: ICommand[],\n    private description: string\n  ) {\n    super();\n  }\n\n  async execute(): Promise<void> {\n    for (const command of this.commands) {\n      await command.execute();\n    }\n    this.markExecuted();\n  }\n\n  async undo(): Promise<void> {\n    // Undo in reverse order\n    for (let i = this.commands.length - 1; i >= 0; i--) {\n      const command = this.commands[i];\n      if (command.canUndo()) {\n        await command.undo();\n      }\n    }\n    this.markUndo();\n  }\n\n  canUndo(): boolean {\n    return this.executed && this.commands.some(cmd => cmd.canUndo());\n  }\n\n  getDescription(): string {\n    return this.description;\n  }\n}\n\n/**\n * Command invoker with undo/redo history\n */\nexport class CommandInvoker {\n  private history: ICommand[] = [];\n  private currentPosition = -1;\n  private readonly maxHistorySize: number;\n\n  constructor(maxHistorySize = 50) {\n    this.maxHistorySize = maxHistorySize;\n  }\n\n  /**\n   * Execute a command and add it to history\n   */\n  async execute(command: ICommand): Promise<void> {\n    try {\n      await command.execute();\n      \n      // Remove any commands after current position (when doing new action after undo)\n      this.history = this.history.slice(0, this.currentPosition + 1);\n      \n      // Add new command\n      this.history.push(command);\n      this.currentPosition++;\n      \n      // Maintain max history size\n      if (this.history.length > this.maxHistorySize) {\n        this.history.shift();\n        this.currentPosition--;\n      }\n      \n      console.log(`Executed command: ${command.getDescription()}`);\n    } catch (error) {\n      console.error(`Failed to execute command: ${command.getDescription()}`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Undo the last command\n   */\n  async undo(): Promise<boolean> {\n    if (!this.canUndo()) {\n      return false;\n    }\n\n    const command = this.history[this.currentPosition];\n    try {\n      await command.undo();\n      this.currentPosition--;\n      console.log(`Undid command: ${command.getDescription()}`);\n      return true;\n    } catch (error) {\n      console.error(`Failed to undo command: ${command.getDescription()}`, error);\n      return false;\n    }\n  }\n\n  /**\n   * Redo the next command\n   */\n  async redo(): Promise<boolean> {\n    if (!this.canRedo()) {\n      return false;\n    }\n\n    this.currentPosition++;\n    const command = this.history[this.currentPosition];\n    try {\n      await command.execute();\n      console.log(`Redid command: ${command.getDescription()}`);\n      return true;\n    } catch (error) {\n      console.error(`Failed to redo command: ${command.getDescription()}`, error);\n      this.currentPosition--;\n      return false;\n    }\n  }\n\n  /**\n   * Check if undo is possible\n   */\n  canUndo(): boolean {\n    return this.currentPosition >= 0 && \n           this.history[this.currentPosition]?.canUndo();\n  }\n\n  /**\n   * Check if redo is possible\n   */\n  canRedo(): boolean {\n    return this.currentPosition < this.history.length - 1;\n  }\n\n  /**\n   * Get command history\n   */\n  getHistory(): Array<{ description: string; canUndo: boolean; timestamp: number }> {\n    return this.history.map((cmd, index) => ({\n      description: cmd.getDescription(),\n      canUndo: cmd.canUndo(),\n      timestamp: (cmd as BaseCommand).getTimestamp?.() || 0,\n      isCurrent: index === this.currentPosition\n    }));\n  }\n\n  /**\n   * Clear command history\n   */\n  clearHistory(): void {\n    this.history = [];\n    this.currentPosition = -1;\n  }\n\n  /**\n   * Get current command\n   */\n  getCurrentCommand(): ICommand | undefined {\n    return this.history[this.currentPosition];\n  }\n\n  /**\n   * Get statistics\n   */\n  getStats(): { \n    totalCommands: number; \n    currentPosition: number; \n    canUndo: boolean; \n    canRedo: boolean; \n  } {\n    return {\n      totalCommands: this.history.length,\n      currentPosition: this.currentPosition,\n      canUndo: this.canUndo(),\n      canRedo: this.canRedo()\n    };\n  }\n}\n\n/**\n * Singleton command invoker\n */\nexport const globeCommandInvoker = new CommandInvoker();\n\n/**\n * Command factory for creating common commands\n */\nexport const createCommand = {\n  selectStation: (\n    stationId: string, \n    station: any, \n    onExecute: (stationId: string, station: any) => void,\n    onUndo: () => void,\n    previousSelection?: { stationId: string; station: any }\n  ) => new SelectStationCommand(stationId, station, onExecute, onUndo, previousSelection),\n\n  setCameraPosition: (\n    newPosition: [number, number, number],\n    setCameraPosition: (position: [number, number, number]) => void,\n    previousPosition: [number, number, number]\n  ) => new SetCameraPositionCommand(newPosition, setCameraPosition, previousPosition),\n\n  loadStations: (\n    region: string,\n    onLoad: (region: string) => Promise<void>,\n    onUnload: () => void\n  ) => new LoadStationsCommand(region, onLoad, onUnload),\n\n  filterStations: (\n    filterCriteria: any,\n    onFilter: (criteria: any) => void,\n    onClearFilter: () => void\n  ) => new FilterStationsCommand(filterCriteria, onFilter, onClearFilter),\n\n  batch: (commands: ICommand[], description: string) => \n    new BatchCommand(commands, description)\n};"],"names":["BaseCommand","timestamp","executed","Date","now","canUndo","markExecuted","markUndo","getTimestamp","SelectStationCommand","stationId","station","onExecute","onUndo","previousSelection","execute","undo","getDescription","name","SetCameraPositionCommand","newPosition","setCameraPosition","previousPosition","join","LoadStationsCommand","region","onLoad","onUnload","FilterStationsCommand","filterCriteria","onFilter","onClearFilter","JSON","stringify","BatchCommand","commands","description","command","i","length","some","cmd","CommandInvoker","history","currentPosition","maxHistorySize","slice","push","shift","console","log","error","redo","canRedo","getHistory","map","index","isCurrent","clearHistory","getCurrentCommand","getStats","totalCommands","globeCommandInvoker","createCommand","selectStation","loadStations","filterStations","batch"],"mappings":"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"}},
    {"offset": {"line": 1333, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/usecases/StationUseCases.ts"],"sourcesContent":["import { IStationLoadingUseCase, IStationSelectionUseCase } from \"../domain/usecases\";\nimport { MarkerData } from \"../strategies/MarkerStrategy\";\nimport { StationRepository } from \"../repositories/StationRepository\";\nimport { GlobeEventBus, createGlobeEvent, GlobeEventType } from \"../events/GlobeEventBus\";\nimport { CommandInvoker, createCommand } from \"../commands/GlobeCommands\";\nimport { latLngToPosition } from \"../utils/coordinates\";\n\n\n/**\n * Station Loading Use Case\n * Handles progressive loading and clustering of radio stations\n */\nexport class StationLoadingUseCase implements IStationLoadingUseCase {\n  constructor(\n    private stationRepository: StationRepository,\n    private eventBus: GlobeEventBus\n  ) {}\n\n  async loadStationsForView(zoomLevel: number): Promise<MarkerData[]> {\n    try {\n      this.eventBus.notify(createGlobeEvent.zoomChanged(0, zoomLevel, zoomLevel * 2));\n\n      let stations;\n      \n      // Progressive loading based on zoom level\n      if (zoomLevel <= 2) {\n        // Very zoomed out - load popular stations only\n        stations = await this.stationRepository.getPopularStations(50);\n      } else if (zoomLevel <= 4) {\n        // Medium zoom - load more stations\n        stations = await this.stationRepository.getProgressiveStations(200, 0);\n      } else {\n        // Close zoom - load comprehensive stations\n        stations = await this.stationRepository.getProgressiveStations(1000, 0);\n      }\n\n      // Group stations by city for clustering\n      const clusteredMarkers = this.clusterStationsByCity(stations, zoomLevel);\n      \n      this.eventBus.notify(createGlobeEvent.stationsLoaded(\n        clusteredMarkers.length,\n        'global',\n        zoomLevel\n      ));\n\n      return clusteredMarkers;\n    } catch (error) {\n      this.eventBus.notify(createGlobeEvent.error(\n        'Failed to load stations',\n        'StationLoadingUseCase',\n        error instanceof Error ? error : new Error(String(error))\n      ));\n      return [];\n    }\n  }\n\n  private coordinatesToPosition(lat: number, lng: number, radius: number = 1.01): [number, number, number] {\n    const phi = (90 - lat) * (Math.PI / 180);\n    const theta = (lng + 180) * (Math.PI / 180);\n    \n    const x = -(radius * Math.sin(phi) * Math.cos(theta));\n    const y = radius * Math.cos(phi);\n    const z = radius * Math.sin(phi) * Math.sin(theta);\n    \n    return [x, y, z];\n  }\n\n  private clusterStationsByCity(stations: any[], zoomLevel: number): MarkerData[] {\n    const cityGroups = new Map<string, any[]>();\n    \n    // Group stations by city\n    stations.forEach(station => {\n      const cityKey = `${station.location?.city || 'Unknown'}-${station.location?.country || 'Unknown'}`;\n      if (!cityGroups.has(cityKey)) {\n        cityGroups.set(cityKey, []);\n      }\n      cityGroups.get(cityKey)!.push(station);\n    });\n\n    // Convert to marker data\n    return Array.from(cityGroups.entries()).map(([cityKey, groupStations]) => {\n      const representative = groupStations[0];\n      const lat = representative.location?.latitude || representative.location?.lat || 0;\n      const lng = representative.location?.longitude || representative.location?.lng || 0;\n      \n      return {\n        id: cityKey,\n        position: this.coordinatesToPosition(lat, lng, 1.01),\n        stations: groupStations,\n        city: representative.location?.city || 'Unknown',\n        country: representative.location?.country || 'Unknown',\n        isVisible: true,\n        zoomLevel,\n        type: zoomLevel > 5 ? 'single' : 'cluster',\n        metadata: {\n          city: representative.location?.city || 'Unknown',\n          country: representative.location?.country || 'Unknown',\n          zoomLevel,\n          density: this.calculateDensity(groupStations.length)\n        }\n      };\n    });\n  }\n\n  private calculateDensity(stationCount: number): 'low' | 'medium' | 'high' | 'very-high' {\n    if (stationCount > 20) return 'very-high';\n    if (stationCount > 10) return 'high';\n    if (stationCount > 5) return 'medium';\n    return 'low';\n  }\n}\n\n/**\n * Station Selection Use Case  \n * Handles station selection with command pattern and events\n */\nexport class StationSelectionUseCase implements IStationSelectionUseCase {\n  private currentSelection: { stationId: string; station: any } | null = null;\n\n  constructor(\n    private eventBus: GlobeEventBus,\n    private commandInvoker: CommandInvoker\n  ) {}\n\n  async selectStation(stationId: string, station: any): Promise<void> {\n    const previousSelection = this.currentSelection;\n    \n    // Create selection command\n    const command = createCommand.selectStation(\n      stationId,\n      station,\n      (id, st) => this.executeSelection(id, st),\n      () => this.clearSelection(),\n      previousSelection || undefined\n    );\n\n    // Execute through command invoker for undo/redo support\n    await this.commandInvoker.execute(command);\n  }\n\n  async clearSelection(): Promise<void> {\n    if (!this.currentSelection) return;\n\n    const previousSelection = this.currentSelection;\n    this.currentSelection = null;\n\n    // Emit selection cleared event\n    this.eventBus.notify({\n      type: GlobeEventType.STATION_SELECTED,\n      timestamp: Date.now(),\n      data: { stationId: null, station: null, previousSelection }\n    });\n  }\n\n  getCurrentSelection(): { stationId: string; station: any } | null {\n    return this.currentSelection;\n  }\n\n  async hoverStation(stationId: string | null): Promise<void> {\n    this.eventBus.notify({\n      type: GlobeEventType.STATION_HOVERED,\n      timestamp: Date.now(),\n      data: { stationId }\n    });\n  }\n\n  private executeSelection(stationId: string, station: any): void {\n    this.currentSelection = { stationId, station };\n\n    // Emit selection event\n    this.eventBus.notify(createGlobeEvent.stationSelected(stationId, station));\n  }\n}"],"names":["StationLoadingUseCase","stationRepository","eventBus","loadStationsForView","zoomLevel","notify","zoomChanged","stations","getPopularStations","getProgressiveStations","clusteredMarkers","clusterStationsByCity","stationsLoaded","length","error","Error","String","coordinatesToPosition","lat","lng","radius","phi","Math","PI","theta","x","sin","cos","y","z","cityGroups","Map","forEach","station","cityKey","location","city","country","has","set","get","push","Array","from","entries","map","groupStations","representative","latitude","longitude","id","position","isVisible","type","metadata","density","calculateDensity","stationCount","StationSelectionUseCase","currentSelection","commandInvoker","selectStation","stationId","previousSelection","command","st","executeSelection","clearSelection","undefined","execute","STATION_SELECTED","timestamp","Date","now","data","getCurrentSelection","hoverStation","STATION_HOVERED","stationSelected"],"mappings":"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"}},
    {"offset": {"line": 1482, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/strategies/MarkerStrategy.ts"],"sourcesContent":["import * as THREE from \"three\";\nimport { RadioStation } from \"../types\";\n\nexport interface MarkerData {\n  id: string;\n  position: [number, number, number];\n  stations: RadioStation[];\n  type: 'single' | 'cluster' | 'city' | 'country';\n  metadata: {\n    city?: string;\n    country?: string;\n    density?: 'low' | 'medium' | 'high' | 'very-high';\n    zoomLevel?: number;\n  };\n}\n\nexport interface MarkerStyle {\n  size: number;\n  color: string;\n  opacity: number;\n  hasLabel: boolean;\n  labelText?: string;\n  pulseEffect?: boolean;\n  glowEffect?: boolean;\n}\n\nexport abstract class BaseMarkerStrategy {\n  abstract calculateStyle(data: MarkerData, cameraDistance: number): MarkerStyle;\n  abstract shouldShow(data: MarkerData, zoomLevel: number): boolean;\n  abstract handleInteraction(data: MarkerData, interactionType: 'click' | 'hover'): void;\n}\n\nexport class SingleStationMarkerStrategy extends BaseMarkerStrategy {\n  calculateStyle(data: MarkerData, cameraDistance: number): MarkerStyle {\n    const baseSize = Math.max(0.05, Math.min(0.15, 0.3 / cameraDistance));\n    \n    return {\n      size: baseSize,\n      color: \"#5f72ff\",\n      opacity: 0.9,\n      hasLabel: cameraDistance < 3,\n      labelText: data.stations[0]?.name,\n      pulseEffect: false,\n      glowEffect: false\n    };\n  }\n\n  shouldShow(data: MarkerData, zoomLevel: number): boolean {\n    return zoomLevel > 4; // Show individual stations only at high zoom\n  }\n\n  handleInteraction(data: MarkerData, interactionType: 'click' | 'hover'): void {\n    if (interactionType === 'click' && data.stations[0]) {\n      // Dispatch station selection event\n      window.dispatchEvent(new CustomEvent('stationSelected', { \n        detail: data.stations[0] \n      }));\n    }\n  }\n}\n\nexport class ClusterMarkerStrategy extends BaseMarkerStrategy {\n  calculateStyle(data: MarkerData, cameraDistance: number): MarkerStyle {\n    const stationCount = data.stations.length;\n    const baseSize = Math.max(0.08, Math.min(0.25, 0.4 / cameraDistance));\n    const sizeMultiplier = Math.log(stationCount + 1) * 0.3;\n    \n    const densityColors = {\n      'low': \"#5f72ff\",\n      'medium': \"#ffde59\", \n      'high': \"#ffa502\",\n      'very-high': \"#ff4757\"\n    };\n\n    return {\n      size: baseSize + sizeMultiplier,\n      color: densityColors[data.metadata.density || 'low'],\n      opacity: 0.9,\n      hasLabel: cameraDistance < 6 && stationCount > 3,\n      labelText: data.metadata.city || `${stationCount} stations`,\n      pulseEffect: false,\n      glowEffect: true\n    };\n  }\n\n  shouldShow(data: MarkerData, zoomLevel: number): boolean {\n    return zoomLevel >= 1 && zoomLevel <= 6;\n  }\n\n  handleInteraction(data: MarkerData, interactionType: 'click' | 'hover'): void {\n    if (interactionType === 'click') {\n      if (data.stations.length === 1) {\n        this.handleInteraction(data, interactionType);\n      } else {\n        // Show cluster expansion or select most popular\n        const popularStation = data.stations.reduce((prev, current) => \n          (current.listeners > prev.listeners) ? current : prev\n        );\n        window.dispatchEvent(new CustomEvent('stationSelected', { \n          detail: popularStation \n        }));\n      }\n    }\n  }\n}\n\nexport class MarkerFactory {\n  private strategies = new Map<string, BaseMarkerStrategy>();\n\n  constructor() {\n    this.strategies.set('single', new SingleStationMarkerStrategy());\n    this.strategies.set('cluster', new ClusterMarkerStrategy());\n  }\n\n  createMarker(data: MarkerData, cameraDistance: number): {\n    style: MarkerStyle;\n    strategy: BaseMarkerStrategy;\n  } {\n    const strategy = this.strategies.get(data.type) || this.strategies.get('single')!;\n    \n    return {\n      style: strategy.calculateStyle(data, cameraDistance),\n      strategy\n    };\n  }\n\n  shouldShowMarker(data: MarkerData, zoomLevel: number): boolean {\n    const strategy = this.strategies.get(data.type) || this.strategies.get('single')!;\n    return strategy.shouldShow(data, zoomLevel);\n  }\n}"],"names":["BaseMarkerStrategy","SingleStationMarkerStrategy","calculateStyle","data","cameraDistance","baseSize","Math","max","min","size","color","opacity","hasLabel","labelText","stations","name","pulseEffect","glowEffect","shouldShow","zoomLevel","handleInteraction","interactionType","window","dispatchEvent","CustomEvent","detail","ClusterMarkerStrategy","stationCount","length","sizeMultiplier","log","densityColors","metadata","density","city","popularStation","reduce","prev","current","listeners","MarkerFactory","strategies","Map","set","createMarker","strategy","get","type","style","shouldShowMarker"],"mappings":"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"}},
    {"offset": {"line": 1579, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/services/radioDiscoveryService.ts"],"sourcesContent":["import { RadioStation } from \"../types/index\";\n\n/**\n * Enhanced Radio Discovery Service\n * Integrates with public APIs and maintains a curated list of global radio stations\n */\nexport class RadioDiscoveryService {\n  private baseUrl = \"https://de1.api.radio-browser.info/json\";\n  private cache = new Map<string, any>();\n  private cacheExpiry = 5 * 60 * 1000; // 5 minutes\n\n  /**\n   * Search radio stations from Radio Browser API\n   */\n  async searchOnlineStations(\n    query: string,\n    limit: number = 50,\n  ): Promise<RadioStation[]> {\n    const cacheKey = `search:${query}:${limit}`;\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await fetch(`${this.baseUrl}/stations/search`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"User-Agent\": \"RadioGlobe/1.0.0\",\n        },\n        body: JSON.stringify({\n          name: query,\n          limit,\n          hidebroken: true,\n          order: \"clickcount\",\n          reverse: true,\n        }),\n      });\n\n      if (!response.ok) throw new Error(\"Failed to fetch stations\");\n\n      const data = await response.json();\n      const stations = this.mapRadioBrowserStations(data);\n\n      this.setCache(cacheKey, stations);\n      return stations;\n    } catch (error) {\n      console.warn(\"Failed to fetch online stations:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Get stations by country from Radio Browser API\n   */\n  async getStationsByCountry(\n    countryCode: string,\n    limit: number = 100,\n  ): Promise<RadioStation[]> {\n    const cacheKey = `country:${countryCode}:${limit}`;\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await fetch(\n        `${this.baseUrl}/stations/bycountrycodeexact/${countryCode}?limit=${limit}&hidebroken=true&order=clickcount&reverse=true`,\n      );\n\n      if (!response.ok) throw new Error(\"Failed to fetch country stations\");\n\n      const data = await response.json();\n      const stations = this.mapRadioBrowserStations(data);\n\n      this.setCache(cacheKey, stations);\n      return stations;\n    } catch (error) {\n      console.warn(\"Failed to fetch country stations:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Get top stations globally with smart loading\n   */\n  async getTopStations(limit: number = 1000): Promise<RadioStation[]> {\n    const cacheKey = `top:${limit}`;\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await fetch(`${this.baseUrl}/stations/topvote/${limit}`);\n\n      if (!response.ok) throw new Error(\"Failed to fetch top stations\");\n\n      const data = await response.json();\n      const stations = this.mapRadioBrowserStations(data);\n\n      this.setCache(cacheKey, stations);\n      return stations;\n    } catch (error) {\n      console.warn(\"Failed to fetch top stations:\", error);\n      return this.getFallbackStations();\n    }\n  }\n\n  /**\n   * Get stations within a geographic region\n   */\n  async getStationsByRegion(\n    bounds: {\n      north: number;\n      south: number;\n      east: number;\n      west: number;\n    },\n    limit: number = 500\n  ): Promise<RadioStation[]> {\n    const cacheKey = `region:${bounds.north}:${bounds.south}:${bounds.east}:${bounds.west}:${limit}`;\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n\n    try {\n      // Radio Browser doesn't have direct geographic bounds API, so we'll get by popular countries in region\n      const countriesInRegion = this.getCountriesInBounds(bounds);\n      const allStations: RadioStation[] = [];\n\n      for (const country of countriesInRegion) {\n        const countryStations = await this.getStationsByCountry(country, Math.floor(limit / countriesInRegion.length));\n        allStations.push(...countryStations);\n      }\n\n      // Filter stations that are actually within bounds\n      const stationsInBounds = allStations.filter(station => \n        station.location.lat >= bounds.south &&\n        station.location.lat <= bounds.north &&\n        station.location.lng >= bounds.west &&\n        station.location.lng <= bounds.east\n      );\n\n      this.setCache(cacheKey, stationsInBounds);\n      return stationsInBounds;\n    } catch (error) {\n      console.warn(\"Failed to fetch regional stations:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Get progressive stations based on zoom level\n   */\n  async getProgressiveStations(\n    zoomLevel: number,\n    visibleRegion?: {\n      north: number;\n      south: number; \n      east: number;\n      west: number;\n    }\n  ): Promise<RadioStation[]> {\n    // Adjust station count based on zoom level\n    const stationCount = Math.min(2000, Math.max(100, Math.floor(zoomLevel * 300)));\n\n    if (visibleRegion && zoomLevel > 3) {\n      // High zoom - get regional stations\n      return this.getStationsByRegion(visibleRegion, stationCount);\n    } else {\n      // Low zoom - get global top stations\n      return this.getTopStations(stationCount);\n    }\n  }\n\n  /**\n   * Get stations by tag/genre\n   */\n  async getStationsByTag(\n    tag: string,\n    limit: number = 50,\n  ): Promise<RadioStation[]> {\n    const cacheKey = `tag:${tag}:${limit}`;\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await fetch(\n        `${this.baseUrl}/stations/bytag/${encodeURIComponent(tag)}?limit=${limit}&hidebroken=true&order=clickcount&reverse=true`,\n      );\n\n      if (!response.ok) throw new Error(\"Failed to fetch stations by tag\");\n\n      const data = await response.json();\n      const stations = this.mapRadioBrowserStations(data);\n\n      this.setCache(cacheKey, stations);\n      return stations;\n    } catch (error) {\n      console.warn(\"Failed to fetch stations by tag:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Get stations by city from Radio Browser API\n   */\n  async getStationsByCity(\n    city: string,\n    limit: number = 50,\n  ): Promise<RadioStation[]> {\n    const cacheKey = `city:${city}:${limit}`;\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await fetch(\n        `${this.baseUrl}/stations/bycity/${encodeURIComponent(city)}?limit=${limit}&hidebroken=true&order=clickcount&reverse=true`,\n      );\n\n      if (!response.ok) throw new Error(\"Failed to fetch city stations\");\n\n      const data = await response.json();\n      const stations = this.mapRadioBrowserStations(data);\n\n      this.setCache(cacheKey, stations);\n      return stations;\n    } catch (error) {\n      console.warn(\"Failed to fetch city stations:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Get available countries\n   */\n  async getCountries(): Promise<\n    Array<{ name: string; iso: string; stationcount: number }>\n  > {\n    const cacheKey = \"countries\";\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await fetch(`${this.baseUrl}/countries?hidebroken=true`);\n\n      if (!response.ok) throw new Error(\"Failed to fetch countries\");\n\n      const data = await response.json();\n      this.setCache(cacheKey, data, 60 * 60 * 1000); // Cache for 1 hour\n      return data;\n    } catch (error) {\n      console.warn(\"Failed to fetch countries:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Get available tags/genres\n   */\n  async getTags(): Promise<Array<{ name: string; stationcount: number }>> {\n    const cacheKey = \"tags\";\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await fetch(\n        `${this.baseUrl}/tags?hidebroken=true&order=stationcount&reverse=true`,\n      );\n\n      if (!response.ok) throw new Error(\"Failed to fetch tags\");\n\n      const data = await response.json();\n      this.setCache(cacheKey, data, 60 * 60 * 1000); // Cache for 1 hour\n      return data;\n    } catch (error) {\n      console.warn(\"Failed to fetch tags:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Map Radio Browser API response to our RadioStation format\n   */\n  private mapRadioBrowserStations(data: any[]): RadioStation[] {\n    return data\n      .filter((station) => station.url && station.name)\n      .map((station, index) => {\n        let lat = parseFloat(station.geo_lat) || 0;\n        let lng = parseFloat(station.geo_long) || 0;\n\n        // If no coordinates, assign default location based on country\n        if (lat === 0 && lng === 0) {\n          const defaultCoords = this.getDefaultCountryCoordinates(\n            station.country,\n          );\n          lat = defaultCoords.lat + (Math.random() - 0.5) * 2; // Add small random offset\n          lng = defaultCoords.lng + (Math.random() - 0.5) * 2;\n        }\n\n        return {\n          id: station.stationuuid || `station-${index}`,\n          name: station.name || \"Unknown Station\",\n          url: station.url,\n          location: {\n            city: station.state || \"Unknown\",\n            country: station.country || \"Unknown\",\n            lat,\n            lng,\n          },\n          genre: station.tags || station.genre || \"Various\",\n          language: station.language || \"Unknown\",\n          listeners: station.clickcount || 0,\n          bitrate: station.bitrate || 128,\n          description: station.homepage || \"\",\n          isPublic: true,\n          source: \"radio-browser\" as const,\n        };\n      })\n      .filter(\n        (station) => station.location.lat !== 0 || station.location.lng !== 0,\n      ); // Filter out stations without coordinates\n  }\n\n  /**\n   * Cache management\n   */\n  private getFromCache(key: string): any {\n    const cached = this.cache.get(key);\n    if (cached && Date.now() - cached.timestamp < this.cacheExpiry) {\n      return cached.data;\n    }\n    return null;\n  }\n\n  private setCache(key: string, data: any, customExpiry?: number): void {\n    this.cache.set(key, {\n      data,\n      timestamp: Date.now(),\n      expiry: customExpiry || this.cacheExpiry,\n    });\n  }\n\n  /**\n   * Get default coordinates for a country\n   */\n  private getDefaultCountryCoordinates(country: string): {\n    lat: number;\n    lng: number;\n  } {\n    const countryDefaults: { [key: string]: { lat: number; lng: number } } = {\n      Germany: { lat: 51.1657, lng: 10.4515 },\n      \"United States\": { lat: 39.8283, lng: -98.5795 },\n      USA: { lat: 39.8283, lng: -98.5795 },\n      \"United Kingdom\": { lat: 55.3781, lng: -3.436 },\n      UK: { lat: 55.3781, lng: -3.436 },\n      France: { lat: 46.2276, lng: 2.2137 },\n      Italy: { lat: 41.8719, lng: 12.5674 },\n      Spain: { lat: 40.4637, lng: -3.7492 },\n      Canada: { lat: 56.1304, lng: -106.3468 },\n      Australia: { lat: -25.2744, lng: 133.7751 },\n      Japan: { lat: 36.2048, lng: 138.2529 },\n      Brazil: { lat: -14.235, lng: -51.9253 },\n      Netherlands: { lat: 52.1326, lng: 5.2913 },\n      Austria: { lat: 47.5162, lng: 14.5501 },\n      Switzerland: { lat: 46.8182, lng: 8.2275 },\n    };\n\n    return countryDefaults[country] || { lat: 0, lng: 0 };\n  }\n\n  /**\n   * Calculate distance between two coordinates\n   */\n  private calculateDistance(\n    lat1: number,\n    lon1: number,\n    lat2: number,\n    lon2: number,\n  ): number {\n    const R = 6371; // Earth's radius in kilometers\n    const dLat = ((lat2 - lat1) * Math.PI) / 180;\n    const dLon = ((lon2 - lon1) * Math.PI) / 180;\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos((lat1 * Math.PI) / 180) *\n        Math.cos((lat2 * Math.PI) / 180) *\n        Math.sin(dLon / 2) *\n        Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n\n  /**\n   * Get countries that intersect with geographic bounds\n   */\n  private getCountriesInBounds(bounds: {\n    north: number;\n    south: number;\n    east: number;\n    west: number;\n  }): string[] {\n    // Simplified region to country mapping\n    const allCountries = [\n      \"United States\", \"Canada\", \"Mexico\", \"Brazil\", \"Argentina\", \"Chile\",\n      \"United Kingdom\", \"France\", \"Germany\", \"Italy\", \"Spain\", \"Netherlands\",\n      \"Russia\", \"China\", \"Japan\", \"South Korea\", \"India\", \"Australia\",\n      \"South Africa\", \"Egypt\", \"Nigeria\", \"Kenya\"\n    ];\n\n    // For now, return all major countries. In a real implementation,\n    // you'd have a proper geographic database\n    return allCountries.slice(0, 8); // Limit to avoid too many requests\n  }\n\n  /**\n   * Get fallback stations when API fails\n   */\n  private getFallbackStations(): RadioStation[] {\n    // Return a small set of popular global stations as fallback\n    return [\n      {\n        id: \"fallback-bbc1\",\n        name: \"BBC Radio 1\",\n        url: \"http://stream.live.vc.bbcmedia.co.uk/bbc_radio_one\",\n        location: { city: \"London\", country: \"United Kingdom\", lat: 51.5074, lng: -0.1278 },\n        genre: \"Pop\",\n        language: \"English\",\n        listeners: 1000000,\n        source: \"curated\" as const\n      },\n      {\n        id: \"fallback-npr\",\n        name: \"NPR News\",\n        url: \"https://npr-ice.streamguys1.com/live.mp3\",\n        location: { city: \"Washington DC\", country: \"United States\", lat: 38.9072, lng: -77.0369 },\n        genre: \"News\",\n        language: \"English\", \n        listeners: 500000,\n        source: \"curated\" as const\n      }\n    ];\n  }\n}\n\n// Singleton instance\nexport const radioDiscoveryService = new RadioDiscoveryService();\n"],"names":["RadioDiscoveryService","baseUrl","cache","Map","cacheExpiry","searchOnlineStations","query","limit","cacheKey","cached","getFromCache","response","fetch","method","headers","body","JSON","stringify","name","hidebroken","order","reverse","ok","Error","data","json","stations","mapRadioBrowserStations","setCache","error","console","warn","getStationsByCountry","countryCode","getTopStations","getFallbackStations","getStationsByRegion","bounds","north","south","east","west","countriesInRegion","getCountriesInBounds","allStations","country","countryStations","Math","floor","length","push","stationsInBounds","filter","station","location","lat","lng","getProgressiveStations","zoomLevel","visibleRegion","stationCount","min","max","getStationsByTag","tag","encodeURIComponent","getStationsByCity","city","getCountries","getTags","url","map","index","parseFloat","geo_lat","geo_long","defaultCoords","getDefaultCountryCoordinates","random","id","stationuuid","state","genre","tags","language","listeners","clickcount","bitrate","description","homepage","isPublic","source","key","get","Date","now","timestamp","customExpiry","set","expiry","countryDefaults","Germany","USA","UK","France","Italy","Spain","Canada","Australia","Japan","Brazil","Netherlands","Austria","Switzerland","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","PI","dLon","a","sin","cos","c","atan2","sqrt","allCountries","slice","radioDiscoveryService"],"mappings":"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"}},
    {"offset": {"line": 1965, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/repositories/StationRepository.ts"],"sourcesContent":["import { IStationRepository } from \"../domain/interfaces\";\nimport { RadioStation } from \"../types\";\nimport { radioDiscoveryService } from \"../services/radioDiscoveryService\";\n\n/**\n * Concrete implementation of station repository using radioDiscoveryService\n * Follows Repository pattern to abstract data access\n */\nexport class StationRepository implements IStationRepository {\n  private cache = new Map<string, RadioStation[]>();\n  private readonly cacheTimeout = 5 * 60 * 1000; // 5 minutes\n  private cacheTimestamps = new Map<string, number>();\n\n  async getStationsByRegion(region: string): Promise<RadioStation[]> {\n    const cacheKey = `region:${region}`;\n    \n    if (this.isValidCache(cacheKey)) {\n      return this.cache.get(cacheKey) || [];\n    }\n\n    try {\n      // For simplicity, we'll just get stations by popular countries\n      // In a real app, you'd map region names to geographic bounds\n      const stations = await radioDiscoveryService.getTopStations(200);\n      this.updateCache(cacheKey, stations);\n      return stations;\n    } catch (error) {\n      console.error(`Failed to fetch stations for region ${region}:`, error);\n      return this.cache.get(cacheKey) || [];\n    }\n  }\n\n  async getStationsByCountry(country: string): Promise<RadioStation[]> {\n    const cacheKey = `country:${country}`;\n    \n    if (this.isValidCache(cacheKey)) {\n      return this.cache.get(cacheKey) || [];\n    }\n\n    try {\n      const stations = await radioDiscoveryService.getStationsByCountry(country);\n      this.updateCache(cacheKey, stations);\n      return stations;\n    } catch (error) {\n      console.error(`Failed to fetch stations for country ${country}:`, error);\n      return this.cache.get(cacheKey) || [];\n    }\n  }\n\n  async getStationsByGenre(genre: string): Promise<RadioStation[]> {\n    const cacheKey = `genre:${genre}`;\n    \n    if (this.isValidCache(cacheKey)) {\n      return this.cache.get(cacheKey) || [];\n    }\n\n    try {\n      const stations = await radioDiscoveryService.getStationsByTag(genre);\n      this.updateCache(cacheKey, stations);\n      return stations;\n    } catch (error) {\n      console.error(`Failed to fetch stations for genre ${genre}:`, error);\n      return this.cache.get(cacheKey) || [];\n    }\n  }\n\n  async searchStations(query: string): Promise<RadioStation[]> {\n    const cacheKey = `search:${query.toLowerCase()}`;\n    \n    if (this.isValidCache(cacheKey)) {\n      return this.cache.get(cacheKey) || [];\n    }\n\n    try {\n      const stations = await radioDiscoveryService.searchOnlineStations(query);\n      this.updateCache(cacheKey, stations);\n      return stations;\n    } catch (error) {\n      console.error(`Failed to search stations for query ${query}:`, error);\n      return this.cache.get(cacheKey) || [];\n    }\n  }\n\n  async getProgressiveStations(limit: number, offset: number): Promise<RadioStation[]> {\n    const cacheKey = `progressive:${limit}:${offset}`;\n    \n    if (this.isValidCache(cacheKey)) {\n      return this.cache.get(cacheKey) || [];\n    }\n\n    try {\n      // Use zoomLevel calculation based on limit for progressive loading\n      const zoomLevel = Math.max(1, Math.floor(limit / 100));\n      const stations = await radioDiscoveryService.getProgressiveStations(zoomLevel);\n      \n      // Apply offset and limit manually since the service doesn't support it directly\n      const paginatedStations = stations.slice(offset, offset + limit);\n      \n      this.updateCache(cacheKey, paginatedStations);\n      return paginatedStations;\n    } catch (error) {\n      console.error(`Failed to fetch progressive stations:`, error);\n      return this.cache.get(cacheKey) || [];\n    }\n  }\n\n  async getPopularStations(limit: number = 50): Promise<RadioStation[]> {\n    const cacheKey = `popular:${limit}`;\n    \n    if (this.isValidCache(cacheKey)) {\n      return this.cache.get(cacheKey) || [];\n    }\n\n    try {\n      const stations = await radioDiscoveryService.getTopStations(limit);\n      this.updateCache(cacheKey, stations);\n      return stations;\n    } catch (error) {\n      console.error(`Failed to fetch popular stations:`, error);\n      return this.cache.get(cacheKey) || [];\n    }\n  }\n\n  /**\n   * Clear cache for specific key or all cache\n   */\n  clearCache(key?: string): void {\n    if (key) {\n      this.cache.delete(key);\n      this.cacheTimestamps.delete(key);\n    } else {\n      this.cache.clear();\n      this.cacheTimestamps.clear();\n    }\n  }\n\n  /**\n   * Get cache statistics for monitoring\n   */\n  getCacheStats(): { size: number; keys: string[] } {\n    return {\n      size: this.cache.size,\n      keys: Array.from(this.cache.keys())\n    };\n  }\n\n  private isValidCache(key: string): boolean {\n    const timestamp = this.cacheTimestamps.get(key);\n    if (!timestamp) return false;\n    \n    const now = Date.now();\n    return (now - timestamp) < this.cacheTimeout;\n  }\n\n  private updateCache(key: string, data: RadioStation[]): void {\n    this.cache.set(key, data);\n    this.cacheTimestamps.set(key, Date.now());\n  }\n}\n\n// Export singleton instance\nexport const stationRepository = new StationRepository();"],"names":["StationRepository","cache","Map","cacheTimeout","cacheTimestamps","getStationsByRegion","region","cacheKey","isValidCache","get","stations","getTopStations","updateCache","error","console","getStationsByCountry","country","getStationsByGenre","genre","getStationsByTag","searchStations","query","toLowerCase","searchOnlineStations","getProgressiveStations","limit","offset","zoomLevel","Math","max","floor","paginatedStations","slice","getPopularStations","clearCache","key","delete","clear","getCacheStats","size","keys","Array","from","timestamp","now","Date","data","set","stationRepository"],"mappings":"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"}},
    {"offset": {"line": 2102, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/infrastructure/ServiceContainer.ts"],"sourcesContent":["import { IStationLoadingUseCase, IStationSelectionUseCase } from \"../domain/usecases\";\nimport { StationLoadingUseCase, StationSelectionUseCase } from \"../usecases/StationUseCases\";\nimport { MarkerFactory } from \"../strategies/MarkerStrategy\";\nimport { StationRepository } from \"../repositories/StationRepository\";\nimport { GlobeEventBus } from \"../events/GlobeEventBus\";\nimport { CommandInvoker } from \"../commands/GlobeCommands\";\n\n/**\n * Dependency Injection Container\n * Manages service instances and their dependencies using Singleton pattern\n * Implements Inversion of Control (IoC) principle\n */\nclass ServiceContainer {\n  private static instance: ServiceContainer;\n  private services = new Map<string, any>();\n  private singletons = new Map<string, any>();\n\n  private constructor() {\n    this.registerServices();\n  }\n\n  static getInstance(): ServiceContainer {\n    if (!ServiceContainer.instance) {\n      ServiceContainer.instance = new ServiceContainer();\n    }\n    return ServiceContainer.instance;\n  }\n\n  private registerServices(): void {\n    // Register Repositories (Singleton)\n    this.registerSingleton(\"StationRepository\", () => new StationRepository());\n    \n    // Register Event Bus (Singleton)\n    this.registerSingleton(\"GlobeEventBus\", () => new GlobeEventBus());\n    \n    // Register Command Invoker (Singleton)\n    this.registerSingleton(\"CommandInvoker\", () => new CommandInvoker());\n    \n    // Register Use Cases (Factory - new instance each time)\n    this.register(\"StationLoadingUseCase\", () => \n      new StationLoadingUseCase(\n        this.resolveSingleton(\"StationRepository\"),\n        this.resolveSingleton(\"GlobeEventBus\")\n      )\n    );\n    \n    this.register(\"StationSelectionUseCase\", () => \n      new StationSelectionUseCase(\n        this.resolveSingleton(\"GlobeEventBus\"),\n        this.resolveSingleton(\"CommandInvoker\")\n      )\n    );\n    \n    // Register Factories (Factory - new instance each time)\n    this.register(\"MarkerFactory\", () => new MarkerFactory());\n  }\n\n  /**\n   * Register a factory function for transient services (new instance each time)\n   */\n  register<T>(key: string, factory: () => T): void {\n    this.services.set(key, factory);\n  }\n\n  /**\n   * Register a factory function for singleton services (same instance always)\n   */\n  registerSingleton<T>(key: string, factory: () => T): void {\n    this.services.set(key, factory);\n  }\n\n  /**\n   * Resolve a transient service (new instance each time)\n   */\n  resolve<T>(key: string): T {\n    const factory = this.services.get(key);\n    if (!factory) {\n      throw new Error(`Service ${key} not registered`);\n    }\n    return factory();\n  }\n\n  /**\n   * Resolve a singleton service (cached instance)\n   */\n  resolveSingleton<T>(key: string): T {\n    // Check if already instantiated\n    if (this.singletons.has(key)) {\n      return this.singletons.get(key);\n    }\n\n    // Create and cache instance\n    const factory = this.services.get(key);\n    if (!factory) {\n      throw new Error(`Service ${key} not registered`);\n    }\n    \n    const instance = factory();\n    this.singletons.set(key, instance);\n    return instance;\n  }\n\n  /**\n   * Clear all singleton instances (useful for testing)\n   */\n  clearSingletons(): void {\n    this.singletons.clear();\n  }\n\n  /**\n   * Get service registry information\n   */\n  getServiceInfo(): { \n    registeredServices: string[]; \n    activeSingletons: string[];\n    totalServices: number;\n  } {\n    return {\n      registeredServices: Array.from(this.services.keys()),\n      activeSingletons: Array.from(this.singletons.keys()),\n      totalServices: this.services.size\n    };\n  }\n\n  // Legacy methods for backward compatibility\n  get<T>(key: string): T {\n    if (this.services.has(key)) {\n      return this.resolve(key);\n    }\n    throw new Error(`Service ${key} not found`);\n  }\n\n  // Convenience methods for common services\n  getStationLoadingUseCase(): IStationLoadingUseCase {\n    return this.resolve(\"StationLoadingUseCase\");\n  }\n\n  getStationSelectionUseCase(): IStationSelectionUseCase {\n    return this.resolve(\"StationSelectionUseCase\");\n  }\n\n  getMarkerFactory(): MarkerFactory {\n    return this.resolve(\"MarkerFactory\");\n  }\n\n  getStationRepository(): StationRepository {\n    return this.resolveSingleton(\"StationRepository\");\n  }\n\n  getGlobeEventBus(): GlobeEventBus {\n    return this.resolveSingleton(\"GlobeEventBus\");\n  }\n\n  getCommandInvoker(): CommandInvoker {\n    return this.resolveSingleton(\"CommandInvoker\");\n  }\n}\n\n// Export factory functions for clean dependency injection\nexport const createStationLoadingUseCase = (): IStationLoadingUseCase => \n  ServiceContainer.getInstance().getStationLoadingUseCase();\n\nexport const createStationSelectionUseCase = (): IStationSelectionUseCase =>\n  ServiceContainer.getInstance().getStationSelectionUseCase();\n\nexport const createMarkerFactory = (): MarkerFactory =>\n  ServiceContainer.getInstance().getMarkerFactory();\n\nexport const createStationRepository = (): StationRepository =>\n  ServiceContainer.getInstance().getStationRepository();\n\nexport const createGlobeEventBus = (): GlobeEventBus =>\n  ServiceContainer.getInstance().getGlobeEventBus();\n\nexport const createCommandInvoker = (): CommandInvoker =>\n  ServiceContainer.getInstance().getCommandInvoker();"],"names":["ServiceContainer","instance","services","Map","singletons","registerServices","getInstance","registerSingleton","register","resolveSingleton","key","factory","set","resolve","get","Error","has","clearSingletons","clear","getServiceInfo","registeredServices","Array","from","keys","activeSingletons","totalServices","size","getStationLoadingUseCase","getStationSelectionUseCase","getMarkerFactory","getStationRepository","getGlobeEventBus","getCommandInvoker","createStationLoadingUseCase","createStationSelectionUseCase","createMarkerFactory","createStationRepository","createGlobeEventBus","createCommandInvoker"],"mappings":"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"}},
    {"offset": {"line": 2242, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/ClusteredStationMarkers.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef, useMemo, useState, useEffect } from \"react\";\nimport { useFrame, useThree } from \"@react-three/fiber\";\nimport { Text } from \"@react-three/drei\";\nimport * as THREE from \"three\";\nimport { MarkerData } from \"../strategies/MarkerStrategy\";\nimport { createStationLoadingUseCase, createStationSelectionUseCase, createMarkerFactory } from \"../infrastructure/ServiceContainer\";\n\nexport function ClusteredStationMarkers() {\n  const markersRef = useRef<THREE.Group>(null);\n  const { camera } = useThree();\n  \n  // Use cases (clean architecture)\n  const stationLoadingUseCase = createStationLoadingUseCase();\n  const stationSelectionUseCase = createStationSelectionUseCase();\n  const markerFactory = createMarkerFactory();\n\n  // Local state\n  const [markers, setMarkers] = useState<MarkerData[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [hoveredMarkerId, setHoveredMarkerId] = useState<string | null>(null);\n\n  // Calculate camera distance and zoom level\n  const { cameraDistance, zoomLevel } = useMemo(() => {\n    const distance = camera.position.length();\n    const zoom = Math.max(1, 8 - distance);\n    return { cameraDistance: distance, zoomLevel: zoom };\n  }, [camera.position]);\n\n  // Load markers based on zoom level\n  useEffect(() => {\n    const loadMarkers = async () => {\n      setIsLoading(true);\n      try {\n        const newMarkers = await stationLoadingUseCase.loadStationsForView(zoomLevel);\n        setMarkers(newMarkers);\n      } catch (error) {\n        console.error('Failed to load markers:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadMarkers();\n  }, [zoomLevel, stationLoadingUseCase]);\n\n  // Handle marker interactions\n  const handleMarkerClick = (markerData: MarkerData, event: any) => {\n    event.stopPropagation();\n    \n    const { strategy } = markerFactory.createMarker(markerData, cameraDistance);\n    strategy.handleInteraction(markerData, 'click');\n  };\n\n  const handleMarkerHover = (markerId: string | null) => {\n    setHoveredMarkerId(markerId);\n  };\n\n  // Update marker facing direction\n  useFrame(() => {\n    if (!markersRef.current) return;\n\n    markersRef.current.children.forEach((marker) => {\n      if (marker.children.length > 0) {\n        marker.children.forEach(child => {\n          if (child.type === 'Mesh') {\n            child.lookAt(camera.position);\n          }\n        });\n      }\n    });\n  });\n\n  // Filter and style markers\n  const visibleMarkers = useMemo(() => {\n    return markers\n      .filter(marker => markerFactory.shouldShowMarker(marker, zoomLevel))\n      .map(marker => ({\n        data: marker,\n        ...markerFactory.createMarker(marker, cameraDistance)\n      }));\n  }, [markers, zoomLevel, cameraDistance, markerFactory]);\n\n  return (\n    <group ref={markersRef}>\n      {visibleMarkers.map(({ data, style, strategy }) => {\n        const isHovered = hoveredMarkerId === data.id;\n        const stationCount = data.stations.length;\n        \n        return (\n          <group\n            key={data.id}\n            position={data.position}\n            onClick={(e) => handleMarkerClick(data, e)}\n            onPointerOver={(e) => {\n              e.stopPropagation();\n              handleMarkerHover(data.id);\n              document.body.style.cursor = \"pointer\";\n            }}\n            onPointerOut={() => {\n              handleMarkerHover(null);\n              document.body.style.cursor = \"auto\";\n            }}\n          >\n            {/* Main marker */}\n            <mesh>\n              <circleGeometry args={[style.size, 32]} />\n              <meshBasicMaterial\n                color={style.color}\n                transparent\n                opacity={style.opacity}\n              />\n            </mesh>\n\n            {/* Inner core */}\n            <mesh>\n              <circleGeometry args={[style.size * 0.6, 16]} />\n              <meshBasicMaterial\n                color=\"#ffffff\"\n                transparent\n                opacity={0.8}\n              />\n            </mesh>\n\n            {/* Station count for clusters */}\n            {stationCount > 1 && (\n              <>\n                <mesh position={[0, 0, 0.001]}>\n                  <circleGeometry args={[style.size * 0.35, 16]} />\n                  <meshBasicMaterial\n                    color={style.color}\n                    transparent\n                    opacity={1}\n                  />\n                </mesh>\n\n                <Text\n                  position={[0, 0, 0.002]}\n                  fontSize={style.size * 0.4}\n                  color=\"white\"\n                  anchorX=\"center\"\n                  anchorY=\"middle\"\n                >\n                  {stationCount}\n                </Text>\n              </>\n            )}\n\n            {/* Glow effect */}\n            {style.glowEffect && (\n              <mesh>\n                <ringGeometry args={[style.size * 1.2, style.size * 1.5, 32]} />\n                <meshBasicMaterial\n                  color={style.color}\n                  transparent\n                  opacity={0.3}\n                  side={THREE.DoubleSide}\n                />\n              </mesh>\n            )}\n\n            {/* Hover ring */}\n            {isHovered && (\n              <mesh>\n                <ringGeometry args={[style.size * 1.1, style.size * 1.3, 32]} />\n                <meshBasicMaterial\n                  color={style.color}\n                  transparent\n                  opacity={0.5}\n                  side={THREE.DoubleSide}\n                />\n              </mesh>\n            )}\n\n            {/* Labels */}\n            {style.hasLabel && style.labelText && (\n              <Text\n                position={[0, -style.size * 1.8, 0]}\n                fontSize={style.size * 0.3}\n                color=\"rgba(255, 255, 255, 0.9)\"\n                anchorX=\"center\"\n                anchorY=\"middle\"\n                maxWidth={2}\n                textAlign=\"center\"\n              >\n                {style.labelText}\n              </Text>\n            )}\n          </group>\n        );\n      })}\n\n      {/* Loading indicator */}\n      {isLoading && (\n        <mesh position={[0, 3, 0]}>\n          <sphereGeometry args={[0.05, 16, 16]} />\n          <meshBasicMaterial color=\"#00d4ff\" />\n        </mesh>\n      )}\n    </group>\n  );\n}"],"names":["ClusteredStationMarkers","markersRef","camera","stationLoadingUseCase","stationSelectionUseCase","markerFactory","markers","setMarkers","isLoading","setIsLoading","hoveredMarkerId","setHoveredMarkerId","cameraDistance","zoomLevel","distance","position","length","zoom","Math","max","loadMarkers","newMarkers","loadStationsForView","error","console","handleMarkerClick","markerData","event","stopPropagation","strategy","createMarker","handleInteraction","handleMarkerHover","markerId","current","children","forEach","marker","child","type","lookAt","visibleMarkers","filter","shouldShowMarker","map","data","ref","style","isHovered","id","stationCount","stations","onClick","e","onPointerOver","document","body","cursor","onPointerOut","args","size","color","transparent","opacity","fontSize","anchorX","anchorY","glowEffect","side","hasLabel","labelText","maxWidth","textAlign"],"mappings":"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"}},
    {"offset": {"line": 2584, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/utils/coordinates.ts"],"sourcesContent":["/**\n * Coordinate conversion utilities for geographic calculations\n * Compatible with both Cesium and general 3D applications\n */\n\n/**\n * Convert latitude/longitude to 3D Cartesian coordinates\n */\nexport function latLngToPosition(\n  lat: number,\n  lng: number,\n  radius: number = 1,\n): [number, number, number] {\n  const phi = (90 - lat) * (Math.PI / 180);\n  const theta = (lng + 180) * (Math.PI / 180);\n\n  const x = -(radius * Math.sin(phi) * Math.cos(theta));\n  const z = radius * Math.sin(phi) * Math.sin(theta);\n  const y = radius * Math.cos(phi);\n\n  return [x, y, z];\n}\n\n/**\n * Convert 3D Cartesian coordinates to latitude/longitude\n */\nexport function positionToLatLng(\n  x: number,\n  y: number,\n  z: number,\n): { lat: number; lng: number } {\n  const radius = Math.sqrt(x * x + y * y + z * z);\n  const lat = 90 - (Math.acos(y / radius) * 180) / Math.PI;\n  const lng = (Math.atan2(z, -x) * 180) / Math.PI - 180;\n\n  return { lat, lng };\n}\n\n/**\n * Calculate distance between two geographic points using Haversine formula\n */\nexport function calculateDistance(\n  lat1: number,\n  lon1: number,\n  lat2: number,\n  lon2: number,\n): number {\n  const R = 6371; // Earth's radius in kilometers\n  const dLat = ((lat2 - lat1) * Math.PI) / 180;\n  const dLon = ((lon2 - lon1) * Math.PI) / 180;\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos((lat1 * Math.PI) / 180) *\n      Math.cos((lat2 * Math.PI) / 180) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\n\n/**\n * Normalize longitude to [-180, 180] range\n */\nexport function normalizeLongitude(lng: number): number {\n  while (lng > 180) lng -= 360;\n  while (lng < -180) lng += 360;\n  return lng;\n}\n\n/**\n * Normalize latitude to [-90, 90] range\n */\nexport function normalizeLatitude(lat: number): number {\n  return Math.max(-90, Math.min(90, lat));\n}\n"],"names":["latLngToPosition","lat","lng","radius","phi","Math","PI","theta","x","sin","cos","z","y","positionToLatLng","sqrt","acos","atan2","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","dLon","a","c","normalizeLongitude","normalizeLatitude","max","min"],"mappings":"AAAA;;;CAGC,GAED;;CAEC;;;;;;;;;;;;AACM,SAASA,iBACdC,GAAW,EACXC,GAAW,EACXC,SAAiB,CAAC;IAElB,MAAMC,MAAM,CAAC,KAAKH,GAAG,IAAI,CAACI,KAAKC,EAAE,GAAG,GAAG;IACvC,MAAMC,QAAQ,CAACL,MAAM,GAAG,IAAI,CAACG,KAAKC,EAAE,GAAG,GAAG;IAE1C,MAAME,IAAI,CAAC,CAACL,SAASE,KAAKI,GAAG,CAACL,OAAOC,KAAKK,GAAG,CAACH,MAAM;IACpD,MAAMI,IAAIR,SAASE,KAAKI,GAAG,CAACL,OAAOC,KAAKI,GAAG,CAACF;IAC5C,MAAMK,IAAIT,SAASE,KAAKK,GAAG,CAACN;IAE5B,OAAO;QAACI;QAAGI;QAAGD;KAAE;AAClB;AAKO,SAASE,iBACdL,CAAS,EACTI,CAAS,EACTD,CAAS;IAET,MAAMR,SAASE,KAAKS,IAAI,CAACN,IAAIA,IAAII,IAAIA,IAAID,IAAIA;IAC7C,MAAMV,MAAM,KAAK,AAACI,KAAKU,IAAI,CAACH,IAAIT,UAAU,MAAOE,KAAKC,EAAE;IACxD,MAAMJ,MAAM,AAACG,KAAKW,KAAK,CAACL,GAAG,CAACH,KAAK,MAAOH,KAAKC,EAAE,GAAG;IAElD,OAAO;QAAEL;QAAKC;IAAI;AACpB;AAKO,SAASe,kBACdC,IAAY,EACZC,IAAY,EACZC,IAAY,EACZC,IAAY;IAEZ,MAAMC,IAAI,MAAM,+BAA+B;IAC/C,MAAMC,OAAO,AAAC,CAACH,OAAOF,IAAI,IAAIb,KAAKC,EAAE,GAAI;IACzC,MAAMkB,OAAO,AAAC,CAACH,OAAOF,IAAI,IAAId,KAAKC,EAAE,GAAI;IACzC,MAAMmB,IACJpB,KAAKI,GAAG,CAACc,OAAO,KAAKlB,KAAKI,GAAG,CAACc,OAAO,KACrClB,KAAKK,GAAG,CAAC,AAACQ,OAAOb,KAAKC,EAAE,GAAI,OAC1BD,KAAKK,GAAG,CAAC,AAACU,OAAOf,KAAKC,EAAE,GAAI,OAC5BD,KAAKI,GAAG,CAACe,OAAO,KAChBnB,KAAKI,GAAG,CAACe,OAAO;IACpB,MAAME,IAAI,IAAIrB,KAAKW,KAAK,CAACX,KAAKS,IAAI,CAACW,IAAIpB,KAAKS,IAAI,CAAC,IAAIW;IACrD,OAAOH,IAAII;AACb;AAKO,SAASC,mBAAmBzB,GAAW;IAC5C,MAAOA,MAAM,IAAKA,OAAO;IACzB,MAAOA,MAAM,CAAC,IAAKA,OAAO;IAC1B,OAAOA;AACT;AAKO,SAAS0B,kBAAkB3B,GAAW;IAC3C,OAAOI,KAAKwB,GAAG,CAAC,CAAC,IAAIxB,KAAKyB,GAAG,CAAC,IAAI7B;AACpC"}},
    {"offset": {"line": 2642, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/stores/globe-store.ts"],"sourcesContent":["import { create } from \"zustand\";\nimport { subscribeWithSelector } from \"zustand/middleware\";\nimport type { GlobeState, RadioStation, StationMarker } from \"../types\";\nimport { latLngToPosition } from \"../utils/coordinates\";\n\n// Cesium-compatible camera position type\nexport interface CesiumCameraPosition {\n  longitude: number;\n  latitude: number;\n  height: number;\n  heading?: number;\n  pitch?: number;\n  roll?: number;\n}\n\ninterface GlobeStore extends GlobeState {\n  // Cesium-specific state\n  cesiumCameraPosition?: CesiumCameraPosition;\n\n  // Actions\n  selectStation: (station: RadioStation | null) => void;\n  hoverStation: (station: RadioStation | null) => void;\n  setCameraPosition: (position: [number, number, number]) => void;\n  setCesiumCameraPosition: (position: CesiumCameraPosition) => void;\n  setAutoRotating: (isAutoRotating: boolean) => void;\n  addMarker: (station: RadioStation) => void;\n  clearMarkers: () => void;\n  removeMarker: (stationId: string) => void;\n  updateMarkerVisibility: (stationId: string, isVisible: boolean) => void;\n  getStationsByRegion: (region: string) => RadioStation[];\n  searchStations: (query: string) => RadioStation[];\n}\n\nexport const useGlobeStore = create<GlobeStore>()(\n  subscribeWithSelector((set, get) => ({\n    // Initial state\n    selectedStation: null,\n    hoveredStation: null,\n    cameraPosition: [0, 0, 2.5],\n    isAutoRotating: true,\n    markers: [],\n\n    // Actions\n    selectStation: (station) => {\n      set((state) => ({\n        selectedStation: station,\n        markers: state.markers.map((marker) => ({\n          ...marker,\n          isSelected: marker.station.id === station?.id,\n        })),\n      }));\n    },\n\n    hoverStation: (station) => {\n      set((state) => ({\n        hoveredStation: station,\n        markers: state.markers.map((marker) => ({\n          ...marker,\n          isHovered: marker.station.id === station?.id,\n        })),\n      }));\n    },\n\n    setCameraPosition: (position) => {\n      set({ cameraPosition: position });\n    },\n\n    setCesiumCameraPosition: (position) => {\n      set({\n        cesiumCameraPosition: position,\n        // Also update legacy camera position for compatibility\n        cameraPosition: [\n          position.longitude,\n          position.latitude,\n          position.height,\n        ],\n      });\n    },\n\n    setAutoRotating: (isAutoRotating) => {\n      set({ isAutoRotating });\n    },\n\n    addMarker: (station) => {\n      const position = latLngToPosition(\n        station.location.lat,\n        station.location.lng,\n      );\n      const marker: StationMarker = {\n        station,\n        position,\n        isVisible: true,\n        isHovered: false,\n        isSelected: false,\n      };\n\n      set((state) => ({\n        markers: [\n          ...state.markers.filter((m) => m.station.id !== station.id),\n          marker,\n        ],\n      }));\n    },\n\n    clearMarkers: () => {\n      set({ markers: [] });\n    },\n\n    removeMarker: (stationId) => {\n      set((state) => ({\n        markers: state.markers.filter((m) => m.station.id !== stationId),\n      }));\n    },\n\n    updateMarkerVisibility: (stationId, isVisible) => {\n      set((state) => ({\n        markers: state.markers.map((marker) =>\n          marker.station.id === stationId ? { ...marker, isVisible } : marker,\n        ),\n      }));\n    },\n\n    getStationsByRegion: (region: string) => {\n      const { markers } = get();\n      return markers\n        .filter(\n          (marker) =>\n            marker.station.location.country\n              .toLowerCase()\n              .includes(region.toLowerCase()) ||\n            marker.station.location.city\n              .toLowerCase()\n              .includes(region.toLowerCase()),\n        )\n        .map((marker) => marker.station);\n    },\n\n    searchStations: (query: string) => {\n      const { markers } = get();\n      const searchTerm = query.toLowerCase();\n      return markers\n        .filter(\n          (marker) =>\n            marker.station.name.toLowerCase().includes(searchTerm) ||\n            marker.station.location.city.toLowerCase().includes(searchTerm) ||\n            marker.station.location.country\n              .toLowerCase()\n              .includes(searchTerm) ||\n            marker.station.genre.toLowerCase().includes(searchTerm) ||\n            marker.station.language.toLowerCase().includes(searchTerm),\n        )\n        .map((marker) => marker.station);\n    },\n  })),\n);\n\n// Subscribe to state changes for analytics or side effects\nuseGlobeStore.subscribe(\n  (state) => state.selectedStation,\n  (selectedStation) => {\n    if (selectedStation) {\n      console.log(\"Station selected:\", selectedStation.name);\n      // Track analytics, update URL, etc.\n    }\n  },\n);\n"],"names":["useGlobeStore","set","get","selectedStation","hoveredStation","cameraPosition","isAutoRotating","markers","selectStation","station","state","map","marker","isSelected","id","hoverStation","isHovered","setCameraPosition","position","setCesiumCameraPosition","cesiumCameraPosition","longitude","latitude","height","setAutoRotating","addMarker","location","lat","lng","isVisible","filter","m","clearMarkers","removeMarker","stationId","updateMarkerVisibility","getStationsByRegion","region","country","toLowerCase","includes","city","searchStations","query","searchTerm","name","genre","language","subscribe","console","log"],"mappings":"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"}},
    {"offset": {"line": 2758, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/GlobeControls.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef, useEffect, useState } from \"react\";\nimport { useThree, useFrame } from \"@react-three/fiber\";\nimport { OrbitControls } from \"@react-three/drei\";\nimport { useGlobeStore } from \"../stores/globe-store\";\n\nexport function GlobeControls() {\n  const controlsRef = useRef<any>();\n  const { camera } = useThree();\n  const { isAutoRotating, setCameraPosition } = useGlobeStore();\n  const [isMobile, setIsMobile] = useState(false);\n\n  // Detect mobile device\n  useEffect(() => {\n    const checkIfMobile = () => {\n      setIsMobile(window.innerWidth < 768 || \"ontouchstart\" in window);\n    };\n\n    checkIfMobile();\n    window.addEventListener(\"resize\", checkIfMobile);\n    return () => window.removeEventListener(\"resize\", checkIfMobile);\n  }, []);\n\n  useFrame(() => {\n    if (controlsRef.current) {\n      // Update camera position in store\n      setCameraPosition([\n        camera.position.x,\n        camera.position.y,\n        camera.position.z,\n      ]);\n    }\n  });\n\n  return (\n    <OrbitControls\n      ref={controlsRef}\n      enablePan={false}\n      enableZoom={true}\n      enableRotate={true}\n      autoRotate={isAutoRotating}\n      autoRotateSpeed={isMobile ? 0.3 : 0.5}\n      minDistance={isMobile ? 2.5 : 1.5}\n      maxDistance={isMobile ? 8 : 5}\n      minPolarAngle={Math.PI / 6}\n      maxPolarAngle={Math.PI - Math.PI / 6}\n      zoomSpeed={isMobile ? 1.2 : 0.8}\n      rotateSpeed={isMobile ? 0.8 : 0.5}\n      enableDamping={true}\n      dampingFactor={isMobile ? 0.1 : 0.05}\n      touches={{\n        ONE: isMobile ? 2 : 2, // ROTATE\n        TWO: isMobile ? 1 : 1, // DOLLY/ZOOM\n      }}\n      mouseButtons={{\n        LEFT: 2, // ROTATE\n        MIDDLE: 1, // DOLLY\n        RIGHT: undefined, // No right-click action\n      }}\n    />\n  );\n}\n"],"names":["GlobeControls","controlsRef","camera","isAutoRotating","setCameraPosition","isMobile","setIsMobile","checkIfMobile","window","innerWidth","addEventListener","removeEventListener","current","position","x","y","z","ref","enablePan","enableZoom","enableRotate","autoRotate","autoRotateSpeed","minDistance","maxDistance","minPolarAngle","Math","PI","maxPolarAngle","zoomSpeed","rotateSpeed","enableDamping","dampingFactor","touches","ONE","TWO","mouseButtons","LEFT","MIDDLE","RIGHT","undefined"],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AALA;;;;;;AAOO,SAASA;IACd,MAAMC,cAAc,IAAA,8NAAM;IAC1B,MAAM,EAAEC,MAAM,EAAE,GAAG,IAAA,2NAAQ;IAC3B,MAAM,EAAEC,cAAc,EAAEC,iBAAiB,EAAE,GAAG,IAAA,+JAAa;IAC3D,MAAM,CAACC,UAAUC,YAAY,GAAG,IAAA,gOAAQ,EAAC;IAEzC,uBAAuB;IACvB,IAAA,iOAAS,EAAC;QACR,MAAMC,gBAAgB;YACpBD,YAAYE,OAAOC,UAAU,GAAG,OAAO,kBAAkBD;QAC3D;QAEAD;QACAC,OAAOE,gBAAgB,CAAC,UAAUH;QAClC,OAAO,IAAMC,OAAOG,mBAAmB,CAAC,UAAUJ;IACpD,GAAG,EAAE;IAEL,IAAA,2NAAQ,EAAC;QACP,IAAIN,YAAYW,OAAO,EAAE;YACvB,kCAAkC;YAClCR,kBAAkB;gBAChBF,OAAOW,QAAQ,CAACC,CAAC;gBACjBZ,OAAOW,QAAQ,CAACE,CAAC;gBACjBb,OAAOW,QAAQ,CAACG,CAAC;aAClB;QACH;IACF;IAEA,qBACE,6PAAC,kLAAa;QACZC,KAAKhB;QACLiB,WAAW;QACXC,YAAY;QACZC,cAAc;QACdC,YAAYlB;QACZmB,iBAAiBjB,WAAW,MAAM;QAClCkB,aAAalB,WAAW,MAAM;QAC9BmB,aAAanB,WAAW,IAAI;QAC5BoB,eAAeC,KAAKC,EAAE,GAAG;QACzBC,eAAeF,KAAKC,EAAE,GAAGD,KAAKC,EAAE,GAAG;QACnCE,WAAWxB,WAAW,MAAM;QAC5ByB,aAAazB,WAAW,MAAM;QAC9B0B,eAAe;QACfC,eAAe3B,WAAW,MAAM;QAChC4B,SAAS;YACPC,KAAK7B,WAAW,IAAI;YACpB8B,KAAK9B,WAAW,IAAI;QACtB;QACA+B,cAAc;YACZC,MAAM;YACNC,QAAQ;YACRC,OAAOC;QACT;;;;;;AAGN"}},
    {"offset": {"line": 2832, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/Globe.tsx"],"sourcesContent":["\"use client\";\n\nimport { Canvas } from \"@react-three/fiber\";\nimport { Suspense } from \"react\";\nimport { Earth } from \"./Earth\";\nimport { ClusteredStationMarkers } from \"./ClusteredStationMarkers\";\nimport { GlobeControls } from \"./GlobeControls\";\nimport { Stars } from \"@react-three/drei\";\n\nexport function Globe() {\n  return (\n    <div className=\"w-full h-screen relative overflow-hidden bg-black\">\n      <Canvas\n        camera={{ position: [0, 0, 4], fov: 60 }}\n        gl={{ antialias: true, alpha: false }}\n        onCreated={({ gl }) => {\n          gl.setClearColor(\"#000000\", 1);\n        }}\n      >\n        <ambientLight intensity={0.4} />\n        <pointLight position={[10, 10, 10]} intensity={1} />\n        \n        <Suspense fallback={null}>\n          <Stars radius={300} depth={60} count={20000} factor={7} />\n          <Earth />\n          <ClusteredStationMarkers />\n          <GlobeControls />\n        </Suspense>\n      </Canvas>\n      \n      <div className=\"absolute top-4 left-4 text-white z-10\">\n        <h1 className=\"text-2xl font-bold mb-2\">Radio Globe</h1>\n        <p className=\"text-sm opacity-75\">Explore radio stations around the world</p>\n      </div>\n    </div>\n  );\n}\n"],"names":["Globe","className","camera","position","fov","gl","antialias","alpha","onCreated","setClearColor","intensity","fallback","radius","depth","count","factor"],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASO,SAASA;IACd,qBACE,6PAAC;QAAIC,WAAU;;0BACb,6PAAC,6MAAM;gBACLC,QAAQ;oBAAEC,UAAU;wBAAC;wBAAG;wBAAG;qBAAE;oBAAEC,KAAK;gBAAG;gBACvCC,IAAI;oBAAEC,WAAW;oBAAMC,OAAO;gBAAM;gBACpCC,WAAW,CAAC,EAAEH,EAAE,EAAE;oBAChBA,GAAGI,aAAa,CAAC,WAAW;gBAC9B;;kCAEA,6PAAC;wBAAaC,WAAW;;;;;;kCACzB,6PAAC;wBAAWP,UAAU;4BAAC;4BAAI;4BAAI;yBAAG;wBAAEO,WAAW;;;;;;kCAE/C,6PAAC,gOAAQ;wBAACC,UAAU;;0CAClB,6PAAC,kKAAK;gCAACC,QAAQ;gCAAKC,OAAO;gCAAIC,OAAO;gCAAOC,QAAQ;;;;;;0CACrD,6PAAC,mJAAK;;;;;0CACN,6PAAC,uLAAuB;;;;;0CACxB,6PAAC,mKAAa;;;;;;;;;;;;;;;;;0BAIlB,6PAAC;gBAAId,WAAU;;kCACb,6PAAC;wBAAGA,WAAU;kCAA0B;;;;;;kCACxC,6PAAC;wBAAEA,WAAU;kCAAqB;;;;;;;;;;;;;;;;;;AAI1C"}},
    {"offset": {"line": 2967, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/services/audioService.ts"],"sourcesContent":["import { RadioStation } from \"../types\";\n\nexport type AudioState = \"idle\" | \"loading\" | \"playing\" | \"paused\" | \"error\";\n\nexport interface AudioPlayerConfig {\n  volume: number;\n  crossOrigin: \"anonymous\" | \"use-credentials\";\n  preload: \"none\" | \"metadata\" | \"auto\";\n  retryAttempts: number;\n  retryDelay: number;\n}\n\nexport interface AudioPlayerEvents {\n  stateChange: (state: AudioState) => void;\n  error: (error: string) => void;\n  loadStart: () => void;\n  canPlay: () => void;\n  volumeChange: (volume: number) => void;\n  timeUpdate: (currentTime: number) => void;\n}\n\nexport class AudioService {\n  private audio: HTMLAudioElement | null = null;\n  private state: AudioState = \"idle\";\n  private config: AudioPlayerConfig;\n  private listeners: Partial<AudioPlayerEvents> = {};\n  private retryCount = 0;\n  private currentStation: RadioStation | null = null;\n  private lastTimeUpdate = 0;\n  private readonly TIME_UPDATE_THROTTLE = 100; // ms\n\n  constructor(config: Partial<AudioPlayerConfig> = {}) {\n    this.config = {\n      volume: 0.7,\n      crossOrigin: \"anonymous\",\n      preload: \"none\",\n      retryAttempts: 3,\n      retryDelay: 2000,\n      ...config,\n    };\n\n    this.initializeAudio();\n  }\n\n  private initializeAudio() {\n    this.audio = new Audio();\n    this.audio.volume = this.config.volume;\n    this.audio.crossOrigin = this.config.crossOrigin;\n    this.audio.preload = this.config.preload;\n\n    // Set up event listeners\n    this.audio.addEventListener(\"loadstart\", this.handleLoadStart.bind(this));\n    this.audio.addEventListener(\"canplay\", this.handleCanPlay.bind(this));\n    this.audio.addEventListener(\"play\", this.handlePlay.bind(this));\n    this.audio.addEventListener(\"pause\", this.handlePause.bind(this));\n    this.audio.addEventListener(\"error\", this.handleError.bind(this));\n    this.audio.addEventListener(\n      \"volumechange\",\n      this.handleVolumeChange.bind(this),\n    );\n    this.audio.addEventListener(\"timeupdate\", this.handleTimeUpdate.bind(this));\n  }\n\n  private handleLoadStart() {\n    this.setState(\"loading\");\n    this.listeners.loadStart?.();\n  }\n\n  private handleCanPlay() {\n    this.setState(\"paused\");\n    this.listeners.canPlay?.();\n  }\n\n  private handlePlay() {\n    this.setState(\"playing\");\n  }\n\n  private handlePause() {\n    this.setState(\"paused\");\n  }\n\n  private handleError() {\n    this.setState(\"error\");\n    const errorMessage = this.getErrorMessage();\n    this.listeners.error?.(errorMessage);\n\n    // Attempt retry if configured\n    if (this.retryCount < this.config.retryAttempts) {\n      this.scheduleRetry();\n    }\n  }\n\n  private handleVolumeChange() {\n    if (this.audio) {\n      this.listeners.volumeChange?.(this.audio.volume);\n    }\n  }\n\n  private handleTimeUpdate() {\n    if (this.audio) {\n      const now = Date.now();\n      if (now - this.lastTimeUpdate >= this.TIME_UPDATE_THROTTLE) {\n        this.lastTimeUpdate = now;\n        this.listeners.timeUpdate?.(this.audio.currentTime);\n      }\n    }\n  }\n\n  private getErrorMessage(): string {\n    if (!this.audio?.error) return \"Unknown audio error\";\n\n    switch (this.audio.error.code) {\n      case MediaError.MEDIA_ERR_ABORTED:\n        return \"Audio loading was aborted\";\n      case MediaError.MEDIA_ERR_NETWORK:\n        return \"Network error occurred while loading audio\";\n      case MediaError.MEDIA_ERR_DECODE:\n        return \"Audio format not supported\";\n      case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:\n        return \"Audio source not supported\";\n      default:\n        return \"Audio playback failed\";\n    }\n  }\n\n  private scheduleRetry() {\n    setTimeout(() => {\n      if (this.audio && this.currentStation) {\n        this.retryCount++;\n        console.log(\n          `Retrying audio load (attempt ${this.retryCount}/${this.config.retryAttempts})`,\n        );\n        this.audio.load();\n      }\n    }, this.config.retryDelay);\n  }\n\n  private setState(state: AudioState) {\n    this.state = state;\n    this.listeners.stateChange?.(state);\n  }\n\n  // Public API\n  public on<T extends keyof AudioPlayerEvents>(\n    event: T,\n    callback: AudioPlayerEvents[T],\n  ) {\n    this.listeners[event] = callback as any;\n  }\n\n  public off<T extends keyof AudioPlayerEvents>(event: T) {\n    delete this.listeners[event];\n  }\n\n  public async loadStation(\n    station: RadioStation,\n    streamUrl?: string,\n  ): Promise<void> {\n    if (!this.audio) return;\n\n    this.currentStation = station;\n    this.retryCount = 0;\n\n    const url = streamUrl || station.url;\n    if (this.audio.src !== url) {\n      this.audio.src = url;\n      this.audio.load();\n    }\n  }\n\n  public async play(): Promise<void> {\n    if (!this.audio) return;\n\n    try {\n      await this.audio.play();\n    } catch (error) {\n      this.setState(\"error\");\n      throw error;\n    }\n  }\n\n  public pause(): void {\n    if (this.audio) {\n      this.audio.pause();\n    }\n  }\n\n  public setVolume(volume: number): void {\n    if (this.audio) {\n      this.audio.volume = Math.max(0, Math.min(1, volume));\n    }\n  }\n\n  public getVolume(): number {\n    return this.audio?.volume || 0;\n  }\n\n  public mute(): void {\n    this.setVolume(0);\n  }\n\n  public unmute(): void {\n    this.setVolume(this.config.volume);\n  }\n\n  public getState(): AudioState {\n    return this.state;\n  }\n\n  public getCurrentStation(): RadioStation | null {\n    return this.currentStation;\n  }\n\n  public getAudioElement(): HTMLAudioElement | null {\n    return this.audio;\n  }\n\n  public destroy(): void {\n    if (this.audio) {\n      this.audio.pause();\n      this.audio.removeAttribute(\"src\");\n      this.audio.load();\n      this.audio = null;\n    }\n    this.listeners = {};\n    this.currentStation = null;\n  }\n}\n"],"names":["AudioService","audio","state","config","listeners","retryCount","currentStation","lastTimeUpdate","TIME_UPDATE_THROTTLE","volume","crossOrigin","preload","retryAttempts","retryDelay","initializeAudio","Audio","addEventListener","handleLoadStart","bind","handleCanPlay","handlePlay","handlePause","handleError","handleVolumeChange","handleTimeUpdate","setState","loadStart","canPlay","errorMessage","getErrorMessage","error","scheduleRetry","volumeChange","now","Date","timeUpdate","currentTime","code","MediaError","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","setTimeout","console","log","load","stateChange","on","event","callback","off","loadStation","station","streamUrl","url","src","play","pause","setVolume","Math","max","min","getVolume","mute","unmute","getState","getCurrentStation","getAudioElement","destroy","removeAttribute"],"mappings":";;;;AAqBO,MAAMA;IACHC,QAAiC,KAAK;IACtCC,QAAoB,OAAO;IAC3BC,OAA0B;IAC1BC,YAAwC,CAAC,EAAE;IAC3CC,aAAa,EAAE;IACfC,iBAAsC,KAAK;IAC3CC,iBAAiB,EAAE;IACVC,uBAAuB,IAAI;IAE5CR,YAAYG,SAAqC,CAAC,CAAC,CAAE;QACnD,IAAI,CAACA,MAAM,GAAG;YACZM,QAAQ;YACRC,aAAa;YACbC,SAAS;YACTC,eAAe;YACfC,YAAY;YACZ,GAAGV,MAAM;QACX;QAEA,IAAI,CAACW,eAAe;IACtB;IAEQA,kBAAkB;QACxB,IAAI,CAACb,KAAK,GAAG,IAAIc;QACjB,IAAI,CAACd,KAAK,CAACQ,MAAM,GAAG,IAAI,CAACN,MAAM,CAACM,MAAM;QACtC,IAAI,CAACR,KAAK,CAACS,WAAW,GAAG,IAAI,CAACP,MAAM,CAACO,WAAW;QAChD,IAAI,CAACT,KAAK,CAACU,OAAO,GAAG,IAAI,CAACR,MAAM,CAACQ,OAAO;QAExC,yBAAyB;QACzB,IAAI,CAACV,KAAK,CAACe,gBAAgB,CAAC,aAAa,IAAI,CAACC,eAAe,CAACC,IAAI,CAAC,IAAI;QACvE,IAAI,CAACjB,KAAK,CAACe,gBAAgB,CAAC,WAAW,IAAI,CAACG,aAAa,CAACD,IAAI,CAAC,IAAI;QACnE,IAAI,CAACjB,KAAK,CAACe,gBAAgB,CAAC,QAAQ,IAAI,CAACI,UAAU,CAACF,IAAI,CAAC,IAAI;QAC7D,IAAI,CAACjB,KAAK,CAACe,gBAAgB,CAAC,SAAS,IAAI,CAACK,WAAW,CAACH,IAAI,CAAC,IAAI;QAC/D,IAAI,CAACjB,KAAK,CAACe,gBAAgB,CAAC,SAAS,IAAI,CAACM,WAAW,CAACJ,IAAI,CAAC,IAAI;QAC/D,IAAI,CAACjB,KAAK,CAACe,gBAAgB,CACzB,gBACA,IAAI,CAACO,kBAAkB,CAACL,IAAI,CAAC,IAAI;QAEnC,IAAI,CAACjB,KAAK,CAACe,gBAAgB,CAAC,cAAc,IAAI,CAACQ,gBAAgB,CAACN,IAAI,CAAC,IAAI;IAC3E;IAEQD,kBAAkB;QACxB,IAAI,CAACQ,QAAQ,CAAC;QACd,IAAI,CAACrB,SAAS,CAACsB,SAAS;IAC1B;IAEQP,gBAAgB;QACtB,IAAI,CAACM,QAAQ,CAAC;QACd,IAAI,CAACrB,SAAS,CAACuB,OAAO;IACxB;IAEQP,aAAa;QACnB,IAAI,CAACK,QAAQ,CAAC;IAChB;IAEQJ,cAAc;QACpB,IAAI,CAACI,QAAQ,CAAC;IAChB;IAEQH,cAAc;QACpB,IAAI,CAACG,QAAQ,CAAC;QACd,MAAMG,eAAe,IAAI,CAACC,eAAe;QACzC,IAAI,CAACzB,SAAS,CAAC0B,KAAK,GAAGF;QAEvB,8BAA8B;QAC9B,IAAI,IAAI,CAACvB,UAAU,GAAG,IAAI,CAACF,MAAM,CAACS,aAAa,EAAE;YAC/C,IAAI,CAACmB,aAAa;QACpB;IACF;IAEQR,qBAAqB;QAC3B,IAAI,IAAI,CAACtB,KAAK,EAAE;YACd,IAAI,CAACG,SAAS,CAAC4B,YAAY,GAAG,IAAI,CAAC/B,KAAK,CAACQ,MAAM;QACjD;IACF;IAEQe,mBAAmB;QACzB,IAAI,IAAI,CAACvB,KAAK,EAAE;YACd,MAAMgC,MAAMC,KAAKD,GAAG;YACpB,IAAIA,MAAM,IAAI,CAAC1B,cAAc,IAAI,IAAI,CAACC,oBAAoB,EAAE;gBAC1D,IAAI,CAACD,cAAc,GAAG0B;gBACtB,IAAI,CAAC7B,SAAS,CAAC+B,UAAU,GAAG,IAAI,CAAClC,KAAK,CAACmC,WAAW;YACpD;QACF;IACF;IAEQP,kBAA0B;QAChC,IAAI,CAAC,IAAI,CAAC5B,KAAK,EAAE6B,OAAO,OAAO;QAE/B,OAAQ,IAAI,CAAC7B,KAAK,CAAC6B,KAAK,CAACO,IAAI;YAC3B,KAAKC,WAAWC,iBAAiB;gBAC/B,OAAO;YACT,KAAKD,WAAWE,iBAAiB;gBAC/B,OAAO;YACT,KAAKF,WAAWG,gBAAgB;gBAC9B,OAAO;YACT,KAAKH,WAAWI,2BAA2B;gBACzC,OAAO;YACT;gBACE,OAAO;QACX;IACF;IAEQX,gBAAgB;QACtBY,WAAW;YACT,IAAI,IAAI,CAAC1C,KAAK,IAAI,IAAI,CAACK,cAAc,EAAE;gBACrC,IAAI,CAACD,UAAU;gBACfuC,QAAQC,GAAG,CACT,CAAC,6BAA6B,EAAE,IAAI,CAACxC,UAAU,CAAC,CAAC,EAAE,IAAI,CAACF,MAAM,CAACS,aAAa,CAAC,CAAC,CAAC;gBAEjF,IAAI,CAACX,KAAK,CAAC6C,IAAI;YACjB;QACF,GAAG,IAAI,CAAC3C,MAAM,CAACU,UAAU;IAC3B;IAEQY,SAASvB,KAAiB,EAAE;QAClC,IAAI,CAACA,KAAK,GAAGA;QACb,IAAI,CAACE,SAAS,CAAC2C,WAAW,GAAG7C;IAC/B;IAEA,aAAa;IACN8C,GACLC,KAAQ,EACRC,QAA8B,EAC9B;QACA,IAAI,CAAC9C,SAAS,CAAC6C,MAAM,GAAGC;IAC1B;IAEOC,IAAuCF,KAAQ,EAAE;QACtD,OAAO,IAAI,CAAC7C,SAAS,CAAC6C,MAAM;IAC9B;IAEA,MAAaG,YACXC,OAAqB,EACrBC,SAAkB,EACH;QACf,IAAI,CAAC,IAAI,CAACrD,KAAK,EAAE;QAEjB,IAAI,CAACK,cAAc,GAAG+C;QACtB,IAAI,CAAChD,UAAU,GAAG;QAElB,MAAMkD,MAAMD,aAAaD,QAAQE,GAAG;QACpC,IAAI,IAAI,CAACtD,KAAK,CAACuD,GAAG,KAAKD,KAAK;YAC1B,IAAI,CAACtD,KAAK,CAACuD,GAAG,GAAGD;YACjB,IAAI,CAACtD,KAAK,CAAC6C,IAAI;QACjB;IACF;IAEA,MAAaW,OAAsB;QACjC,IAAI,CAAC,IAAI,CAACxD,KAAK,EAAE;QAEjB,IAAI;YACF,MAAM,IAAI,CAACA,KAAK,CAACwD,IAAI;QACvB,EAAE,OAAO3B,OAAO;YACd,IAAI,CAACL,QAAQ,CAAC;YACd,MAAMK;QACR;IACF;IAEO4B,QAAc;QACnB,IAAI,IAAI,CAACzD,KAAK,EAAE;YACd,IAAI,CAACA,KAAK,CAACyD,KAAK;QAClB;IACF;IAEOC,UAAUlD,MAAc,EAAQ;QACrC,IAAI,IAAI,CAACR,KAAK,EAAE;YACd,IAAI,CAACA,KAAK,CAACQ,MAAM,GAAGmD,KAAKC,GAAG,CAAC,GAAGD,KAAKE,GAAG,CAAC,GAAGrD;QAC9C;IACF;IAEOsD,YAAoB;QACzB,OAAO,IAAI,CAAC9D,KAAK,EAAEQ,UAAU;IAC/B;IAEOuD,OAAa;QAClB,IAAI,CAACL,SAAS,CAAC;IACjB;IAEOM,SAAe;QACpB,IAAI,CAACN,SAAS,CAAC,IAAI,CAACxD,MAAM,CAACM,MAAM;IACnC;IAEOyD,WAAuB;QAC5B,OAAO,IAAI,CAAChE,KAAK;IACnB;IAEOiE,oBAAyC;QAC9C,OAAO,IAAI,CAAC7D,cAAc;IAC5B;IAEO8D,kBAA2C;QAChD,OAAO,IAAI,CAACnE,KAAK;IACnB;IAEOoE,UAAgB;QACrB,IAAI,IAAI,CAACpE,KAAK,EAAE;YACd,IAAI,CAACA,KAAK,CAACyD,KAAK;YAChB,IAAI,CAACzD,KAAK,CAACqE,eAAe,CAAC;YAC3B,IAAI,CAACrE,KAAK,CAAC6C,IAAI;YACf,IAAI,CAAC7C,KAAK,GAAG;QACf;QACA,IAAI,CAACG,SAAS,GAAG,CAAC;QAClB,IAAI,CAACE,cAAc,GAAG;IACxB;AACF"}},
    {"offset": {"line": 3139, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/services/radioStationService.ts"],"sourcesContent":["// import { globalRadioStations } from '../data/globalRadioStations'\nimport { RadioStation } from \"../types/index\";\nimport { radioDiscoveryService } from \"./radioDiscoveryService\";\n\nexport class RadioStationService {\n  private stations: RadioStation[] = [];\n  private proxyUrl = \"/api/proxy/audio\";\n  private discoveredStations: RadioStation[] = [];\n  private isDiscoveryEnabled = true;\n\n  /**\n   * Get all radio stations (curated + discovered)\n   */\n  getAllStations(): RadioStation[] {\n    return [...this.stations, ...this.discoveredStations];\n  }\n\n  /**\n   * Get curated stations only\n   */\n  getCuratedStations(): RadioStation[] {\n    return this.stations;\n  }\n\n  /**\n   * Enhanced search that includes online discovery\n   */\n  async searchStations(\n    query: string,\n    includeOnline: boolean = true,\n  ): Promise<RadioStation[]> {\n    // Search local curated stations\n    const localResults = this.searchLocalStations(query);\n\n    if (!includeOnline || !this.isDiscoveryEnabled || !query.trim()) {\n      return localResults;\n    }\n\n    try {\n      // Search online stations\n      const onlineResults = await radioDiscoveryService.searchOnlineStations(\n        query,\n        30,\n      );\n\n      // Merge and deduplicate results\n      const allResults = [...localResults];\n      const existingUrls = new Set(localResults.map((s) => s.url));\n\n      for (const station of onlineResults) {\n        if (!existingUrls.has(station.url)) {\n          allResults.push(station);\n          existingUrls.add(station.url);\n        }\n      }\n\n      return allResults.slice(0, 100); // Limit total results\n    } catch (error) {\n      console.warn(\"Failed to search online stations:\", error);\n      return localResults;\n    }\n  }\n\n  /**\n   * Search only local curated stations\n   */\n  private searchLocalStations(query: string): RadioStation[] {\n    const searchTerm = query.toLowerCase();\n\n    return this.stations.filter(\n      (station) =>\n        station.name.toLowerCase().includes(searchTerm) ||\n        station.location.city.toLowerCase().includes(searchTerm) ||\n        station.location.country.toLowerCase().includes(searchTerm) ||\n        station.genre.toLowerCase().includes(searchTerm) ||\n        station.language.toLowerCase().includes(searchTerm) ||\n        (station.description &&\n          station.description.toLowerCase().includes(searchTerm)),\n    );\n  }\n\n  /**\n   * Discover stations by country with online integration\n   */\n  async getStationsByCountry(\n    country: string,\n    includeOnline: boolean = true,\n  ): Promise<RadioStation[]> {\n    const localStations = this.stations.filter(\n      (station) =>\n        station.location.country.toLowerCase() === country.toLowerCase(),\n    );\n\n    if (!includeOnline || !this.isDiscoveryEnabled) {\n      return localStations;\n    }\n\n    try {\n      // Get country code for API call (simplified mapping)\n      const countryCode = this.getCountryCode(country);\n      if (countryCode) {\n        const onlineStations = await radioDiscoveryService.getStationsByCountry(\n          countryCode,\n          50,\n        );\n        return this.mergeStationResults(localStations, onlineStations);\n      }\n    } catch (error) {\n      console.warn(\"Failed to fetch online stations for country:\", error);\n    }\n\n    return localStations;\n  }\n\n  /**\n   * Get popular/top stations with online integration\n   */\n  async getPopularStations(\n    limit: number = 20,\n    includeOnline: boolean = true,\n  ): Promise<RadioStation[]> {\n    const localPopular = [...this.stations]\n      .sort((a, b) => b.listeners - a.listeners)\n      .slice(0, limit);\n\n    if (!includeOnline || !this.isDiscoveryEnabled) {\n      return localPopular;\n    }\n\n    try {\n      const onlineTop = await radioDiscoveryService.getTopStations(limit);\n      return this.mergeStationResults(localPopular, onlineTop).slice(0, limit);\n    } catch (error) {\n      console.warn(\"Failed to fetch online top stations:\", error);\n      return localPopular;\n    }\n  }\n\n  /**\n   * Get stations by genre with online discovery\n   */\n  async getStationsByGenre(\n    genre: string,\n    includeOnline: boolean = true,\n  ): Promise<RadioStation[]> {\n    const localStations = this.stations.filter((station) =>\n      station.genre.toLowerCase().includes(genre.toLowerCase()),\n    );\n\n    if (!includeOnline || !this.isDiscoveryEnabled) {\n      return localStations;\n    }\n\n    try {\n      const onlineStations = await radioDiscoveryService.getStationsByTag(\n        genre,\n        30,\n      );\n      return this.mergeStationResults(localStations, onlineStations);\n    } catch (error) {\n      console.warn(\"Failed to fetch online stations by genre:\", error);\n      return localStations;\n    }\n  }\n\n  /**\n   * Get stations by city with online discovery\n   */\n  async getStationsByCity(\n    city: string,\n    includeOnline: boolean = true,\n  ): Promise<RadioStation[]> {\n    const localStations = this.stations.filter((station) =>\n      station.location.city.toLowerCase().includes(city.toLowerCase()),\n    );\n\n    if (!includeOnline || !this.isDiscoveryEnabled) {\n      return localStations;\n    }\n\n    try {\n      const onlineStations = await radioDiscoveryService.getStationsByCity(\n        city,\n        30,\n      );\n      return this.mergeStationResults(localStations, onlineStations);\n    } catch (error) {\n      console.warn(\"Failed to fetch online stations by city:\", error);\n      return localStations;\n    }\n  }\n\n  /**\n   * Get available countries from both sources\n   */\n  async getAvailableCountries(): Promise<\n    Array<{ name: string; code?: string; count: number }>\n  > {\n    try {\n      const [localCountries, onlineCountries] = await Promise.all([\n        this.getLocalCountries(),\n        radioDiscoveryService.getCountries(),\n      ]);\n\n      // Merge country lists\n      const countryMap = new Map<\n        string,\n        { name: string; code?: string; count: number }\n      >();\n\n      localCountries.forEach((country) => {\n        countryMap.set(country.name.toLowerCase(), country);\n      });\n\n      onlineCountries.forEach((country) => {\n        const key = country.name.toLowerCase();\n        const existing = countryMap.get(key);\n        if (existing) {\n          existing.count += country.stationcount;\n          existing.code = existing.code || country.iso;\n        } else {\n          countryMap.set(key, {\n            name: country.name,\n            code: country.iso,\n            count: country.stationcount,\n          });\n        }\n      });\n\n      return Array.from(countryMap.values()).sort((a, b) => b.count - a.count);\n    } catch (error) {\n      console.warn(\"Failed to get countries:\", error);\n      return this.getLocalCountries();\n    }\n  }\n\n  /**\n   * Get available genres/tags\n   */\n  async getAvailableGenres(): Promise<Array<{ name: string; count: number }>> {\n    try {\n      const [localGenres, onlineTags] = await Promise.all([\n        this.getLocalGenres(),\n        radioDiscoveryService.getTags(),\n      ]);\n\n      // Merge genre lists\n      const genreMap = new Map<string, number>();\n\n      localGenres.forEach((genre) => {\n        genreMap.set(genre.name.toLowerCase(), genre.count);\n      });\n\n      onlineTags.forEach((tag) => {\n        const key = tag.name.toLowerCase();\n        const existing = genreMap.get(key) || 0;\n        genreMap.set(key, existing + tag.stationcount);\n      });\n\n      return Array.from(genreMap.entries())\n        .map(([name, count]) => ({\n          name: name.charAt(0).toUpperCase() + name.slice(1),\n          count,\n        }))\n        .sort((a, b) => b.count - a.count)\n        .slice(0, 50); // Limit to top 50 genres\n    } catch (error) {\n      console.warn(\"Failed to get genres:\", error);\n      return this.getLocalGenres();\n    }\n  }\n\n  /**\n   * Private helper methods\n   */\n  private mergeStationResults(\n    local: RadioStation[],\n    online: RadioStation[],\n  ): RadioStation[] {\n    const merged = [...local];\n    const existingUrls = new Set(local.map((s) => s.url));\n\n    for (const station of online) {\n      if (!existingUrls.has(station.url)) {\n        merged.push(station);\n      }\n    }\n\n    return merged;\n  }\n\n  private getLocalCountries(): Array<{ name: string; count: number }> {\n    const countryCount = new Map<string, number>();\n\n    this.stations.forEach((station) => {\n      const country = station.location.country;\n      countryCount.set(country, (countryCount.get(country) || 0) + 1);\n    });\n\n    return Array.from(countryCount.entries()).map(([name, count]) => ({\n      name,\n      count,\n    }));\n  }\n\n  private getLocalGenres(): Array<{ name: string; count: number }> {\n    const genreCount = new Map<string, number>();\n\n    this.stations.forEach((station) => {\n      const genre = station.genre;\n      genreCount.set(genre, (genreCount.get(genre) || 0) + 1);\n    });\n\n    return Array.from(genreCount.entries()).map(([name, count]) => ({\n      name,\n      count,\n    }));\n  }\n\n  private getCountryCode(countryName: string): string | null {\n    // Simplified country code mapping - in production, use a comprehensive library\n    const countryMap: Record<string, string> = {\n      \"united states\": \"US\",\n      usa: \"US\",\n      canada: \"CA\",\n      \"united kingdom\": \"GB\",\n      uk: \"GB\",\n      germany: \"DE\",\n      france: \"FR\",\n      italy: \"IT\",\n      spain: \"ES\",\n      brazil: \"BR\",\n      japan: \"JP\",\n      australia: \"AU\",\n      netherlands: \"NL\",\n      sweden: \"SE\",\n      norway: \"NO\",\n      denmark: \"DK\",\n      finland: \"FI\",\n    };\n\n    return countryMap[countryName.toLowerCase()] || null;\n  }\n\n  /**\n   * Get stations by continent\n   */\n  getStationsByContinent(continent: string): RadioStation[] {\n    const continentCountries: Record<string, string[]> = {\n      \"north-america\": [\"United States\", \"Canada\", \"Mexico\"],\n      \"south-america\": [\"Brazil\", \"Argentina\", \"Chile\", \"Colombia\", \"Peru\"],\n      europe: [\n        \"United Kingdom\",\n        \"France\",\n        \"Germany\",\n        \"Italy\",\n        \"Spain\",\n        \"Netherlands\",\n        \"Switzerland\",\n      ],\n      asia: [\"Japan\", \"South Korea\", \"China\", \"India\", \"Singapore\", \"Thailand\"],\n      africa: [\"South Africa\", \"Nigeria\", \"Kenya\", \"Egypt\"],\n      oceania: [\"Australia\", \"New Zealand\"],\n    };\n\n    const countries = continentCountries[continent.toLowerCase()] || [];\n    return this.stations.filter((station) =>\n      countries.includes(station.location.country),\n    );\n  }\n\n  /**\n   * Get unique countries\n   */\n  getCountries(): string[] {\n    const countries = Array.from(\n      new Set(this.stations.map((station) => station.location.country)),\n    );\n    return countries.sort();\n  }\n\n  /**\n   * Get unique cities for a country\n   */\n  getCitiesInCountry(country: string): string[] {\n    const cities = this.stations\n      .filter((station) => station.location.country === country)\n      .map((station) => station.location.city);\n\n    return Array.from(new Set(cities)).sort();\n  }\n\n  /**\n   * Get unique genres\n   */\n  getGenres(): string[] {\n    const genres = Array.from(\n      new Set(this.stations.map((station) => station.genre)),\n    );\n    return genres.sort();\n  }\n\n  /**\n   * Get unique languages\n   */\n  getLanguages(): string[] {\n    const languages = Array.from(\n      new Set(this.stations.map((station) => station.language)),\n    );\n    return languages.sort();\n  }\n\n  /**\n   * Get proxied stream URL to avoid CORS issues\n   */\n  getProxiedStreamUrl(station: RadioStation): string {\n    // For known CORS-free streams, return direct URL\n    const corsFreeHosts = [\n      \"ice1.somafm.com\",\n      \"stream.srg-ssr.ch\",\n      \"streams.kqed.org\",\n    ];\n\n    try {\n      const url = new URL(station.url);\n      if (corsFreeHosts.some((host) => url.hostname.includes(host))) {\n        return station.url;\n      }\n    } catch {\n      // Invalid URL, use proxy\n    }\n\n    // Use proxy for potentially CORS-blocked streams\n    return `${this.proxyUrl}?url=${encodeURIComponent(station.url)}`;\n  }\n\n  /**\n   * Get station by ID\n   */\n  getStationById(id: string): RadioStation | undefined {\n    return this.stations.find((station) => station.id === id);\n  }\n\n  /**\n   * Get random stations\n   */\n  getRandomStations(count: number = 5): RadioStation[] {\n    const shuffled = [...this.stations].sort(() => 0.5 - Math.random());\n    return shuffled.slice(0, count);\n  }\n\n  /**\n   * Calculate distance between two points (Haversine formula)\n   */\n  private calculateDistance(\n    lat1: number,\n    lng1: number,\n    lat2: number,\n    lng2: number,\n  ): number {\n    const R = 6371; // Earth's radius in km\n    const dLat = this.toRad(lat2 - lat1);\n    const dLng = this.toRad(lng2 - lng1);\n\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(this.toRad(lat1)) *\n        Math.cos(this.toRad(lat2)) *\n        Math.sin(dLng / 2) *\n        Math.sin(dLng / 2);\n\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n\n  private toRad(degrees: number): number {\n    return degrees * (Math.PI / 180);\n  }\n}\n\n// Export singleton instance\nexport const radioStationService = new RadioStationService();\n"],"names":["RadioStationService","stations","proxyUrl","discoveredStations","isDiscoveryEnabled","getAllStations","getCuratedStations","searchStations","query","includeOnline","localResults","searchLocalStations","trim","onlineResults","searchOnlineStations","allResults","existingUrls","Set","map","s","url","station","has","push","add","slice","error","console","warn","searchTerm","toLowerCase","filter","name","includes","location","city","country","genre","language","description","getStationsByCountry","localStations","countryCode","getCountryCode","onlineStations","mergeStationResults","getPopularStations","limit","localPopular","sort","a","b","listeners","onlineTop","getTopStations","getStationsByGenre","getStationsByTag","getStationsByCity","getAvailableCountries","localCountries","onlineCountries","Promise","all","getLocalCountries","getCountries","countryMap","Map","forEach","set","key","existing","get","count","stationcount","code","iso","Array","from","values","getAvailableGenres","localGenres","onlineTags","getLocalGenres","getTags","genreMap","tag","entries","charAt","toUpperCase","local","online","merged","countryCount","genreCount","countryName","usa","canada","uk","germany","france","italy","spain","brazil","japan","australia","netherlands","sweden","norway","denmark","finland","getStationsByContinent","continent","continentCountries","europe","asia","africa","oceania","countries","getCitiesInCountry","cities","getGenres","genres","getLanguages","languages","getProxiedStreamUrl","corsFreeHosts","URL","some","host","hostname","encodeURIComponent","getStationById","id","find","getRandomStations","shuffled","Math","random","calculateDistance","lat1","lng1","lat2","lng2","R","dLat","toRad","dLng","sin","cos","c","atan2","sqrt","degrees","PI","radioStationService"],"mappings":"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"}},
    {"offset": {"line": 3508, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/hooks/useModularAudio.ts"],"sourcesContent":["import { useState, useRef, useEffect, useCallback, useMemo } from \"react\";\nimport { RadioStation } from \"../types\";\nimport { AudioService, AudioState } from \"../services/audioService\";\nimport { radioStationService } from \"../services/radioStationService\";\n\ninterface UseModularAudioOptions {\n  volume?: number;\n  autoPlay?: boolean;\n  retryAttempts?: number;\n  retryDelay?: number;\n}\n\ninterface ModularAudioState {\n  isPlaying: boolean;\n  isLoading: boolean;\n  error: string | null;\n  volume: number;\n  isMuted: boolean;\n  currentTime: number;\n  state: AudioState;\n  currentStation: RadioStation | null;\n}\n\ninterface ModularAudioActions {\n  play: () => Promise<void>;\n  pause: () => void;\n  setVolume: (volume: number) => void;\n  toggleMute: () => void;\n  loadStation: (station: RadioStation) => Promise<void>;\n  clearError: () => void;\n  getAudioElement: () => HTMLAudioElement | null;\n}\n\nexport function useModularAudio(\n  options: UseModularAudioOptions = {},\n): [ModularAudioState, ModularAudioActions] {\n  const audioServiceRef = useRef<AudioService | null>(null);\n\n  // Memoize options to prevent infinite loops\n  const memoizedOptions = useMemo(\n    () => ({\n      volume: options.volume || 0.7,\n      autoPlay: options.autoPlay || false,\n      retryAttempts: options.retryAttempts || 3,\n      retryDelay: options.retryDelay || 2000,\n    }),\n    [\n      options.volume,\n      options.autoPlay,\n      options.retryAttempts,\n      options.retryDelay,\n    ],\n  );\n\n  const [state, setState] = useState<ModularAudioState>(() => ({\n    isPlaying: false,\n    isLoading: false,\n    error: null,\n    volume: memoizedOptions.volume,\n    isMuted: false,\n    currentTime: 0,\n    state: \"idle\",\n    currentStation: null,\n  }));\n\n  // Initialize audio service\n  useEffect(() => {\n    audioServiceRef.current = new AudioService({\n      volume: memoizedOptions.volume,\n      retryAttempts: memoizedOptions.retryAttempts,\n      retryDelay: memoizedOptions.retryDelay,\n    });\n\n    const service = audioServiceRef.current;\n\n    // Set up event listeners\n    service.on(\"stateChange\", (audioState) => {\n      setState((prev) => ({\n        ...prev,\n        state: audioState,\n        isPlaying: audioState === \"playing\",\n        isLoading: audioState === \"loading\",\n      }));\n    });\n\n    service.on(\"error\", (error) => {\n      setState((prev) => ({\n        ...prev,\n        error,\n        isLoading: false,\n        isPlaying: false,\n      }));\n    });\n\n    service.on(\"volumeChange\", (volume) => {\n      setState((prev) => ({\n        ...prev,\n        volume,\n        isMuted: volume === 0,\n      }));\n    });\n\n    service.on(\"timeUpdate\", (currentTime) => {\n      setState((prev) => ({\n        ...prev,\n        currentTime,\n      }));\n    });\n\n    return () => {\n      service.destroy();\n    };\n  }, [\n    memoizedOptions.volume,\n    memoizedOptions.retryAttempts,\n    memoizedOptions.retryDelay,\n  ]);\n\n  const play = useCallback(async () => {\n    if (!audioServiceRef.current) return;\n\n    try {\n      await audioServiceRef.current.play();\n      setState((prev) => ({ ...prev, error: null }));\n    } catch (error) {\n      setState((prev) => ({\n        ...prev,\n        error: \"Failed to play audio. Please try again.\",\n      }));\n    }\n  }, []);\n\n  const pause = useCallback(() => {\n    if (!audioServiceRef.current) return;\n    audioServiceRef.current.pause();\n  }, []);\n\n  const setVolume = useCallback((volume: number) => {\n    if (!audioServiceRef.current) return;\n    audioServiceRef.current.setVolume(volume);\n  }, []);\n\n  const toggleMute = useCallback(() => {\n    if (!audioServiceRef.current) return;\n\n    if (state.isMuted) {\n      audioServiceRef.current.setVolume(state.volume > 0 ? state.volume : 0.7);\n    } else {\n      audioServiceRef.current.mute();\n    }\n  }, [state.isMuted, state.volume]);\n\n  const loadStation = useCallback(\n    async (station: RadioStation) => {\n      if (!audioServiceRef.current) return;\n\n      try {\n        setState((prev) => ({\n          ...prev,\n          error: null,\n          currentStation: station,\n        }));\n\n        // Get proxied URL to avoid CORS issues\n        const streamUrl = radioStationService.getProxiedStreamUrl(station);\n\n        await audioServiceRef.current.loadStation(station, streamUrl);\n\n        // Auto-play if enabled\n        if (memoizedOptions.autoPlay) {\n          await play();\n        }\n      } catch (error) {\n        setState((prev) => ({\n          ...prev,\n          error: \"Failed to load radio station.\",\n        }));\n      }\n    },\n    [memoizedOptions.autoPlay, play],\n  );\n\n  const clearError = useCallback(() => {\n    setState((prev) => ({ ...prev, error: null }));\n  }, []);\n\n  const getAudioElement = useCallback((): HTMLAudioElement | null => {\n    return audioServiceRef.current?.getAudioElement() || null;\n  }, []);\n\n  const playerState: ModularAudioState = useMemo(\n    () => ({\n      ...state,\n      currentStation:\n        audioServiceRef.current?.getCurrentStation() || state.currentStation,\n    }),\n    [state],\n  );\n\n  const actions: ModularAudioActions = useMemo(\n    () => ({\n      play,\n      pause,\n      setVolume,\n      toggleMute,\n      loadStation,\n      clearError,\n      getAudioElement,\n    }),\n    [\n      play,\n      pause,\n      setVolume,\n      toggleMute,\n      loadStation,\n      clearError,\n      getAudioElement,\n    ],\n  );\n\n  return [playerState, actions];\n}\n"],"names":["useModularAudio","options","audioServiceRef","memoizedOptions","volume","autoPlay","retryAttempts","retryDelay","state","setState","isPlaying","isLoading","error","isMuted","currentTime","currentStation","current","service","on","audioState","prev","destroy","play","pause","setVolume","toggleMute","mute","loadStation","station","streamUrl","getProxiedStreamUrl","clearError","getAudioElement","playerState","getCurrentStation","actions"],"mappings":"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"}},
    {"offset": {"line": 3688, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/services/audioVisualizationService.ts"],"sourcesContent":["export type VisualizationType = \"bars\" | \"waveform\" | \"circular\" | \"particles\";\n\nexport interface VisualizerConfig {\n  fftSize: number;\n  smoothingTimeConstant: number;\n  minDecibels: number;\n  maxDecibels: number;\n  backgroundColor: string;\n  primaryColor: string;\n  secondaryColor: string;\n}\n\nexport interface VisualizerRenderer {\n  render(\n    data: Uint8Array,\n    canvas: HTMLCanvasElement,\n    config: VisualizerConfig,\n  ): void;\n}\n\nexport class BarsRenderer implements VisualizerRenderer {\n  render(\n    data: Uint8Array,\n    canvas: HTMLCanvasElement,\n    config: VisualizerConfig,\n  ): void {\n    const ctx = canvas.getContext(\"2d\")!;\n    const width = canvas.width;\n    const height = canvas.height;\n    const barWidth = (width / data.length) * 2;\n\n    // Clear canvas with fade effect\n    ctx.fillStyle = config.backgroundColor;\n    ctx.fillRect(0, 0, width, height);\n\n    // Draw bars\n    for (let i = 0; i < data.length; i++) {\n      const barHeight = (data[i] / 255) * height * 0.8;\n      const x = i * barWidth;\n      const y = height - barHeight;\n\n      // Create gradient\n      const gradient = ctx.createLinearGradient(0, y, 0, height);\n      gradient.addColorStop(0, config.primaryColor);\n      gradient.addColorStop(0.5, config.secondaryColor);\n      gradient.addColorStop(1, config.primaryColor);\n\n      ctx.fillStyle = gradient;\n      ctx.fillRect(x, y, barWidth - 1, barHeight);\n    }\n  }\n}\n\nexport class WaveformRenderer implements VisualizerRenderer {\n  render(\n    data: Uint8Array,\n    canvas: HTMLCanvasElement,\n    config: VisualizerConfig,\n  ): void {\n    const ctx = canvas.getContext(\"2d\")!;\n    const width = canvas.width;\n    const height = canvas.height;\n\n    // Clear canvas with fade effect\n    ctx.fillStyle = config.backgroundColor;\n    ctx.fillRect(0, 0, width, height);\n\n    // Draw waveform\n    ctx.lineWidth = 2;\n    ctx.strokeStyle = config.primaryColor;\n    ctx.beginPath();\n\n    const sliceWidth = width / data.length;\n    let x = 0;\n\n    for (let i = 0; i < data.length; i++) {\n      const v = data[i] / 128.0;\n      const y = (v * height) / 2;\n\n      if (i === 0) {\n        ctx.moveTo(x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n\n      x += sliceWidth;\n    }\n\n    ctx.stroke();\n  }\n}\n\nexport class CircularRenderer implements VisualizerRenderer {\n  render(\n    data: Uint8Array,\n    canvas: HTMLCanvasElement,\n    config: VisualizerConfig,\n  ): void {\n    const ctx = canvas.getContext(\"2d\")!;\n    const width = canvas.width;\n    const height = canvas.height;\n    const centerX = width / 2;\n    const centerY = height / 2;\n    const radius = Math.min(width, height) * 0.3;\n\n    // Clear canvas with fade effect\n    ctx.fillStyle = config.backgroundColor;\n    ctx.fillRect(0, 0, width, height);\n\n    // Draw center circle\n    ctx.fillStyle = config.primaryColor + \"40\";\n    ctx.beginPath();\n    ctx.arc(centerX, centerY, radius * 0.8, 0, Math.PI * 2);\n    ctx.fill();\n\n    // Draw circular visualization\n    const angleStep = (Math.PI * 2) / data.length;\n\n    for (let i = 0; i < data.length; i++) {\n      const amplitude = (data[i] / 255) * radius;\n      const angle = i * angleStep;\n\n      const x1 = centerX + Math.cos(angle) * radius;\n      const y1 = centerY + Math.sin(angle) * radius;\n      const x2 = centerX + Math.cos(angle) * (radius + amplitude);\n      const y2 = centerY + Math.sin(angle) * (radius + amplitude);\n\n      // Create gradient\n      const gradient = ctx.createLinearGradient(x1, y1, x2, y2);\n      gradient.addColorStop(0, config.primaryColor + \"CC\");\n      gradient.addColorStop(1, config.secondaryColor + \"66\");\n\n      ctx.strokeStyle = gradient;\n      ctx.lineWidth = 2;\n      ctx.beginPath();\n      ctx.moveTo(x1, y1);\n      ctx.lineTo(x2, y2);\n      ctx.stroke();\n    }\n  }\n}\n\nexport class ParticlesRenderer implements VisualizerRenderer {\n  private particles: Array<{\n    x: number;\n    y: number;\n    vx: number;\n    vy: number;\n    life: number;\n  }> = [];\n\n  render(\n    data: Uint8Array,\n    canvas: HTMLCanvasElement,\n    config: VisualizerConfig,\n  ): void {\n    const ctx = canvas.getContext(\"2d\")!;\n    const width = canvas.width;\n    const height = canvas.height;\n\n    // Clear canvas\n    ctx.fillStyle = config.backgroundColor;\n    ctx.fillRect(0, 0, width, height);\n\n    // Calculate average amplitude\n    const avgAmplitude = data.reduce((sum, val) => sum + val, 0) / data.length;\n\n    // Generate new particles based on audio intensity\n    if (avgAmplitude > 50) {\n      for (let i = 0; i < Math.floor(avgAmplitude / 20); i++) {\n        this.particles.push({\n          x: Math.random() * width,\n          y: height,\n          vx: (Math.random() - 0.5) * 4,\n          vy: -Math.random() * 5 - 2,\n          life: 1.0,\n        });\n      }\n    }\n\n    // Update and draw particles\n    this.particles = this.particles.filter((particle) => {\n      particle.x += particle.vx;\n      particle.y += particle.vy;\n      particle.vy += 0.1; // gravity\n      particle.life -= 0.02;\n\n      if (particle.life > 0) {\n        ctx.fillStyle =\n          config.primaryColor +\n          Math.floor(particle.life * 255)\n            .toString(16)\n            .padStart(2, \"0\");\n        ctx.beginPath();\n        ctx.arc(particle.x, particle.y, 2, 0, Math.PI * 2);\n        ctx.fill();\n        return true;\n      }\n      return false;\n    });\n  }\n}\n\nexport class AudioVisualizationService {\n  private analyser: AnalyserNode | null = null;\n  private dataArray: Uint8Array | null = null;\n  private animationFrame: number | null = null;\n  private renderers: Map<VisualizationType, VisualizerRenderer>;\n  private currentRenderer: VisualizerRenderer | null = null;\n  private config: VisualizerConfig;\n\n  constructor(config: Partial<VisualizerConfig> = {}) {\n    this.config = {\n      fftSize: 256,\n      smoothingTimeConstant: 0.8,\n      minDecibels: -90,\n      maxDecibels: -10,\n      backgroundColor: \"rgba(0, 0, 0, 0.1)\",\n      primaryColor: \"#60a5fa\",\n      secondaryColor: \"#3b82f6\",\n      ...config,\n    };\n\n    this.renderers = new Map([\n      [\"bars\", new BarsRenderer()],\n      [\"waveform\", new WaveformRenderer()],\n      [\"circular\", new CircularRenderer()],\n      [\"particles\", new ParticlesRenderer()],\n    ]);\n  }\n\n  public initialize(audioElement: HTMLAudioElement): boolean {\n    try {\n      const audioContext = new (\n        window.AudioContext || (window as any).webkitAudioContext\n      )();\n      const source = audioContext.createMediaElementSource(audioElement);\n      this.analyser = audioContext.createAnalyser();\n\n      // Configure analyser\n      this.analyser.fftSize = this.config.fftSize;\n      this.analyser.smoothingTimeConstant = this.config.smoothingTimeConstant;\n      this.analyser.minDecibels = this.config.minDecibels;\n      this.analyser.maxDecibels = this.config.maxDecibels;\n\n      // Connect audio graph\n      source.connect(this.analyser);\n      this.analyser.connect(audioContext.destination);\n\n      this.dataArray = new Uint8Array(this.analyser.frequencyBinCount);\n\n      // Resume audio context if suspended\n      if (audioContext.state === \"suspended\") {\n        audioContext.resume();\n      }\n\n      return true;\n    } catch (error) {\n      console.warn(\"Audio visualization initialization failed:\", error);\n      return false;\n    }\n  }\n\n  public start(\n    canvas: HTMLCanvasElement,\n    type: VisualizationType = \"bars\",\n  ): void {\n    this.currentRenderer = this.renderers.get(type) || null;\n\n    if (!this.analyser || !this.dataArray || !this.currentRenderer) {\n      return;\n    }\n\n    const animate = () => {\n      if (!this.analyser || !this.dataArray || !this.currentRenderer) return;\n\n      if (this.dataArray) {\n        this.analyser.getByteFrequencyData(this.dataArray as any);\n      }\n      this.currentRenderer.render(this.dataArray, canvas, this.config);\n\n      this.animationFrame = requestAnimationFrame(animate);\n    };\n\n    animate();\n  }\n\n  public stop(): void {\n    if (this.animationFrame) {\n      cancelAnimationFrame(this.animationFrame);\n      this.animationFrame = null;\n    }\n  }\n\n  public changeType(type: VisualizationType): void {\n    this.currentRenderer = this.renderers.get(type) || null;\n  }\n\n  public updateConfig(newConfig: Partial<VisualizerConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n  }\n\n  public getAvailableTypes(): VisualizationType[] {\n    return Array.from(this.renderers.keys());\n  }\n\n  public destroy(): void {\n    this.stop();\n    this.analyser = null;\n    this.dataArray = null;\n    this.currentRenderer = null;\n  }\n}\n"],"names":["BarsRenderer","render","data","canvas","config","ctx","getContext","width","height","barWidth","length","fillStyle","backgroundColor","fillRect","i","barHeight","x","y","gradient","createLinearGradient","addColorStop","primaryColor","secondaryColor","WaveformRenderer","lineWidth","strokeStyle","beginPath","sliceWidth","v","moveTo","lineTo","stroke","CircularRenderer","centerX","centerY","radius","Math","min","arc","PI","fill","angleStep","amplitude","angle","x1","cos","y1","sin","x2","y2","ParticlesRenderer","particles","avgAmplitude","reduce","sum","val","floor","push","random","vx","vy","life","filter","particle","toString","padStart","AudioVisualizationService","analyser","dataArray","animationFrame","renderers","currentRenderer","fftSize","smoothingTimeConstant","minDecibels","maxDecibels","Map","initialize","audioElement","audioContext","window","AudioContext","webkitAudioContext","source","createMediaElementSource","createAnalyser","connect","destination","Uint8Array","frequencyBinCount","state","resume","error","console","warn","start","type","get","animate","getByteFrequencyData","requestAnimationFrame","stop","cancelAnimationFrame","changeType","updateConfig","newConfig","getAvailableTypes","Array","from","keys","destroy"],"mappings":"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"}},
    {"offset": {"line": 3934, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/ModularAudioVisualizer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport {\n  AudioVisualizationService,\n  VisualizationType,\n} from \"../services/audioVisualizationService\";\n\ninterface ModularAudioVisualizerProps {\n  audioElement?: HTMLAudioElement | null;\n  isPlaying: boolean;\n  className?: string;\n  type?: VisualizationType;\n  width?: number;\n  height?: number;\n  colors?: {\n    primary?: string;\n    secondary?: string;\n    background?: string;\n  };\n}\n\nexport function ModularAudioVisualizer({\n  audioElement,\n  isPlaying,\n  className = \"\",\n  type = \"bars\",\n  width = 300,\n  height = 100,\n  colors = {},\n}: ModularAudioVisualizerProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const visualizationServiceRef = useRef<AudioVisualizationService | null>(\n    null,\n  );\n  const [isSupported, setIsSupported] = useState(true);\n  const [currentType, setCurrentType] = useState<VisualizationType>(type);\n\n  // Initialize visualization service\n  useEffect(() => {\n    visualizationServiceRef.current = new AudioVisualizationService({\n      fftSize: type === \"waveform\" ? 2048 : 256,\n      primaryColor: colors.primary || \"#60a5fa\",\n      secondaryColor: colors.secondary || \"#3b82f6\",\n      backgroundColor: colors.background || \"rgba(0, 0, 0, 0.1)\",\n    });\n\n    return () => {\n      visualizationServiceRef.current?.destroy();\n    };\n  }, [type, colors.primary, colors.secondary, colors.background]);\n\n  // Handle audio element changes\n  useEffect(() => {\n    if (!audioElement || !visualizationServiceRef.current) {\n      return;\n    }\n\n    const success = visualizationServiceRef.current.initialize(audioElement);\n    if (!success) {\n      setIsSupported(false);\n    }\n  }, [audioElement]);\n\n  // Handle playback state changes\n  useEffect(() => {\n    if (!visualizationServiceRef.current || !canvasRef.current) {\n      return;\n    }\n\n    if (isPlaying && isSupported) {\n      visualizationServiceRef.current.start(canvasRef.current, currentType);\n    } else {\n      visualizationServiceRef.current.stop();\n    }\n\n    return () => {\n      visualizationServiceRef.current?.stop();\n    };\n  }, [isPlaying, isSupported, currentType]);\n\n  // Handle type changes\n  useEffect(() => {\n    setCurrentType(type);\n    if (visualizationServiceRef.current) {\n      visualizationServiceRef.current.changeType(type);\n    }\n  }, [type]);\n\n  if (!isSupported) {\n    return (\n      <div className={`flex items-center justify-center ${className}`}>\n        <div className=\"text-gray-500 text-sm\">\n          Audio visualization not supported\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <motion.div\n      className={`relative ${className}`}\n      initial={{ opacity: 0, scale: 0.8 }}\n      animate={{\n        opacity: isPlaying ? 1 : 0.5,\n        scale: 1,\n        filter: isPlaying ? \"blur(0px)\" : \"blur(1px)\",\n      }}\n      transition={{ duration: 0.3 }}\n    >\n      <canvas\n        ref={canvasRef}\n        width={width}\n        height={height}\n        className=\"w-full h-full rounded-lg bg-black/20 backdrop-blur-sm border border-white/10\"\n        style={{\n          imageRendering: \"pixelated\",\n        }}\n      />\n\n      {/* Overlay effects */}\n      {isPlaying && (\n        <>\n          <div className=\"absolute inset-0 rounded-lg bg-gradient-to-t from-blue-500/10 to-transparent pointer-events-none\" />\n          <div className=\"absolute inset-0 rounded-lg shadow-inner pointer-events-none\" />\n        </>\n      )}\n\n      {/* Loading indicator when audio is initializing */}\n      {!isPlaying && (\n        <div className=\"absolute inset-0 flex items-center justify-center\">\n          <div className=\"flex items-center gap-2 text-gray-400 text-xs\">\n            <div className=\"w-3 h-3 border border-gray-400 border-t-transparent rounded-full animate-spin\" />\n            Ready\n          </div>\n        </div>\n      )}\n    </motion.div>\n  );\n}\n\n// Hook for easier visualization type cycling\nexport function useVisualizationType() {\n  const [type, setType] = useState<VisualizationType>(\"bars\");\n  const types: VisualizationType[] = [\n    \"bars\",\n    \"waveform\",\n    \"circular\",\n    \"particles\",\n  ];\n\n  const nextType = () => {\n    const currentIndex = types.indexOf(type);\n    const nextIndex = (currentIndex + 1) % types.length;\n    setType(types[nextIndex]);\n  };\n\n  const setVisualizationType = (newType: VisualizationType) => {\n    setType(newType);\n  };\n\n  return {\n    currentType: type,\n    availableTypes: types,\n    nextType,\n    setType: setVisualizationType,\n  };\n}\n"],"names":["ModularAudioVisualizer","audioElement","isPlaying","className","type","width","height","colors","canvasRef","visualizationServiceRef","isSupported","setIsSupported","currentType","setCurrentType","current","fftSize","primaryColor","primary","secondaryColor","secondary","backgroundColor","background","destroy","success","initialize","start","stop","changeType","div","initial","opacity","scale","animate","filter","transition","duration","ref","style","imageRendering","useVisualizationType","setType","types","nextType","currentIndex","indexOf","nextIndex","length","setVisualizationType","newType","availableTypes"],"mappings":"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"}},
    {"offset": {"line": 4131, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/ModularAudioPlayer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport {\n  Play,\n  Pause,\n  Volume2,\n  VolumeX,\n  MoreVertical,\n  SkipBack,\n  SkipForward,\n  Settings,\n} from \"lucide-react\";\nimport { useGlobeStore } from \"../stores/globe-store\";\nimport { useModularAudio } from \"../hooks/useModularAudio\";\nimport {\n  ModularAudioVisualizer,\n  useVisualizationType,\n} from \"./ModularAudioVisualizer\";\nimport { useState } from \"react\";\n\ninterface ModularAudioPlayerProps {\n  className?: string;\n  showVisualizer?: boolean;\n  compactMode?: boolean;\n  autoPlay?: boolean;\n}\n\nexport function ModularAudioPlayer({\n  className = \"\",\n  showVisualizer = true,\n  compactMode = false,\n  autoPlay = false,\n}: ModularAudioPlayerProps) {\n  const selectedStation = useGlobeStore((state) => state.selectedStation);\n  const [showSettings, setShowSettings] = useState(false);\n  const [audioState, audioActions] = useModularAudio({ autoPlay, volume: 0.7 });\n  const { currentType, availableTypes, nextType, setType } =\n    useVisualizationType();\n\n  // Load station when selected\n  useEffect(() => {\n    if (selectedStation) {\n      audioActions.loadStation(selectedStation);\n    }\n  }, [selectedStation, audioActions.loadStation]);\n\n  const formatTime = (time: number): string => {\n    const minutes = Math.floor(time / 60);\n    const seconds = Math.floor(time % 60);\n    return `${minutes}:${seconds.toString().padStart(2, \"0\")}`;\n  };\n\n  if (!selectedStation) {\n    return (\n      <motion.div\n        className={`glass rounded-xl p-6 text-center ${className}`}\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n      >\n        <div className=\"text-gray-400 mb-2\">\n          <Volume2 className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n        </div>\n        <p className=\"text-white text-sm mb-1\">Select a Radio Station</p>\n        <p className=\"text-gray-400 text-xs\">\n          Click on any station marker on the globe\n        </p>\n      </motion.div>\n    );\n  }\n\n  return (\n    <motion.div\n      className={`glass rounded-xl overflow-hidden ${compactMode ? \"p-3\" : \"p-4\"} ${className}`}\n      initial={{ y: 100, opacity: 0 }}\n      animate={{ y: 0, opacity: 1 }}\n      exit={{ y: 100, opacity: 0 }}\n      layout\n    >\n      {/* Station Info Header */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex items-center space-x-3 flex-1 min-w-0\">\n          {!compactMode && (\n            <div className=\"flex-shrink-0\">\n              <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center\">\n                <span className=\"text-white font-bold text-sm\">\n                  {selectedStation.name.charAt(0)}\n                </span>\n              </div>\n            </div>\n          )}\n\n          <div className=\"min-w-0 flex-1\">\n            <h3\n              className={`text-white font-semibold truncate ${compactMode ? \"text-sm\" : \"\"}`}\n            >\n              {selectedStation.name}\n            </h3>\n            <p\n              className={`text-gray-400 truncate ${compactMode ? \"text-xs\" : \"text-sm\"}`}\n            >\n              {selectedStation.location.city},{\" \"}\n              {selectedStation.location.country} â¢ {selectedStation.genre}\n            </p>\n          </div>\n        </div>\n\n        {/* Settings Button */}\n        <motion.button\n          onClick={() => setShowSettings(!showSettings)}\n          className=\"text-white/60 hover:text-white transition-colors p-1 rounded\"\n          whileHover={{ scale: 1.1 }}\n          whileTap={{ scale: 0.9 }}\n        >\n          <Settings className=\"w-4 h-4\" />\n        </motion.button>\n      </div>\n\n      {/* Audio Visualizer */}\n      <AnimatePresence>\n        {showVisualizer && audioState.isPlaying && !compactMode && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: \"auto\", opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.3 }}\n            className=\"mb-4 overflow-hidden\"\n          >\n            <div className=\"flex items-center justify-between mb-2\">\n              <span className=\"text-white/60 text-xs\">Audio Visualization</span>\n              <div className=\"flex space-x-1\">\n                {availableTypes.map((type) => (\n                  <button\n                    key={type}\n                    onClick={() => setType(type)}\n                    className={`px-2 py-1 text-xs rounded transition-colors ${\n                      currentType === type\n                        ? \"bg-blue-500 text-white\"\n                        : \"text-white/60 hover:text-white\"\n                    }`}\n                  >\n                    {type}\n                  </button>\n                ))}\n              </div>\n            </div>\n            <ModularAudioVisualizer\n              audioElement={audioActions.getAudioElement()}\n              isPlaying={audioState.isPlaying}\n              type={currentType}\n              className=\"w-full\"\n              height={compactMode ? 40 : 80}\n            />\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Main Controls */}\n      <div className=\"flex items-center space-x-4\">\n        {/* Play/Pause Button */}\n        <motion.button\n          onClick={\n            audioState.isPlaying ? audioActions.pause : audioActions.play\n          }\n          disabled={audioState.isLoading}\n          className={`flex-shrink-0 ${compactMode ? \"w-10 h-10\" : \"w-12 h-12\"} bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 rounded-full flex items-center justify-center transition-all`}\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n        >\n          {audioState.isLoading ? (\n            <div\n              className={`${compactMode ? \"w-4 h-4\" : \"w-5 h-5\"} border-2 border-white border-t-transparent rounded-full animate-spin`}\n            />\n          ) : audioState.isPlaying ? (\n            <Pause\n              className={`${compactMode ? \"w-4 h-4\" : \"w-5 h-5\"} text-white`}\n            />\n          ) : (\n            <Play\n              className={`${compactMode ? \"w-4 h-4\" : \"w-5 h-5\"} text-white ml-0.5`}\n            />\n          )}\n        </motion.button>\n\n        {/* Volume Control */}\n        <div className=\"flex items-center space-x-2 flex-1\">\n          <motion.button\n            onClick={audioActions.toggleMute}\n            className=\"text-white hover:text-blue-300 transition-colors\"\n            whileHover={{ scale: 1.1 }}\n          >\n            {audioState.isMuted ? (\n              <VolumeX className={compactMode ? \"w-4 h-4\" : \"w-5 h-5\"} />\n            ) : (\n              <Volume2 className={compactMode ? \"w-4 h-4\" : \"w-5 h-5\"} />\n            )}\n          </motion.button>\n\n          <div className=\"flex-1 max-w-24\">\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"100\"\n              value={audioState.isMuted ? 0 : audioState.volume * 100}\n              onChange={(e) =>\n                audioActions.setVolume(Number(e.target.value) / 100)\n              }\n              className=\"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer\n                        [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 \n                        [&::-webkit-slider-thumb]:bg-blue-500 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer\n                        [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:bg-blue-500 [&::-moz-range-thumb]:rounded-full \n                        [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:cursor-pointer\"\n            />\n          </div>\n\n          <span className=\"text-white/60 text-xs min-w-8\">\n            {Math.round((audioState.isMuted ? 0 : audioState.volume) * 100)}%\n          </span>\n        </div>\n\n        {/* Now Playing Indicator */}\n        {audioState.isPlaying && !compactMode && (\n          <motion.div\n            className=\"flex items-center space-x-2\"\n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n          >\n            <div className=\"flex space-x-0.5\">\n              {[...Array(3)].map((_, i) => (\n                <motion.div\n                  key={i}\n                  className=\"w-1 bg-green-500 rounded-full\"\n                  animate={{\n                    height: [4, 16, 4],\n                  }}\n                  transition={{\n                    duration: 0.8,\n                    repeat: Infinity,\n                    delay: i * 0.1,\n                  }}\n                />\n              ))}\n            </div>\n            <span className=\"text-green-500 text-xs font-medium\">LIVE</span>\n          </motion.div>\n        )}\n      </div>\n\n      {/* Error Display */}\n      <AnimatePresence>\n        {audioState.error && (\n          <motion.div\n            className=\"mt-3 p-2 bg-red-500/20 border border-red-500/50 rounded text-red-300 text-sm flex items-center justify-between\"\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n          >\n            <span className=\"flex-1\">{audioState.error}</span>\n            <button\n              onClick={audioActions.clearError}\n              className=\"text-red-300 hover:text-red-100 ml-2\"\n            >\n              Ã\n            </button>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Settings Panel */}\n      <AnimatePresence>\n        {showSettings && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"mt-4 p-3 bg-white/5 rounded-lg border border-white/10\"\n          >\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-white text-sm\">Show Visualizer</span>\n                <button\n                  onClick={() => setShowSettings(false)}\n                  className={`w-8 h-4 rounded-full transition-colors ${\n                    showVisualizer ? \"bg-blue-500\" : \"bg-gray-600\"\n                  }`}\n                >\n                  <div\n                    className={`w-3 h-3 bg-white rounded-full transition-transform ${\n                      showVisualizer ? \"translate-x-4\" : \"translate-x-0.5\"\n                    }`}\n                  />\n                </button>\n              </div>\n\n              <div className=\"text-xs text-gray-400\">\n                Station: {selectedStation.name}\n                <br />\n                Genre: {selectedStation.genre}\n                <br />\n                Location: {selectedStation.location.city},{\" \"}\n                {selectedStation.location.country}\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </motion.div>\n  );\n}\n"],"names":["ModularAudioPlayer","className","showVisualizer","compactMode","autoPlay","selectedStation","state","showSettings","setShowSettings","audioState","audioActions","volume","currentType","availableTypes","nextType","setType","loadStation","formatTime","time","minutes","Math","floor","seconds","toString","padStart","div","initial","opacity","y","animate","exit","layout","name","charAt","location","city","country","genre","button","onClick","whileHover","scale","whileTap","isPlaying","height","transition","duration","map","type","audioElement","getAudioElement","pause","play","disabled","isLoading","toggleMute","isMuted","min","max","value","onChange","e","setVolume","Number","target","round","x","Array","_","i","repeat","Infinity","delay","error","clearError"],"mappings":"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"}},
    {"offset": {"line": 4718, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/hooks/useUserData.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport type { RadioStation } from \"../types\";\n\nconst STORAGE_KEYS = {\n  FAVORITES: \"radioGlobe_favorites\",\n  RECENT: \"radioGlobe_recent\",\n  PREFERENCES: \"radioGlobe_preferences\",\n};\n\nconst MAX_RECENT = 20;\n\ninterface UserPreferences {\n  autoPlay: boolean;\n  defaultVolume: number;\n  preferredGenres: string[];\n  preferredCountries: string[];\n  sleepTimer: number | null; // minutes\n}\n\nconst DEFAULT_PREFERENCES: UserPreferences = {\n  autoPlay: false,\n  defaultVolume: 70,\n  preferredGenres: [],\n  preferredCountries: [],\n  sleepTimer: null,\n};\n\nexport function useFavorites() {\n  const [favorites, setFavorites] = useState<RadioStation[]>([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  // Load favorites from localStorage\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEYS.FAVORITES);\n      if (stored) {\n        setFavorites(JSON.parse(stored));\n      }\n    } catch (e) {\n      console.error(\"Failed to load favorites:\", e);\n    }\n    setIsLoaded(true);\n  }, []);\n\n  // Save favorites to localStorage\n  useEffect(() => {\n    if (isLoaded) {\n      localStorage.setItem(STORAGE_KEYS.FAVORITES, JSON.stringify(favorites));\n    }\n  }, [favorites, isLoaded]);\n\n  const addFavorite = useCallback((station: RadioStation) => {\n    setFavorites((prev) => {\n      if (prev.some((s) => s.id === station.id)) return prev;\n      return [station, ...prev];\n    });\n  }, []);\n\n  const removeFavorite = useCallback((stationId: string) => {\n    setFavorites((prev) => prev.filter((s) => s.id !== stationId));\n  }, []);\n\n  const isFavorite = useCallback(\n    (stationId: string) => {\n      return favorites.some((s) => s.id === stationId);\n    },\n    [favorites],\n  );\n\n  const toggleFavorite = useCallback(\n    (station: RadioStation) => {\n      if (isFavorite(station.id)) {\n        removeFavorite(station.id);\n      } else {\n        addFavorite(station);\n      }\n    },\n    [isFavorite, removeFavorite, addFavorite],\n  );\n\n  return {\n    favorites,\n    addFavorite,\n    removeFavorite,\n    isFavorite,\n    toggleFavorite,\n    isLoaded,\n  };\n}\n\nexport function useRecentStations() {\n  const [recent, setRecent] = useState<RadioStation[]>([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  // Load recent from localStorage\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEYS.RECENT);\n      if (stored) {\n        setRecent(JSON.parse(stored));\n      }\n    } catch (e) {\n      console.error(\"Failed to load recent stations:\", e);\n    }\n    setIsLoaded(true);\n  }, []);\n\n  // Save recent to localStorage\n  useEffect(() => {\n    if (isLoaded) {\n      localStorage.setItem(STORAGE_KEYS.RECENT, JSON.stringify(recent));\n    }\n  }, [recent, isLoaded]);\n\n  const addToRecent = useCallback((station: RadioStation) => {\n    setRecent((prev) => {\n      // Remove if already exists\n      const filtered = prev.filter((s) => s.id !== station.id);\n      // Add to front and limit size\n      return [station, ...filtered].slice(0, MAX_RECENT);\n    });\n  }, []);\n\n  const clearRecent = useCallback(() => {\n    setRecent([]);\n  }, []);\n\n  return {\n    recent,\n    addToRecent,\n    clearRecent,\n    isLoaded,\n  };\n}\n\nexport function usePreferences() {\n  const [preferences, setPreferences] =\n    useState<UserPreferences>(DEFAULT_PREFERENCES);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  // Load preferences from localStorage\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEYS.PREFERENCES);\n      if (stored) {\n        setPreferences({ ...DEFAULT_PREFERENCES, ...JSON.parse(stored) });\n      }\n    } catch (e) {\n      console.error(\"Failed to load preferences:\", e);\n    }\n    setIsLoaded(true);\n  }, []);\n\n  // Save preferences to localStorage\n  useEffect(() => {\n    if (isLoaded) {\n      localStorage.setItem(\n        STORAGE_KEYS.PREFERENCES,\n        JSON.stringify(preferences),\n      );\n    }\n  }, [preferences, isLoaded]);\n\n  const updatePreference = useCallback(\n    <K extends keyof UserPreferences>(key: K, value: UserPreferences[K]) => {\n      setPreferences((prev) => ({ ...prev, [key]: value }));\n    },\n    [],\n  );\n\n  const addPreferredGenre = useCallback((genre: string) => {\n    setPreferences((prev) => ({\n      ...prev,\n      preferredGenres: Array.from(new Set([...prev.preferredGenres, genre])),\n    }));\n  }, []);\n\n  const removePreferredGenre = useCallback((genre: string) => {\n    setPreferences((prev) => ({\n      ...prev,\n      preferredGenres: prev.preferredGenres.filter((g) => g !== genre),\n    }));\n  }, []);\n\n  return {\n    preferences,\n    updatePreference,\n    addPreferredGenre,\n    removePreferredGenre,\n    isLoaded,\n  };\n}\n\n// Combined hook for all user data\nexport function useUserData() {\n  const favorites = useFavorites();\n  const recent = useRecentStations();\n  const preferences = usePreferences();\n\n  return {\n    favorites,\n    recent,\n    preferences,\n    isLoaded: favorites.isLoaded && recent.isLoaded && preferences.isLoaded,\n  };\n}\n"],"names":["STORAGE_KEYS","FAVORITES","RECENT","PREFERENCES","MAX_RECENT","DEFAULT_PREFERENCES","autoPlay","defaultVolume","preferredGenres","preferredCountries","sleepTimer","useFavorites","favorites","setFavorites","isLoaded","setIsLoaded","stored","localStorage","getItem","JSON","parse","e","console","error","setItem","stringify","addFavorite","station","prev","some","s","id","removeFavorite","stationId","filter","isFavorite","toggleFavorite","useRecentStations","recent","setRecent","addToRecent","filtered","slice","clearRecent","usePreferences","preferences","setPreferences","updatePreference","key","value","addPreferredGenre","genre","Array","from","Set","removePreferredGenre","g","useUserData"],"mappings":"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"}},
    {"offset": {"line": 4921, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/hooks/useUserLocation.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\n\ninterface UserLocation {\n  latitude: number;\n  longitude: number;\n  country?: string;\n  city?: string;\n  timezone?: string;\n}\n\ninterface LocationState {\n  location: UserLocation | null;\n  isLoading: boolean;\n  error: string | null;\n  permissionDenied: boolean;\n}\n\n// Fallback locations by country code\nconst FALLBACK_LOCATIONS: Record<string, UserLocation> = {\n  US: {\n    latitude: 37.7749,\n    longitude: -122.4194,\n    country: \"United States\",\n    city: \"San Francisco\",\n    timezone: \"America/Los_Angeles\",\n  },\n  GB: {\n    latitude: 51.5074,\n    longitude: -0.1278,\n    country: \"United Kingdom\",\n    city: \"London\",\n    timezone: \"Europe/London\",\n  },\n  DE: {\n    latitude: 52.52,\n    longitude: 13.405,\n    country: \"Germany\",\n    city: \"Berlin\",\n    timezone: \"Europe/Berlin\",\n  },\n  FR: {\n    latitude: 48.8566,\n    longitude: 2.3522,\n    country: \"France\",\n    city: \"Paris\",\n    timezone: \"Europe/Paris\",\n  },\n  JP: {\n    latitude: 35.6762,\n    longitude: 139.6503,\n    country: \"Japan\",\n    city: \"Tokyo\",\n    timezone: \"Asia/Tokyo\",\n  },\n  KE: {\n    latitude: -1.2921,\n    longitude: 36.8219,\n    country: \"Kenya\",\n    city: \"Nairobi\",\n    timezone: \"Africa/Nairobi\",\n  },\n  IN: {\n    latitude: 28.6139,\n    longitude: 77.209,\n    country: \"India\",\n    city: \"New Delhi\",\n    timezone: \"Asia/Kolkata\",\n  },\n  BR: {\n    latitude: -23.5505,\n    longitude: -46.6333,\n    country: \"Brazil\",\n    city: \"SÃ£o Paulo\",\n    timezone: \"America/Sao_Paulo\",\n  },\n  AU: {\n    latitude: -33.8688,\n    longitude: 151.2093,\n    country: \"Australia\",\n    city: \"Sydney\",\n    timezone: \"Australia/Sydney\",\n  },\n};\n\nexport function useUserLocation() {\n  const [state, setState] = useState<LocationState>({\n    location: null,\n    isLoading: true,\n    error: null,\n    permissionDenied: false,\n  });\n\n  useEffect(() => {\n    // Try to get from localStorage first (cached location)\n    const cached = localStorage.getItem(\"userLocation\");\n    if (cached) {\n      try {\n        const parsed = JSON.parse(cached);\n        // Use cached if less than 24 hours old\n        if (Date.now() - parsed.timestamp < 24 * 60 * 60 * 1000) {\n          setState({\n            location: parsed.location,\n            isLoading: false,\n            error: null,\n            permissionDenied: false,\n          });\n          return;\n        }\n      } catch (e) {\n        localStorage.removeItem(\"userLocation\");\n      }\n    }\n\n    // Try geolocation API\n    if (\"geolocation\" in navigator) {\n      navigator.geolocation.getCurrentPosition(\n        async (position) => {\n          const { latitude, longitude } = position.coords;\n\n          // Try to get location details via reverse geocoding\n          let locationDetails: UserLocation = { latitude, longitude };\n\n          try {\n            // Using a free reverse geocoding service\n            const response = await fetch(\n              `https://nominatim.openstreetmap.org/reverse?lat=${latitude}&lon=${longitude}&format=json`,\n              { headers: { \"User-Agent\": \"RadioGlobe/1.0\" } },\n            );\n            if (response.ok) {\n              const data = await response.json();\n              locationDetails = {\n                latitude,\n                longitude,\n                country: data.address?.country,\n                city:\n                  data.address?.city ||\n                  data.address?.town ||\n                  data.address?.village,\n                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n              };\n            }\n          } catch (e) {\n            // Reverse geocoding failed, use coordinates only\n            locationDetails.timezone =\n              Intl.DateTimeFormat().resolvedOptions().timeZone;\n          }\n\n          // Cache the location\n          localStorage.setItem(\n            \"userLocation\",\n            JSON.stringify({\n              location: locationDetails,\n              timestamp: Date.now(),\n            }),\n          );\n\n          setState({\n            location: locationDetails,\n            isLoading: false,\n            error: null,\n            permissionDenied: false,\n          });\n        },\n        (error) => {\n          console.warn(\"Geolocation error:\", error.message);\n\n          // Use timezone-based fallback\n          const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n          const fallbackLocation = getFallbackFromTimezone(timezone);\n\n          setState({\n            location: fallbackLocation,\n            isLoading: false,\n            error: error.message,\n            permissionDenied: error.code === error.PERMISSION_DENIED,\n          });\n        },\n        {\n          enableHighAccuracy: false,\n          timeout: 10000,\n          maximumAge: 300000, // 5 minutes\n        },\n      );\n    } else {\n      // Geolocation not supported, use timezone fallback\n      const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n      const fallbackLocation = getFallbackFromTimezone(timezone);\n\n      setState({\n        location: fallbackLocation,\n        isLoading: false,\n        error: \"Geolocation not supported\",\n        permissionDenied: false,\n      });\n    }\n  }, []);\n\n  return state;\n}\n\nfunction getFallbackFromTimezone(timezone: string): UserLocation {\n  // Map timezones to countries\n  if (timezone.startsWith(\"America/\")) {\n    if (timezone.includes(\"Sao_Paulo\") || timezone.includes(\"Brasilia\")) {\n      return FALLBACK_LOCATIONS.BR;\n    }\n    return FALLBACK_LOCATIONS.US;\n  }\n  if (timezone.startsWith(\"Europe/London\")) return FALLBACK_LOCATIONS.GB;\n  if (\n    timezone.startsWith(\"Europe/Berlin\") ||\n    timezone.startsWith(\"Europe/Vienna\")\n  )\n    return FALLBACK_LOCATIONS.DE;\n  if (timezone.startsWith(\"Europe/Paris\")) return FALLBACK_LOCATIONS.FR;\n  if (timezone.startsWith(\"Asia/Tokyo\")) return FALLBACK_LOCATIONS.JP;\n  if (timezone.startsWith(\"Asia/Kolkata\")) return FALLBACK_LOCATIONS.IN;\n  if (timezone.startsWith(\"Africa/Nairobi\")) return FALLBACK_LOCATIONS.KE;\n  if (timezone.startsWith(\"Australia/\")) return FALLBACK_LOCATIONS.AU;\n\n  // Default to US\n  return FALLBACK_LOCATIONS.US;\n}\n\n// Calculate distance between two coordinates in km\nexport function calculateDistance(\n  lat1: number,\n  lon1: number,\n  lat2: number,\n  lon2: number,\n): number {\n  const R = 6371; // Earth's radius in km\n  const dLat = toRad(lat2 - lat1);\n  const dLon = toRad(lon2 - lon1);\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(toRad(lat1)) *\n      Math.cos(toRad(lat2)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\n\nfunction toRad(deg: number): number {\n  return deg * (Math.PI / 180);\n}\n\n// Get time of day category\nexport function getTimeOfDay(): \"morning\" | \"afternoon\" | \"evening\" | \"night\" {\n  const hour = new Date().getHours();\n  if (hour >= 5 && hour < 12) return \"morning\";\n  if (hour >= 12 && hour < 17) return \"afternoon\";\n  if (hour >= 17 && hour < 21) return \"evening\";\n  return \"night\";\n}\n\n// Get recommended genres based on time of day\nexport function getTimeBasedGenres(): string[] {\n  const timeOfDay = getTimeOfDay();\n  switch (timeOfDay) {\n    case \"morning\":\n      return [\"news\", \"talk\", \"classical\", \"jazz\", \"acoustic\"];\n    case \"afternoon\":\n      return [\"pop\", \"rock\", \"indie\", \"electronic\", \"world\"];\n    case \"evening\":\n      return [\"jazz\", \"soul\", \"r&b\", \"chill\", \"lounge\"];\n    case \"night\":\n      return [\"ambient\", \"electronic\", \"classical\", \"lo-fi\", \"sleep\"];\n  }\n}\n"],"names":["FALLBACK_LOCATIONS","US","latitude","longitude","country","city","timezone","GB","DE","FR","JP","KE","IN","BR","AU","useUserLocation","state","setState","location","isLoading","error","permissionDenied","cached","localStorage","getItem","parsed","JSON","parse","Date","now","timestamp","e","removeItem","navigator","geolocation","getCurrentPosition","position","coords","locationDetails","response","fetch","headers","ok","data","json","address","town","village","Intl","DateTimeFormat","resolvedOptions","timeZone","setItem","stringify","console","warn","message","fallbackLocation","getFallbackFromTimezone","code","PERMISSION_DENIED","enableHighAccuracy","timeout","maximumAge","startsWith","includes","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","toRad","dLon","a","Math","sin","cos","c","atan2","sqrt","deg","PI","getTimeOfDay","hour","getHours","getTimeBasedGenres","timeOfDay"],"mappings":"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"}},
    {"offset": {"line": 5175, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/StationPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport {\n  MapPin,\n  Clock,\n  Users,\n  ExternalLink,\n  Heart,\n  Share2,\n  X,\n  Wifi,\n  WifiOff,\n  Copy,\n  Check,\n} from \"lucide-react\";\nimport { RadioStation } from \"../types\";\nimport { useFavorites } from \"../hooks/useUserData\";\nimport { useUserLocation, calculateDistance } from \"../hooks/useUserLocation\";\n\ninterface StationPanelProps {\n  station: RadioStation;\n  onClose?: () => void;\n}\n\nexport function StationPanel({ station, onClose }: StationPanelProps) {\n  const { isFavorite, toggleFavorite } = useFavorites();\n  const { location } = useUserLocation();\n  const [copied, setCopied] = useState(false);\n\n  const isStationFavorite = isFavorite(station.id);\n\n  const currentTime = new Date().toLocaleTimeString(\"en-US\", {\n    timeZone: station.location.timezone || \"UTC\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n\n  // Calculate distance from user\n  const distance =\n    location && station.location.lat && station.location.lng\n      ? calculateDistance(\n          location.latitude,\n          location.longitude,\n          station.location.lat,\n          station.location.lng,\n        )\n      : null;\n\n  const formatDistance = (km: number) => {\n    if (km < 1) return `${Math.round(km * 1000)}m`;\n    if (km < 100) return `${km.toFixed(1)}km`;\n    return `${Math.round(km).toLocaleString()}km`;\n  };\n\n  // Get quality indicator\n  const getQualityIndicator = (bitrate?: number) => {\n    if (!bitrate)\n      return { label: \"Unknown\", color: \"text-gray-400\", icon: WifiOff };\n    if (bitrate >= 256)\n      return { label: \"HD\", color: \"text-green-400\", icon: Wifi };\n    if (bitrate >= 128)\n      return { label: \"Good\", color: \"text-blue-400\", icon: Wifi };\n    return { label: \"Low\", color: \"text-yellow-400\", icon: Wifi };\n  };\n\n  const quality = getQualityIndicator(station.bitrate);\n\n  const handleShare = async () => {\n    const shareData = {\n      title: station.name,\n      text: `Listen to ${station.name} on Radio Globe`,\n      url: `${window.location.origin}?station=${station.id}`,\n    };\n\n    if (navigator.share) {\n      try {\n        await navigator.share(shareData);\n      } catch (e) {\n        // User cancelled or share failed\n        copyToClipboard(shareData.url);\n      }\n    } else {\n      copyToClipboard(shareData.url);\n    }\n  };\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.9 }}\n      animate={{ opacity: 1, scale: 1 }}\n      exit={{ opacity: 0, scale: 0.9 }}\n      className=\"glass rounded-xl p-5 w-80 max-w-sm relative\"\n    >\n      {/* Close Button */}\n      {onClose && (\n        <button\n          onClick={onClose}\n          className=\"absolute top-3 right-3 p-1.5 rounded-lg hover:bg-white/10 transition-colors\"\n        >\n          <X className=\"w-4 h-4 text-gray-400\" />\n        </button>\n      )}\n\n      {/* Header */}\n      <div className=\"mb-4 pr-8\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0\">\n            <span className=\"text-white font-bold text-lg\">\n              {station.name.charAt(0).toUpperCase()}\n            </span>\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"font-bold text-lg text-white truncate\">\n              {station.name}\n            </h3>\n            <div className=\"flex items-center gap-1.5 text-gray-400 text-sm\">\n              <MapPin className=\"w-3.5 h-3.5 flex-shrink-0\" />\n              <span className=\"truncate\">\n                {station.location.city}, {station.location.country}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {/* Distance Badge */}\n        {distance !== null && (\n          <div className=\"mt-2 inline-flex items-center gap-1 px-2 py-1 bg-blue-500/20 text-blue-300 rounded-full text-xs\">\n            <MapPin className=\"w-3 h-3\" />\n            {formatDistance(distance)} away\n          </div>\n        )}\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-3 gap-2 mb-4\">\n        <div className=\"text-center p-2.5 bg-white/5 rounded-lg\">\n          <Users className=\"w-4 h-4 mx-auto mb-1 text-blue-400\" />\n          <div className=\"text-sm font-semibold text-white\">\n            {station.listeners >= 1000\n              ? `${(station.listeners / 1000).toFixed(0)}k`\n              : station.listeners}\n          </div>\n          <div className=\"text-[10px] text-gray-500\">Listeners</div>\n        </div>\n        <div className=\"text-center p-2.5 bg-white/5 rounded-lg\">\n          <Clock className=\"w-4 h-4 mx-auto mb-1 text-green-400\" />\n          <div className=\"text-sm font-semibold text-white\">{currentTime}</div>\n          <div className=\"text-[10px] text-gray-500\">Local Time</div>\n        </div>\n        <div className=\"text-center p-2.5 bg-white/5 rounded-lg\">\n          <quality.icon className={`w-4 h-4 mx-auto mb-1 ${quality.color}`} />\n          <div className={`text-sm font-semibold ${quality.color}`}>\n            {quality.label}\n          </div>\n          <div className=\"text-[10px] text-gray-500\">\n            {station.bitrate ? `${station.bitrate}kbps` : \"Quality\"}\n          </div>\n        </div>\n      </div>\n\n      {/* Genre Tags */}\n      {station.genre && (\n        <div className=\"flex flex-wrap gap-1.5 mb-4\">\n          {station.genre\n            .split(\",\")\n            .slice(0, 3)\n            .map((genre, i) => (\n              <span\n                key={i}\n                className=\"px-2 py-0.5 bg-white/10 text-gray-300 rounded-full text-xs\"\n              >\n                {genre.trim()}\n              </span>\n            ))}\n        </div>\n      )}\n\n      {/* Language & Details */}\n      <div className=\"space-y-2 mb-4 text-sm\">\n        {station.language && (\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-gray-500\">Language</span>\n            <span className=\"text-gray-300 capitalize\">{station.language}</span>\n          </div>\n        )}\n      </div>\n\n      {/* Actions */}\n      <div className=\"flex gap-2\">\n        <button\n          onClick={() => toggleFavorite(station)}\n          className={`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg font-medium transition-all ${\n            isStationFavorite\n              ? \"bg-pink-500/20 text-pink-400 border border-pink-500/30\"\n              : \"bg-white/10 text-white hover:bg-white/20\"\n          }`}\n        >\n          <Heart\n            className={`w-4 h-4 ${isStationFavorite ? \"fill-current\" : \"\"}`}\n          />\n          {isStationFavorite ? \"Saved\" : \"Save\"}\n        </button>\n        <button\n          onClick={handleShare}\n          className=\"flex items-center justify-center gap-2 px-4 py-2.5 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors\"\n        >\n          {copied ? (\n            <Check className=\"w-4 h-4 text-green-400\" />\n          ) : (\n            <Share2 className=\"w-4 h-4\" />\n          )}\n        </button>\n        {station.website && (\n          <a\n            href={station.website}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"flex items-center justify-center px-3 py-2.5 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors\"\n          >\n            <ExternalLink className=\"w-4 h-4\" />\n          </a>\n        )}\n      </div>\n    </motion.div>\n  );\n}\n"],"names":["StationPanel","station","onClose","isFavorite","toggleFavorite","location","copied","setCopied","isStationFavorite","id","currentTime","Date","toLocaleTimeString","timeZone","timezone","hour","minute","distance","lat","lng","latitude","longitude","formatDistance","km","Math","round","toFixed","toLocaleString","getQualityIndicator","bitrate","label","color","icon","quality","handleShare","shareData","title","name","text","url","window","origin","navigator","share","e","copyToClipboard","clipboard","writeText","setTimeout","div","initial","opacity","scale","animate","exit","className","onClick","charAt","toUpperCase","city","country","listeners","genre","split","slice","map","i","trim","language","website","href","target","rel"],"mappings":"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"}},
    {"offset": {"line": 5618, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/SearchPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Search,\n  MapPin,\n  Volume2,\n  Heart,\n  Share,\n  Globe,\n  Music,\n  Radio,\n} from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { RadioStation } from \"../types\";\nimport { useGlobeStore } from \"../stores/globe-store\";\nimport { radioStationService } from \"../services/radioStationService\";\n\ninterface SearchPanelProps {\n  className?: string;\n}\n\nexport function SearchPanel({ className = \"\" }: SearchPanelProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [searchResults, setSearchResults] = useState<RadioStation[]>([]);\n  const [popularStations, setPopularStations] = useState<RadioStation[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [searchFilter, setSearchFilter] = useState<\n    \"all\" | \"genre\" | \"country\" | \"city\"\n  >(\"all\");\n  const { selectStation } = useGlobeStore();\n\n  // Load popular stations once\n  useEffect(() => {\n    const fetchPopular = async () => {\n      try {\n        const stations = await radioStationService.getPopularStations(8);\n        setPopularStations(stations);\n      } catch (error) {\n        console.error(\"Failed to load popular stations:\", error);\n      }\n    };\n    fetchPopular();\n  }, []);\n\n  // Enhanced search with filters\n  useEffect(() => {\n    let timer: NodeJS.Timeout;\n\n    if (searchTerm.length > 2) {\n      setIsLoading(true);\n\n      timer = setTimeout(async () => {\n        let results: RadioStation[] = [];\n\n        try {\n          switch (searchFilter) {\n            case \"genre\":\n              results =\n                await radioStationService.getStationsByGenre(searchTerm);\n              break;\n            case \"country\":\n              results =\n                await radioStationService.getStationsByCountry(searchTerm);\n              break;\n            case \"city\":\n              results = await radioStationService.getStationsByCity(searchTerm);\n              break;\n            default:\n              results = await radioStationService.searchStations(searchTerm);\n          }\n\n          setSearchResults(results.slice(0, 10)); // Limit results\n        } catch (error) {\n          console.error(\"Search error:\", error);\n          setSearchResults([]);\n        } finally {\n          setIsLoading(false);\n        }\n      }, 300);\n    } else {\n      setSearchResults([]);\n      setIsLoading(false);\n    }\n\n    return () => {\n      if (timer) clearTimeout(timer);\n    };\n  }, [searchTerm, searchFilter]);\n\n  const handleStationSelect = (station: RadioStation) => {\n    selectStation(station);\n    setIsOpen(false);\n    setSearchTerm(\"\");\n    setSearchResults([]);\n  };\n\n  return (\n    <div className={`relative ${className}`}>\n      {/* Search Input */}\n      <motion.div className=\"flex items-center\" whileHover={{ scale: 1.02 }}>\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-3 w-4 h-4 text-gray-400\" />\n          <input\n            type=\"text\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            onFocus={() => setIsOpen(true)}\n            placeholder=\"Search radio stations...\"\n            className=\"glass pl-10 pr-4 py-2 w-64 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          />\n          {isLoading && (\n            <div className=\"absolute right-3 top-3\">\n              <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n            </div>\n          )}\n        </div>\n      </motion.div>\n\n      {/* Search Results Dropdown */}\n      <AnimatePresence>\n        {isOpen && (\n          <motion.div\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -10 }}\n            className=\"absolute top-full left-0 mt-2 w-80 glass rounded-xl overflow-hidden z-50 max-h-96 overflow-y-auto\"\n          >\n            {/* Search Filters */}\n            <div className=\"p-3 border-b border-white/10\">\n              <div className=\"flex gap-2\">\n                {[\"all\", \"genre\", \"country\", \"city\"].map((filter) => (\n                  <button\n                    key={filter}\n                    onClick={() => setSearchFilter(filter as any)}\n                    className={`px-3 py-1 text-xs rounded-full transition-colors ${\n                      searchFilter === filter\n                        ? \"bg-blue-500 text-white\"\n                        : \"bg-white/10 text-gray-300 hover:bg-white/20\"\n                    }`}\n                  >\n                    {filter.charAt(0).toUpperCase() + filter.slice(1)}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {/* Search Results */}\n            {searchResults.length > 0 && (\n              <div className=\"p-2\">\n                <div className=\"text-xs text-gray-400 px-2 py-1\">\n                  {searchResults.length} stations found\n                </div>\n                {searchResults.map((station) => (\n                  <motion.button\n                    key={station.id}\n                    onClick={() => handleStationSelect(station)}\n                    className=\"w-full p-3 text-left hover:bg-white/10 rounded-lg transition-colors\"\n                    whileHover={{ scale: 1.02 }}\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center flex-shrink-0\">\n                        <Radio className=\"w-5 h-5 text-white\" />\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"font-medium text-white text-sm truncate\">\n                          {station.name}\n                        </div>\n                        <div className=\"text-xs text-gray-400 flex items-center gap-2\">\n                          <MapPin className=\"w-3 h-3\" />\n                          {station.location.city}, {station.location.country}\n                          <span className=\"bg-blue-500/20 text-blue-300 px-1.5 py-0.5 rounded text-xs\">\n                            {station.genre}\n                          </span>\n                        </div>\n                      </div>\n                      <div className=\"text-xs text-gray-500\">\n                        {(station.listeners / 1000).toFixed(0)}k\n                      </div>\n                    </div>\n                  </motion.button>\n                ))}\n              </div>\n            )}\n\n            {/* Popular Stations (when no search) */}\n            {searchTerm.length === 0 && popularStations.length > 0 && (\n              <div className=\"p-2\">\n                <div className=\"text-xs text-gray-400 px-2 py-2 flex items-center gap-2\">\n                  <Music className=\"w-3 h-3\" />\n                  Popular Stations\n                </div>\n                {popularStations.map((station) => (\n                  <motion.button\n                    key={station.id}\n                    onClick={() => handleStationSelect(station)}\n                    className=\"w-full p-3 text-left hover:bg-white/10 rounded-lg transition-colors\"\n                    whileHover={{ scale: 1.02 }}\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-600 rounded-lg flex items-center justify-center flex-shrink-0\">\n                        <span className=\"text-white text-xs font-bold\">\n                          {station.name.charAt(0)}\n                        </span>\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"font-medium text-white text-sm truncate\">\n                          {station.name}\n                        </div>\n                        <div className=\"text-xs text-gray-400\">\n                          {station.location.city}, {station.location.country}\n                        </div>\n                      </div>\n                      <div className=\"text-xs text-green-400\">\n                        {(station.listeners / 1000).toFixed(0)}k\n                      </div>\n                    </div>\n                  </motion.button>\n                ))}\n              </div>\n            )}\n\n            {/* No Results */}\n            {searchTerm.length > 2 &&\n              searchResults.length === 0 &&\n              !isLoading && (\n                <div className=\"p-6 text-center text-gray-400\">\n                  <Globe className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n                  <div className=\"text-sm\">No stations found</div>\n                  <div className=\"text-xs\">\n                    Try searching by genre or country\n                  </div>\n                </div>\n              )}\n\n            {/* Close Button */}\n            <div className=\"p-2 border-t border-white/10\">\n              <button\n                onClick={() => {\n                  setIsOpen(false);\n                  setSearchTerm(\"\");\n                }}\n                className=\"w-full py-2 text-xs text-gray-400 hover:text-white transition-colors\"\n              >\n                Close\n              </button>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Click outside to close */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 z-40\"\n          onClick={() => {\n            setIsOpen(false);\n            setSearchTerm(\"\");\n          }}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":["SearchPanel","className","isOpen","setIsOpen","searchTerm","setSearchTerm","searchResults","setSearchResults","popularStations","setPopularStations","isLoading","setIsLoading","searchFilter","setSearchFilter","selectStation","fetchPopular","stations","getPopularStations","error","console","timer","length","setTimeout","results","getStationsByGenre","getStationsByCountry","getStationsByCity","searchStations","slice","clearTimeout","handleStationSelect","station","div","whileHover","scale","type","value","onChange","e","target","onFocus","placeholder","initial","opacity","y","animate","exit","map","filter","onClick","charAt","toUpperCase","button","name","location","city","country","genre","listeners","toFixed","id"],"mappings":"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"}},
    {"offset": {"line": 6099, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/StationDirectory.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useMemo, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport {\n  Globe,\n  Radio,\n  MapPin,\n  Play,\n  Volume2,\n  Heart,\n  Clock,\n  Compass,\n  TrendingUp,\n  History,\n  Sparkles,\n  Filter,\n  ChevronDown,\n} from \"lucide-react\";\nimport { RadioStation } from \"../types\";\nimport { useGlobeStore } from \"../stores/globe-store\";\nimport { useFavorites, useRecentStations } from \"../hooks/useUserData\";\nimport {\n  useUserLocation,\n  calculateDistance,\n  getTimeOfDay,\n  getTimeBasedGenres,\n} from \"../hooks/useUserLocation\";\nimport { radioDiscoveryService } from \"../services/radioDiscoveryService\";\n\ninterface StationDirectoryProps {\n  className?: string;\n}\n\ntype TabType = \"discover\" | \"nearby\" | \"favorites\" | \"recent\";\n\nexport function StationDirectory({ className = \"\" }: StationDirectoryProps) {\n  const [activeTab, setActiveTab] = useState<TabType>(\"discover\");\n  const [selectedGenre, setSelectedGenre] = useState<string>(\"all\");\n  const [stations, setStations] = useState<RadioStation[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [showFilters, setShowFilters] = useState(false);\n\n  const { selectedStation, selectStation } = useGlobeStore();\n  const { favorites, isFavorite, toggleFavorite } = useFavorites();\n  const { recent, addToRecent } = useRecentStations();\n  const { location, isLoading: locationLoading } = useUserLocation();\n\n  // Load stations\n  useEffect(() => {\n    const loadStations = async () => {\n      setIsLoading(true);\n      try {\n        const data = await radioDiscoveryService.getTopStations(100);\n        setStations(data);\n      } catch (error) {\n        console.error(\"Failed to load stations:\", error);\n      }\n      setIsLoading(false);\n    };\n    loadStations();\n  }, []);\n\n  // Get unique genres\n  const genres = useMemo(() => {\n    const allGenres = stations.flatMap(\n      (s) => s.genre?.split(\",\").map((g) => g.trim().toLowerCase()) || [],\n    );\n    return [\"all\", ...Array.from(new Set(allGenres)).slice(0, 10)];\n  }, [stations]);\n\n  // Time-based recommendations\n  const timeOfDay = getTimeOfDay();\n  const recommendedGenres = getTimeBasedGenres();\n\n  // Sort stations by distance if location available\n  const stationsWithDistance = useMemo(() => {\n    if (!location) return stations.map((s) => ({ station: s, distance: null }));\n\n    return stations\n      .map((station) => {\n        const distance =\n          station.location.lat && station.location.lng\n            ? calculateDistance(\n                location.latitude,\n                location.longitude,\n                station.location.lat,\n                station.location.lng,\n              )\n            : null;\n        return { station, distance };\n      })\n      .sort((a, b) => {\n        if (a.distance === null) return 1;\n        if (b.distance === null) return -1;\n        return a.distance - b.distance;\n      });\n  }, [stations, location]);\n\n  // Filter stations by genre\n  const filteredStations = useMemo(() => {\n    if (selectedGenre === \"all\") return stationsWithDistance;\n    return stationsWithDistance.filter(({ station }) =>\n      station.genre?.toLowerCase().includes(selectedGenre),\n    );\n  }, [stationsWithDistance, selectedGenre]);\n\n  // Get display data based on active tab\n  const displayData = useMemo(() => {\n    switch (activeTab) {\n      case \"nearby\":\n        return filteredStations.slice(0, 20);\n      case \"favorites\":\n        return favorites.map((s) => ({ station: s, distance: null }));\n      case \"recent\":\n        return recent.map((s) => ({ station: s, distance: null }));\n      case \"discover\":\n      default:\n        // Time-based smart discovery\n        const timeFiltered = stationsWithDistance.filter(({ station }) =>\n          recommendedGenres.some((genre) =>\n            station.genre?.toLowerCase().includes(genre),\n          ),\n        );\n        // Mix time-relevant with popular\n        return [\n          ...timeFiltered.slice(0, 5),\n          ...stationsWithDistance\n            .filter((s) => !timeFiltered.includes(s))\n            .sort((a, b) => b.station.listeners - a.station.listeners)\n            .slice(0, 15),\n        ];\n    }\n  }, [\n    activeTab,\n    filteredStations,\n    favorites,\n    recent,\n    stationsWithDistance,\n    recommendedGenres,\n  ]);\n\n  const handleStationSelect = (station: RadioStation) => {\n    selectStation(station);\n    addToRecent(station);\n  };\n\n  const formatDistance = (km: number | null) => {\n    if (km === null) return null;\n    if (km < 1) return `${Math.round(km * 1000)}m`;\n    if (km < 100) return `${km.toFixed(0)}km`;\n    return `${Math.round(km).toLocaleString()}km`;\n  };\n\n  const tabs = [\n    { id: \"discover\" as TabType, label: \"Discover\", icon: Sparkles },\n    { id: \"nearby\" as TabType, label: \"Near Me\", icon: Compass },\n    {\n      id: \"favorites\" as TabType,\n      label: \"Favorites\",\n      icon: Heart,\n      count: favorites.length,\n    },\n    {\n      id: \"recent\" as TabType,\n      label: \"Recent\",\n      icon: History,\n      count: recent.length,\n    },\n  ];\n\n  return (\n    <motion.div\n      className={`glass rounded-xl overflow-hidden flex flex-col h-full ${className}`}\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n    >\n      {/* Header */}\n      <div className=\"p-6 border-b border-white/10 flex-shrink-0\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"relative\">\n              <Globe className=\"w-6 h-6 text-gradient\" />\n              <div className=\"absolute inset-0 animate-pulse-glow rounded-full bg-blue-400/20\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-bold text-white tracking-tight\">\n                Stations\n              </h2>\n              <p className=\"text-sm text-gray-400 font-mono\">\n                {displayData.length} available\n              </p>\n            </div>\n          </div>\n\n          {/* Time-based greeting */}\n          <div className=\"flex items-center gap-2 glass px-3 py-2 rounded-lg\">\n            <span className=\"text-sm text-gray-300 font-medium\">\n              {timeOfDay === \"morning\" && \"âï¸ Good morning\"}\n              {timeOfDay === \"afternoon\" && \"ð¤ï¸ Good afternoon\"}\n              {timeOfDay === \"evening\" && \"ð Good evening\"}\n              {timeOfDay === \"night\" && \"ð Night mode\"}\n            </span>\n          </div>\n        </div>\n\n        {/* Enhanced Tabs */}\n        <div className=\"flex gap-2 bg-surface-card/50 p-1.5 rounded-xl\">\n          {tabs.map((tab) => (\n            <motion.button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={`flex-1 flex items-center justify-center gap-2 px-3 py-3 text-sm rounded-lg font-medium transition-all ${\n                activeTab === tab.id\n                  ? \"bg-gradient-to-r from-blue-500 to-cyan-400 text-white shadow-lg\"\n                  : \"text-gray-400 hover:text-white hover:bg-white/5\"\n              }`}\n              whileHover={{ scale: 1.02 }}\n              whileTap={{ scale: 0.98 }}\n            >\n              <tab.icon className=\"w-4 h-4\" />\n              <span className=\"hidden sm:inline tracking-wide\">{tab.label}</span>\n              {tab.count !== undefined && tab.count > 0 && (\n                <span\n                  className={`px-2 py-1 text-xs rounded-full font-mono ${\n                    activeTab === tab.id \n                      ? \"bg-white/20 text-white\" \n                      : \"bg-white/10 text-gray-300\"\n                  }`}\n                >\n                  {tab.count}\n                </span>\n              )}\n            </motion.button>\n          ))}\n        </div>\n      </div>\n\n      {/* Filters - For discover and nearby tabs */}\n      {(activeTab === \"discover\" || activeTab === \"nearby\") && (\n        <div className=\"px-4 py-2 border-b border-white/5 flex-shrink-0\">\n          <button\n            onClick={() => setShowFilters(!showFilters)}\n            className=\"flex items-center gap-2 text-xs text-gray-400 hover:text-white transition-colors\"\n          >\n            <Filter className=\"w-3.5 h-3.5\" />\n            <span>Filter by genre</span>\n            <ChevronDown\n              className={`w-3.5 h-3.5 transition-transform ${showFilters ? \"rotate-180\" : \"\"}`}\n            />\n          </button>\n\n          <AnimatePresence>\n            {showFilters && (\n              <motion.div\n                initial={{ height: 0, opacity: 0 }}\n                animate={{ height: \"auto\", opacity: 1 }}\n                exit={{ height: 0, opacity: 0 }}\n                className=\"overflow-hidden\"\n              >\n                <div className=\"flex flex-wrap gap-1.5 pt-2\">\n                  {genres.map((genre) => (\n                    <button\n                      key={genre}\n                      onClick={() => setSelectedGenre(genre)}\n                      className={`px-2 py-1 text-xs rounded-full transition-colors ${\n                        selectedGenre === genre\n                          ? \"bg-blue-500 text-white\"\n                          : \"bg-white/10 text-gray-400 hover:text-white hover:bg-white/20\"\n                      }`}\n                    >\n                      {genre === \"all\" ? \"All\" : genre}\n                    </button>\n                  ))}\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n      )}\n\n      {/* Content Heading */}\n      {activeTab === \"discover\" && (\n        <div className=\"px-4 py-2 flex-shrink-0\">\n          <div className=\"flex items-center gap-2 text-xs text-gray-400\">\n            <TrendingUp className=\"w-3.5 h-3.5 text-green-400\" />\n            <span>\n              Recommended for {timeOfDay}:{\" \"}\n              <span className=\"text-gray-300\">\n                {recommendedGenres.slice(0, 3).join(\", \")}\n              </span>\n            </span>\n          </div>\n        </div>\n      )}\n\n      {activeTab === \"nearby\" && location && (\n        <div className=\"px-4 py-2 flex-shrink-0\">\n          <div className=\"flex items-center gap-2 text-xs text-gray-400\">\n            <MapPin className=\"w-3.5 h-3.5 text-blue-400\" />\n            <span>\n              Stations near{\" \"}\n              <span className=\"text-gray-300\">\n                {location.city || \"your location\"}\n              </span>\n            </span>\n          </div>\n        </div>\n      )}\n\n      {/* Station List */}\n      <div className=\"flex-1 overflow-y-auto\">\n        {isLoading ? (\n          <div className=\"flex items-center justify-center h-32\">\n            <div className=\"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\" />\n          </div>\n        ) : displayData.length === 0 ? (\n          <div className=\"p-8 text-center text-gray-400\">\n            <Radio className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n            <div className=\"text-sm\">\n              {activeTab === \"favorites\" && \"No favorites yet\"}\n              {activeTab === \"recent\" && \"No recently played\"}\n              {activeTab === \"nearby\" && \"No nearby stations found\"}\n              {activeTab === \"discover\" && \"No stations found\"}\n            </div>\n            <div className=\"text-xs mt-1\">\n              {activeTab === \"favorites\" &&\n                \"Tap the heart icon to save stations\"}\n              {activeTab === \"recent\" && \"Play some stations to see them here\"}\n            </div>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-white/5\">\n            {displayData.map(({ station, distance }) => (\n              <StationListItem\n                key={station.id}\n                station={station}\n                distance={formatDistance(distance)}\n                isSelected={selectedStation?.id === station.id}\n                isFavorite={isFavorite(station.id)}\n                onSelect={() => handleStationSelect(station)}\n                onToggleFavorite={() => toggleFavorite(station)}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Footer Stats */}\n      <div className=\"p-3 border-t border-white/10 bg-white/5 flex-shrink-0\">\n        <div className=\"flex justify-between text-xs text-gray-500\">\n          <span>{displayData.length} stations</span>\n          <span>{location?.city && `ð ${location.city}`}</span>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\ninterface StationListItemProps {\n  station: RadioStation;\n  distance: string | null;\n  isSelected: boolean;\n  isFavorite: boolean;\n  onSelect: () => void;\n  onToggleFavorite: () => void;\n}\n\nfunction StationListItem({\n  station,\n  distance,\n  isSelected,\n  isFavorite,\n  onSelect,\n  onToggleFavorite,\n}: StationListItemProps) {\n  return (\n    <motion.div\n      className={`p-3 cursor-pointer transition-colors ${\n        isSelected ? \"bg-blue-500/20\" : \"hover:bg-white/5\"\n      }`}\n      onClick={onSelect}\n      whileTap={{ scale: 0.98 }}\n    >\n      <div className=\"flex items-center gap-3\">\n        {/* Station Icon */}\n        <div\n          className={`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${\n            isSelected\n              ? \"bg-blue-500\"\n              : \"bg-gradient-to-br from-purple-500/30 to-blue-500/30\"\n          }`}\n        >\n          {isSelected ? (\n            <div className=\"flex items-end gap-0.5 h-4\">\n              <div\n                className=\"w-1 bg-white rounded-full animate-pulse\"\n                style={{ height: \"40%\" }}\n              />\n              <div\n                className=\"w-1 bg-white rounded-full animate-pulse\"\n                style={{ height: \"100%\", animationDelay: \"0.1s\" }}\n              />\n              <div\n                className=\"w-1 bg-white rounded-full animate-pulse\"\n                style={{ height: \"60%\", animationDelay: \"0.2s\" }}\n              />\n            </div>\n          ) : (\n            <span className=\"text-white font-bold text-sm\">\n              {station.name.charAt(0).toUpperCase()}\n            </span>\n          )}\n        </div>\n\n        {/* Station Info */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2\">\n            <h3\n              className={`font-medium text-sm truncate ${\n                isSelected ? \"text-blue-300\" : \"text-white\"\n              }`}\n            >\n              {station.name}\n            </h3>\n          </div>\n\n          <div className=\"flex items-center gap-2 text-xs text-gray-500 mt-0.5\">\n            <span className=\"truncate\">{station.location.country}</span>\n            {station.genre && (\n              <>\n                <span className=\"text-gray-600\">â¢</span>\n                <span className=\"truncate text-gray-400\">\n                  {station.genre.split(\",\")[0]}\n                </span>\n              </>\n            )}\n          </div>\n        </div>\n\n        {/* Distance & Stats */}\n        <div className=\"flex items-center gap-2 flex-shrink-0\">\n          {distance && (\n            <span className=\"text-xs text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-full\">\n              {distance}\n            </span>\n          )}\n\n          <div className=\"flex items-center gap-1 text-xs text-gray-500\">\n            <Volume2 className=\"w-3 h-3\" />\n            <span>\n              {station.listeners >= 1000\n                ? `${(station.listeners / 1000).toFixed(0)}k`\n                : station.listeners}\n            </span>\n          </div>\n\n          {/* Favorite Button */}\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              onToggleFavorite();\n            }}\n            className={`p-1.5 rounded-full transition-colors ${\n              isFavorite\n                ? \"text-pink-400 bg-pink-500/20\"\n                : \"text-gray-500 hover:text-pink-400 hover:bg-white/5\"\n            }`}\n          >\n            <Heart\n              className={`w-3.5 h-3.5 ${isFavorite ? \"fill-current\" : \"\"}`}\n            />\n          </button>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n"],"names":["StationDirectory","className","activeTab","setActiveTab","selectedGenre","setSelectedGenre","stations","setStations","isLoading","setIsLoading","showFilters","setShowFilters","selectedStation","selectStation","favorites","isFavorite","toggleFavorite","recent","addToRecent","location","locationLoading","loadStations","data","getTopStations","error","console","genres","allGenres","flatMap","s","genre","split","map","g","trim","toLowerCase","Array","from","Set","slice","timeOfDay","recommendedGenres","stationsWithDistance","station","distance","lat","lng","latitude","longitude","sort","a","b","filteredStations","filter","includes","displayData","timeFiltered","some","listeners","handleStationSelect","formatDistance","km","Math","round","toFixed","toLocaleString","tabs","id","label","icon","count","length","div","initial","opacity","y","animate","tab","button","onClick","whileHover","scale","whileTap","undefined","height","exit","join","city","StationListItem","isSelected","onSelect","onToggleFavorite","style","animationDelay","name","charAt","toUpperCase","country","e","stopPropagation"],"mappings":"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"}},
    {"offset": {"line": 6901, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/UserPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { User, Settings, LogOut, Heart, History, Globe } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nexport function UserPanel() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isLoggedIn, setIsLoggedIn] = useState(false); // Mock auth state\n\n  if (!isLoggedIn) {\n    return (\n      <div className=\"flex gap-2\">\n        <button className=\"button-secondary text-sm\">Sign In</button>\n        <button className=\"button-primary text-sm\">Sign Up</button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex items-center gap-3 p-3 glass rounded-lg hover:bg-white/20 transition-colors\"\n      >\n        <div className=\"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center\">\n          <User className=\"w-4 h-4 text-white\" />\n        </div>\n        <div className=\"text-left\">\n          <div className=\"text-sm font-medium text-white\">John Doe</div>\n          <div className=\"text-xs text-gray-400\">Premium</div>\n        </div>\n      </button>\n\n      <AnimatePresence>\n        {isOpen && (\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95, y: -10 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.95, y: -10 }}\n            className=\"absolute right-0 top-full mt-2 w-64 glass rounded-xl overflow-hidden z-50\"\n          >\n            <div className=\"p-4 border-b border-white/10\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center\">\n                  <User className=\"w-6 h-6 text-white\" />\n                </div>\n                <div>\n                  <div className=\"font-medium text-white\">John Doe</div>\n                  <div className=\"text-sm text-gray-400\">john@example.com</div>\n                  <div className=\"text-xs text-blue-400\">Premium Member</div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"p-2\">\n              <button className=\"w-full flex items-center gap-3 p-3 hover:bg-white/10 rounded-lg transition-colors\">\n                <Heart className=\"w-4 h-4 text-gray-400\" />\n                <span className=\"text-white\">Favorites</span>\n                <span className=\"ml-auto text-xs text-gray-400\">24</span>\n              </button>\n\n              <button className=\"w-full flex items-center gap-3 p-3 hover:bg-white/10 rounded-lg transition-colors\">\n                <History className=\"w-4 h-4 text-gray-400\" />\n                <span className=\"text-white\">Listening History</span>\n              </button>\n\n              <button className=\"w-full flex items-center gap-3 p-3 hover:bg-white/10 rounded-lg transition-colors\">\n                <Globe className=\"w-4 h-4 text-gray-400\" />\n                <span className=\"text-white\">Discover</span>\n              </button>\n\n              <div className=\"border-t border-white/10 my-2\"></div>\n\n              <button className=\"w-full flex items-center gap-3 p-3 hover:bg-white/10 rounded-lg transition-colors\">\n                <Settings className=\"w-4 h-4 text-gray-400\" />\n                <span className=\"text-white\">Settings</span>\n              </button>\n\n              <button className=\"w-full flex items-center gap-3 p-3 hover:bg-white/10 rounded-lg transition-colors text-red-400\">\n                <LogOut className=\"w-4 h-4\" />\n                <span>Sign Out</span>\n              </button>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Click outside to close */}\n      {isOpen && (\n        <div className=\"fixed inset-0 z-40\" onClick={() => setIsOpen(false)} />\n      )}\n    </div>\n  );\n}\n"],"names":["UserPanel","isOpen","setIsOpen","isLoggedIn","setIsLoggedIn","className","onClick","div","initial","opacity","scale","y","animate","exit"],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAJA;;;;;AAMO,SAASA;IACd,MAAM,CAACC,QAAQC,UAAU,GAAG,IAAA,gOAAQ,EAAC;IACrC,MAAM,CAACC,YAAYC,cAAc,GAAG,IAAA,gOAAQ,EAAC,QAAQ,kBAAkB;IAEvE,IAAI,CAACD,YAAY;QACf,qBACE,6PAAC;YAAIE,WAAU;;8BACb,6PAAC;oBAAOA,WAAU;8BAA2B;;;;;;8BAC7C,6PAAC;oBAAOA,WAAU;8BAAyB;;;;;;;;;;;;IAGjD;IAEA,qBACE,6PAAC;QAAIA,WAAU;;0BACb,6PAAC;gBACCC,SAAS,IAAMJ,UAAU,CAACD;gBAC1BI,WAAU;;kCAEV,6PAAC;wBAAIA,WAAU;kCACb,cAAA,6PAAC,0MAAI;4BAACA,WAAU;;;;;;;;;;;kCAElB,6PAAC;wBAAIA,WAAU;;0CACb,6PAAC;gCAAIA,WAAU;0CAAiC;;;;;;0CAChD,6PAAC;gCAAIA,WAAU;0CAAwB;;;;;;;;;;;;;;;;;;0BAI3C,6PAAC,4MAAe;0BACbJ,wBACC,6PAAC,oLAAM,CAACM,GAAG;oBACTC,SAAS;wBAAEC,SAAS;wBAAGC,OAAO;wBAAMC,GAAG,CAAC;oBAAG;oBAC3CC,SAAS;wBAAEH,SAAS;wBAAGC,OAAO;wBAAGC,GAAG;oBAAE;oBACtCE,MAAM;wBAAEJ,SAAS;wBAAGC,OAAO;wBAAMC,GAAG,CAAC;oBAAG;oBACxCN,WAAU;;sCAEV,6PAAC;4BAAIA,WAAU;sCACb,cAAA,6PAAC;gCAAIA,WAAU;;kDACb,6PAAC;wCAAIA,WAAU;kDACb,cAAA,6PAAC,0MAAI;4CAACA,WAAU;;;;;;;;;;;kDAElB,6PAAC;;0DACC,6PAAC;gDAAIA,WAAU;0DAAyB;;;;;;0DACxC,6PAAC;gDAAIA,WAAU;0DAAwB;;;;;;0DACvC,6PAAC;gDAAIA,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;;;;;;sCAK7C,6PAAC;4BAAIA,WAAU;;8CACb,6PAAC;oCAAOA,WAAU;;sDAChB,6PAAC,6MAAK;4CAACA,WAAU;;;;;;sDACjB,6PAAC;4CAAKA,WAAU;sDAAa;;;;;;sDAC7B,6PAAC;4CAAKA,WAAU;sDAAgC;;;;;;;;;;;;8CAGlD,6PAAC;oCAAOA,WAAU;;sDAChB,6PAAC,mNAAO;4CAACA,WAAU;;;;;;sDACnB,6PAAC;4CAAKA,WAAU;sDAAa;;;;;;;;;;;;8CAG/B,6PAAC;oCAAOA,WAAU;;sDAChB,6PAAC,6MAAK;4CAACA,WAAU;;;;;;sDACjB,6PAAC;4CAAKA,WAAU;sDAAa;;;;;;;;;;;;8CAG/B,6PAAC;oCAAIA,WAAU;;;;;;8CAEf,6PAAC;oCAAOA,WAAU;;sDAChB,6PAAC,sNAAQ;4CAACA,WAAU;;;;;;sDACpB,6PAAC;4CAAKA,WAAU;sDAAa;;;;;;;;;;;;8CAG/B,6PAAC;oCAAOA,WAAU;;sDAChB,6PAAC,oNAAM;4CAACA,WAAU;;;;;;sDAClB,6PAAC;sDAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAQfJ,wBACC,6PAAC;gBAAII,WAAU;gBAAqBC,SAAS,IAAMJ,UAAU;;;;;;;;;;;;AAIrE"}},
    {"offset": {"line": 7256, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Globe } from \"../components/Globe\";\nimport { ModularAudioPlayer } from \"../components/ModularAudioPlayer\";\nimport { StationPanel } from \"../components/StationPanel\";\nimport { SearchPanel } from \"../components/SearchPanel\";\nimport { StationDirectory } from \"../components/StationDirectory\";\nimport { UserPanel } from \"../components/UserPanel\";\nimport { useGlobeStore } from \"../stores/globe-store\";\n// import { globalRadioStations } from '../data/globalRadioStations'\nimport { radioDiscoveryService } from \"../services/radioDiscoveryService\";\nimport { motion } from \"framer-motion\";\nimport { Radio, Menu, X, List } from \"lucide-react\";\n\nexport default function Home() {\n  const { selectedStation, addMarker, markers } = useGlobeStore();\n  const [isMobile, setIsMobile] = useState(false);\n  const [showDirectory, setShowDirectory] = useState(false);\n  const [showMobileMenu, setShowMobileMenu] = useState(false);\n\n  // Detect mobile device and screen size\n  useEffect(() => {\n    const checkIfMobile = () => {\n      setIsMobile(window.innerWidth < 768 || \"ontouchstart\" in window);\n    };\n\n    checkIfMobile();\n    window.addEventListener(\"resize\", checkIfMobile);\n    return () => window.removeEventListener(\"resize\", checkIfMobile);\n  }, []);\n\n  return (\n    <main className=\"relative h-screen w-screen overflow-hidden bg-black\">\n      {/* 3D Globe with Three.js */}\n      <div className=\"absolute inset-0\">\n        <Globe />\n      </div>\n\n      {/* Top Bar */}\n      <motion.div\n        className=\"absolute top-0 left-0 right-0 z-40 p-6\"\n        initial={{ y: -100 }}\n        animate={{ y: 0 }}\n        transition={{ delay: 0.5 }}\n      >\n        <div className=\"flex items-center justify-between\">\n          {/* Logo */}\n          <motion.div\n            className=\"flex items-center gap-3 glass rounded-2xl px-6 py-3\"\n            whileHover={{ scale: 1.02 }}\n            transition={{ type: \"spring\", stiffness: 300 }}\n          >\n            <div className=\"relative\">\n              <Radio className=\"w-8 h-8 text-gradient\" />\n              <div className=\"absolute inset-0 animate-pulse-glow rounded-full bg-blue-400/20\" />\n            </div>\n            <div>\n              <h1 className=\"text-2xl font-bold text-gradient tracking-tight\">\n                Radio Globe\n              </h1>\n              <p className=\"text-sm text-gray-400 font-mono\">\n                Discover global radio stations\n              </p>\n            </div>\n          </motion.div>\n\n          {/* Desktop Navigation */}\n          {!isMobile && (\n            <div className=\"flex items-center gap-4\">\n              <SearchPanel />\n              <motion.button\n                onClick={() => setShowDirectory(!showDirectory)}\n                className={`glass px-6 py-3 rounded-xl flex items-center gap-3 transition-all font-medium ${\n                  showDirectory\n                    ? \"bg-gradient-to-r from-blue-500/30 to-cyan-500/30 text-cyan-300 border-cyan-400/30\"\n                    : \"text-white hover:bg-white/10 border-white/10\"\n                }`}\n                whileHover={{ scale: 1.02 }}\n                whileTap={{ scale: 0.98 }}\n              >\n                <List className=\"w-5 h-5\" />\n                <span className=\"text-sm tracking-wide\">Directory</span>\n                <div className=\"text-xs font-mono opacity-60\">\n                  {markers.length}\n                </div>\n              </motion.button>\n            </div>\n          )}\n\n          {/* Mobile Menu Button */}\n          {isMobile && (\n            <motion.button\n              onClick={() => setShowMobileMenu(!showMobileMenu)}\n              className=\"glass p-3 rounded-lg text-white\"\n              whileHover={{ scale: 1.05 }}\n            >\n              {showMobileMenu ? (\n                <X className=\"w-5 h-5\" />\n              ) : (\n                <Menu className=\"w-5 h-5\" />\n              )}\n            </motion.button>\n          )}\n        </div>\n      </motion.div>\n\n      {/* Station Directory Panel */}\n      {showDirectory && !isMobile && (\n        <motion.div\n          className=\"absolute top-20 left-4 z-50 w-96\"\n          initial={{ x: -400, opacity: 0 }}\n          animate={{ x: 0, opacity: 1 }}\n          exit={{ x: -400, opacity: 0 }}\n        >\n          <StationDirectory />\n        </motion.div>\n      )}\n\n      {/* Station Info Panel */}\n      {selectedStation && (\n        <motion.div\n          className={`absolute ${isMobile ? \"bottom-20 left-3 right-3\" : \"top-20 left-4\"} z-50`}\n          initial={{\n            x: isMobile ? 0 : -400,\n            y: isMobile ? 100 : 0,\n            opacity: 0,\n          }}\n          animate={{ x: 0, y: 0, opacity: 1 }}\n          exit={{ x: isMobile ? 0 : -400, y: isMobile ? 100 : 0, opacity: 0 }}\n        >\n          <StationPanel station={selectedStation} />\n        </motion.div>\n      )}\n\n      {/* Bottom Controls */}\n      <motion.div\n        className=\"absolute bottom-0 left-0 right-0 z-40\"\n        initial={{ y: 100 }}\n        animate={{ y: 0 }}\n        transition={{ delay: 0.7 }}\n      >\n        <div className=\"p-4\">\n          <div className=\"flex items-center justify-between\">\n            {/* User Panel - Desktop */}\n            {!isMobile && <UserPanel />}\n\n            {/* Audio Player */}\n            <div className=\"flex-1 max-w-2xl mx-4\">\n              <ModularAudioPlayer\n                showVisualizer={!isMobile}\n                compactMode={isMobile}\n                autoPlay={false}\n              />\n            </div>\n\n            {/* Mobile Controls */}\n            {isMobile && (\n              <div className=\"flex items-center gap-2\">\n                <motion.button\n                  onClick={() => setShowDirectory(!showDirectory)}\n                  className={`glass p-3 rounded-lg transition-colors ${\n                    showDirectory\n                      ? \"bg-blue-500/20 text-blue-300\"\n                      : \"text-white\"\n                  }`}\n                  whileHover={{ scale: 1.05 }}\n                >\n                  <List className=\"w-5 h-5\" />\n                </motion.button>\n              </div>\n            )}\n\n            {/* Desktop Stats */}\n            {!isMobile && (\n              <motion.div \n                className=\"glass px-6 py-4 rounded-2xl flex-shrink-0 border border-white/10\"\n                whileHover={{ scale: 1.02 }}\n                transition={{ type: \"spring\", stiffness: 300 }}\n              >\n                <div className=\"text-center\">\n                  <div className=\"text-xs text-gray-400 font-mono uppercase tracking-wide\">\n                    Global Stations\n                  </div>\n                  <div className=\"text-3xl font-bold text-gradient mt-1\">\n                    {markers.length}\n                  </div>\n                </div>\n              </motion.div>\n            )}\n          </div>\n        </div>\n      </motion.div>\n\n      {/* Mobile Menu Overlay */}\n      {showMobileMenu && isMobile && (\n        <motion.div\n          className=\"absolute inset-0 z-50\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n        >\n          <div\n            className=\"absolute inset-0 bg-black/80\"\n            onClick={() => setShowMobileMenu(false)}\n          />\n          <motion.div\n            className=\"absolute top-0 right-0 h-full w-80 glass p-6\"\n            initial={{ x: 320 }}\n            animate={{ x: 0 }}\n            exit={{ x: 320 }}\n          >\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className=\"text-xl font-bold text-white\">Menu</h2>\n                <button\n                  onClick={() => setShowMobileMenu(false)}\n                  className=\"p-2 hover:bg-white/10 rounded-lg transition-colors\"\n                >\n                  <X className=\"w-5 h-5 text-white\" />\n                </button>\n              </div>\n\n              <div className=\"space-y-4\">\n                <SearchPanel />\n\n                <motion.button\n                  onClick={() => {\n                    setShowDirectory(!showDirectory);\n                    setShowMobileMenu(false);\n                  }}\n                  className=\"w-full glass p-4 rounded-lg flex items-center gap-3 text-left\"\n                  whileHover={{ scale: 1.02 }}\n                >\n                  <List className=\"w-5 h-5 text-blue-400\" />\n                  <div>\n                    <div className=\"font-medium text-white\">\n                      Station Directory\n                    </div>\n                    <div className=\"text-xs text-gray-400\">\n                      Browse all stations\n                    </div>\n                  </div>\n                </motion.button>\n\n                <UserPanel />\n              </div>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n\n      {/* Mobile Directory Overlay */}\n      {showDirectory && isMobile && (\n        <motion.div\n          className=\"absolute inset-0 z-50\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n        >\n          <div\n            className=\"absolute inset-0 bg-black/80\"\n            onClick={() => setShowDirectory(false)}\n          />\n          <motion.div\n            className=\"absolute top-20 bottom-20 left-4 right-4 rounded-xl overflow-hidden\"\n            initial={{ scale: 0.8, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.8, opacity: 0 }}\n          >\n            <StationDirectory />\n          </motion.div>\n        </motion.div>\n      )}\n\n      {/* Loading Screen */}\n      <motion.div\n        className=\"absolute inset-0 z-50 bg-black flex items-center justify-center\"\n        initial={{ opacity: 1 }}\n        animate={{ opacity: 0 }}\n        transition={{ delay: 1, duration: 0.5 }}\n        style={{ pointerEvents: \"none\" }}\n      >\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-white text-lg\">Loading Radio Globe...</p>\n          <p className=\"text-gray-400 text-sm\">\n            Connecting to global stations...\n          </p>\n        </div>\n      </motion.div>\n    </main>\n  );\n}\n"],"names":["Home","selectedStation","addMarker","markers","isMobile","setIsMobile","showDirectory","setShowDirectory","showMobileMenu","setShowMobileMenu","checkIfMobile","window","innerWidth","addEventListener","removeEventListener","className","div","initial","y","animate","transition","delay","whileHover","scale","type","stiffness","button","onClick","whileTap","length","x","opacity","exit","station","showVisualizer","compactMode","autoPlay","duration","style","pointerEvents"],"mappings":"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"}}]
}