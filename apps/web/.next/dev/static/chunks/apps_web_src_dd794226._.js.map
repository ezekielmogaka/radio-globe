{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/utils/earthTexture.ts"],"sourcesContent":["import * as THREE from \"three\";\n\nexport class EarthTextureGenerator {\n  private width: number;\n  private height: number;\n\n  constructor(width: number, height: number) {\n    this.width = width;\n    this.height = height;\n  }\n\n  generateTexture(): THREE.Texture {\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\")!;\n    canvas.width = this.width;\n    canvas.height = this.height;\n\n    // Create realistic Earth texture with continents and oceans\n    this.drawBaseLayer(ctx);\n    this.drawContinents(ctx);\n    this.drawMountains(ctx);\n    this.drawDeserts(ctx);\n    this.addRandomTerrain(ctx);\n\n    const texture = new THREE.CanvasTexture(canvas);\n    texture.wrapS = THREE.RepeatWrapping;\n    texture.wrapT = THREE.ClampToEdgeWrapping;\n    texture.flipY = false;\n\n    return texture;\n  }\n\n  private drawBaseLayer(ctx: CanvasRenderingContext2D): void {\n    // Ocean blue background\n    const gradient = ctx.createLinearGradient(0, 0, 0, this.height);\n    gradient.addColorStop(0, \"#1e3a5f\"); // Deep blue at poles\n    gradient.addColorStop(0.5, \"#2b5a87\"); // Medium blue at equator\n    gradient.addColorStop(1, \"#1e3a5f\"); // Deep blue at poles\n\n    ctx.fillStyle = gradient;\n    ctx.fillRect(0, 0, this.width, this.height);\n  }\n\n  private drawContinents(ctx: CanvasRenderingContext2D): void {\n    ctx.fillStyle = \"#4a5d3a\"; // Forest green base\n\n    // Approximate continent shapes (simplified for performance)\n    const continents = [\n      // North America\n      { x: 0.15, y: 0.25, width: 0.3, height: 0.3 },\n      // South America\n      { x: 0.2, y: 0.6, width: 0.15, height: 0.35 },\n      // Europe\n      { x: 0.48, y: 0.3, width: 0.12, height: 0.15 },\n      // Africa\n      { x: 0.52, y: 0.45, width: 0.15, height: 0.4 },\n      // Asia\n      { x: 0.6, y: 0.2, width: 0.35, height: 0.4 },\n      // Australia\n      { x: 0.8, y: 0.75, width: 0.12, height: 0.08 },\n    ];\n\n    continents.forEach((continent) => {\n      this.drawContinentShape(ctx, continent);\n    });\n  }\n\n  private drawContinentShape(\n    ctx: CanvasRenderingContext2D,\n    continent: { x: number; y: number; width: number; height: number },\n  ): void {\n    const x = continent.x * this.width;\n    const y = continent.y * this.height;\n    const width = continent.width * this.width;\n    const height = continent.height * this.height;\n\n    // Create organic continent shape\n    ctx.beginPath();\n    ctx.ellipse(x, y, width / 2, height / 2, 0, 0, Math.PI * 2);\n\n    // Add irregular edges\n    for (let i = 0; i < 8; i++) {\n      const angle = (i / 8) * Math.PI * 2;\n      const offsetX =\n        Math.cos(angle) * (width / 2) * (0.7 + Math.random() * 0.6);\n      const offsetY =\n        Math.sin(angle) * (height / 2) * (0.7 + Math.random() * 0.6);\n\n      if (i === 0) {\n        ctx.moveTo(x + offsetX, y + offsetY);\n      } else {\n        ctx.lineTo(x + offsetX, y + offsetY);\n      }\n    }\n    ctx.closePath();\n    ctx.fill();\n\n    // Add coastal variations\n    ctx.strokeStyle = \"#3d4f2d\";\n    ctx.lineWidth = 2;\n    ctx.stroke();\n  }\n\n  private drawMountains(ctx: CanvasRenderingContext2D): void {\n    ctx.fillStyle = \"#8B4513\"; // Brown for mountains\n\n    // Major mountain ranges\n    const mountains = [\n      // Himalayas\n      { x: 0.7, y: 0.35, width: 0.15, height: 0.05 },\n      // Andes\n      { x: 0.22, y: 0.6, width: 0.03, height: 0.25 },\n      // Rocky Mountains\n      { x: 0.18, y: 0.3, width: 0.05, height: 0.15 },\n      // Alps\n      { x: 0.51, y: 0.32, width: 0.08, height: 0.03 },\n    ];\n\n    mountains.forEach((range) => {\n      const x = range.x * this.width;\n      const y = range.y * this.height;\n      const width = range.width * this.width;\n      const height = range.height * this.height;\n\n      ctx.fillRect(x, y, width, height);\n    });\n  }\n\n  private drawDeserts(ctx: CanvasRenderingContext2D): void {\n    ctx.fillStyle = \"#DEB887\"; // Sandy color\n\n    // Major deserts\n    const deserts = [\n      // Sahara\n      { x: 0.48, y: 0.45, width: 0.2, height: 0.08 },\n      // Gobi\n      { x: 0.75, y: 0.32, width: 0.12, height: 0.06 },\n      // Arabian\n      { x: 0.58, y: 0.42, width: 0.08, height: 0.06 },\n      // Mojave/Sonoran\n      { x: 0.15, y: 0.42, width: 0.08, height: 0.04 },\n    ];\n\n    deserts.forEach((desert) => {\n      const x = desert.x * this.width;\n      const y = desert.y * this.height;\n      const width = desert.width * this.width;\n      const height = desert.height * this.height;\n\n      ctx.fillRect(x, y, width, height);\n    });\n  }\n\n  private addRandomTerrain(ctx: CanvasRenderingContext2D): void {\n    // Add noise and detail to make it look more realistic\n    const imageData = ctx.getImageData(0, 0, this.width, this.height);\n    const data = imageData.data;\n\n    for (let i = 0; i < data.length; i += 4) {\n      const noise = (Math.random() - 0.5) * 40;\n\n      data[i] = Math.max(0, Math.min(255, data[i] + noise)); // Red\n      data[i + 1] = Math.max(0, Math.min(255, data[i + 1] + noise)); // Green\n      data[i + 2] = Math.max(0, Math.min(255, data[i + 2] + noise)); // Blue\n    }\n\n    ctx.putImageData(imageData, 0, 0);\n  }\n}\n"],"names":["EarthTextureGenerator","width","height","generateTexture","canvas","document","createElement","ctx","getContext","drawBaseLayer","drawContinents","drawMountains","drawDeserts","addRandomTerrain","texture","wrapS","wrapT","flipY","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","continents","x","y","forEach","continent","drawContinentShape","beginPath","ellipse","Math","PI","i","angle","offsetX","cos","random","offsetY","sin","moveTo","lineTo","closePath","fill","strokeStyle","lineWidth","stroke","mountains","range","deserts","desert","imageData","getImageData","data","length","noise","max","min","putImageData"],"mappings":"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"}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/Earth.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef, useMemo } from \"react\";\nimport { useFrame } from \"@react-three/fiber\";\nimport { Sphere } from \"@react-three/drei\";\nimport * as THREE from \"three\";\nimport { EarthTextureGenerator } from \"../utils/earthTexture\";\n\nexport function Earth() {\n  const earthRef = useRef<THREE.Mesh>(null);\n  const nightLightsRef = useRef<THREE.Mesh>(null);\n\n  // Generate realistic Earth texture using the modular system\n  const earthTexture = useMemo(() => {\n    const generator = new EarthTextureGenerator(4096, 2048); // Higher resolution\n    return generator.generateTexture();\n  }, []);\n\n  // Create night lights texture for cities\n  const nightTexture = useMemo(() => {\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\")!;\n    canvas.width = 2048;\n    canvas.height = 1024;\n\n    // Black background\n    ctx.fillStyle = \"#000000\";\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // Add city lights based on real city data\n    const cities = [\n      // Major urban areas with realistic light patterns\n      { x: 0.73, y: 0.42, size: 8 }, // Tokyo\n      { x: 0.89, y: 0.45, size: 6 }, // Seoul\n      { x: 0.77, y: 0.52, size: 7 }, // Mumbai\n      { x: 0.78, y: 0.48, size: 6 }, // Delhi\n      { x: 0.55, y: 0.45, size: 5 }, // Cairo\n      { x: 0.52, y: 0.35, size: 8 }, // London\n      { x: 0.48, y: 0.37, size: 6 }, // Paris\n      { x: 0.53, y: 0.38, size: 5 }, // Berlin\n      { x: 0.59, y: 0.25, size: 7 }, // Moscow\n      { x: 0.2, y: 0.4, size: 9 }, // New York\n      { x: 0.18, y: 0.52, size: 6 }, // Mexico City\n      { x: 0.12, y: 0.45, size: 7 }, // Los Angeles\n      { x: 0.25, y: 0.65, size: 8 }, // SÃ£o Paulo\n      { x: 0.26, y: 0.78, size: 6 }, // Buenos Aires\n      { x: 0.82, y: 0.78, size: 5 }, // Sydney\n      { x: 0.56, y: 0.68, size: 6 }, // Johannesburg\n    ];\n\n    cities.forEach((city) => {\n      const x = city.x * canvas.width;\n      const y = city.y * canvas.height;\n\n      // Create glow effect\n      const gradient = ctx.createRadialGradient(x, y, 0, x, y, city.size * 3);\n      gradient.addColorStop(0, \"#ffeb3b\");\n      gradient.addColorStop(0.3, \"#ff9800\");\n      gradient.addColorStop(0.6, \"#ff5722\");\n      gradient.addColorStop(1, \"transparent\");\n\n      ctx.fillStyle = gradient;\n      ctx.beginPath();\n      ctx.arc(x, y, city.size * 3, 0, Math.PI * 2);\n      ctx.fill();\n\n      // Bright center\n      ctx.fillStyle = \"#ffffff\";\n      ctx.beginPath();\n      ctx.arc(x, y, city.size * 0.5, 0, Math.PI * 2);\n      ctx.fill();\n    });\n\n    const texture = new THREE.CanvasTexture(canvas);\n    texture.wrapS = THREE.RepeatWrapping;\n    texture.wrapT = THREE.ClampToEdgeWrapping;\n    return texture;\n  }, []);\n\n  // Create normal map for surface detail\n  const normalTexture = useMemo(() => {\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\")!;\n    canvas.width = 1024;\n    canvas.height = 512;\n\n    // Create subtle bump mapping effect\n    const imageData = ctx.createImageData(canvas.width, canvas.height);\n    const data = imageData.data;\n\n    for (let i = 0; i < data.length; i += 4) {\n      const x = (i / 4) % canvas.width;\n      const y = Math.floor(i / 4 / canvas.width);\n\n      // Create height variation\n      const height = Math.sin(x * 0.02) * Math.sin(y * 0.02) * 0.5 + 0.5;\n      const normal = height * 255;\n\n      data[i] = normal; // Red - X normal\n      data[i + 1] = normal; // Green - Y normal\n      data[i + 2] = 255; // Blue - Z normal (pointing up)\n      data[i + 3] = 255; // Alpha\n    }\n\n    ctx.putImageData(imageData, 0, 0);\n\n    const texture = new THREE.CanvasTexture(canvas);\n    texture.wrapS = THREE.RepeatWrapping;\n    texture.wrapT = THREE.ClampToEdgeWrapping;\n    return texture;\n  }, []);\n\n  // Create dynamic day/night cycle\n  useFrame((state, delta) => {\n    if (earthRef.current && nightLightsRef.current) {\n      // Slow rotation\n      earthRef.current.rotation.y += delta * 0.02; // Slower, more realistic rotation\n      nightLightsRef.current.rotation.y += delta * 0.02;\n\n      // Calculate sun position based on time\n      const time = state.clock.getElapsedTime();\n      const sunAngle = (time * 0.1) % (Math.PI * 2); // Complete cycle every ~60 seconds\n\n      // Update directional light position (sun)\n      const sunX = Math.cos(sunAngle) * 5;\n      const sunY = Math.sin(sunAngle) * 2;\n      const sunZ = Math.sin(sunAngle) * 5;\n\n      // Find and update the directional light\n      state.scene.traverse((child) => {\n        if (child instanceof THREE.DirectionalLight) {\n          child.position.set(sunX, sunY, sunZ);\n          child.target.position.set(0, 0, 0);\n          child.target.updateMatrixWorld();\n\n          // Adjust intensity based on sun position\n          const intensity = Math.max(0.2, Math.sin(sunAngle) * 0.8 + 0.4);\n          child.intensity = intensity;\n        }\n      });\n\n      // Adjust night lights visibility based on sun position\n      const nightIntensity = Math.max(0, -Math.sin(sunAngle) * 0.8 + 0.2);\n      if (nightLightsRef.current.material instanceof THREE.Material) {\n        nightLightsRef.current.material.opacity = nightIntensity;\n      }\n    }\n  });\n\n  return (\n    <group>\n      {/* Main Earth sphere with realistic surface */}\n      <Sphere ref={earthRef} args={[1.98, 64, 32]}>\n        <meshPhongMaterial\n          map={earthTexture}\n          normalMap={normalTexture}\n          normalScale={new THREE.Vector2(0.3, 0.3)}\n          shininess={0.1}\n          transparent={false}\n        />\n      </Sphere>\n\n      {/* Night lights layer */}\n      <Sphere ref={nightLightsRef} args={[1.985, 64, 32]}>\n        <meshBasicMaterial\n          map={nightTexture}\n          transparent={true}\n          opacity={0}\n          blending={THREE.AdditiveBlending}\n        />\n      </Sphere>\n\n      {/* Subtle cloud layer for atmosphere effect */}\n      <Sphere args={[2.02, 32, 16]}>\n        <meshBasicMaterial color=\"#ffffff\" transparent={true} opacity={0.1} />\n      </Sphere>\n\n      {/* Atmospheric glow */}\n      <Sphere args={[2.1, 32, 16]}>\n        <meshBasicMaterial\n          color=\"#87CEEB\"\n          transparent={true}\n          opacity={0.05}\n          side={THREE.BackSide}\n        />\n      </Sphere>\n    </group>\n  );\n}\n"],"names":["Earth","earthRef","nightLightsRef","earthTexture","generator","generateTexture","nightTexture","canvas","document","createElement","ctx","getContext","width","height","fillStyle","fillRect","cities","x","y","size","forEach","city","gradient","createRadialGradient","addColorStop","beginPath","arc","Math","PI","fill","texture","wrapS","wrapT","normalTexture","imageData","createImageData","data","i","length","floor","sin","normal","putImageData","state","delta","current","rotation","time","clock","getElapsedTime","sunAngle","sunX","cos","sunY","sunZ","scene","traverse","child","position","set","target","updateMatrixWorld","intensity","max","nightIntensity","material","opacity","ref","args","map","normalMap","normalScale","shininess","transparent","blending","color","side"],"mappings":"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"}},
    {"offset": {"line": 545, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/utils/coordinates.ts"],"sourcesContent":["/**\n * Coordinate conversion utilities for geographic calculations\n * Compatible with both Cesium and general 3D applications\n */\n\n/**\n * Convert latitude/longitude to 3D Cartesian coordinates\n */\nexport function latLngToPosition(\n  lat: number,\n  lng: number,\n  radius: number = 1,\n): [number, number, number] {\n  const phi = (90 - lat) * (Math.PI / 180);\n  const theta = (lng + 180) * (Math.PI / 180);\n\n  const x = -(radius * Math.sin(phi) * Math.cos(theta));\n  const z = radius * Math.sin(phi) * Math.sin(theta);\n  const y = radius * Math.cos(phi);\n\n  return [x, y, z];\n}\n\n/**\n * Convert 3D Cartesian coordinates to latitude/longitude\n */\nexport function positionToLatLng(\n  x: number,\n  y: number,\n  z: number,\n): { lat: number; lng: number } {\n  const radius = Math.sqrt(x * x + y * y + z * z);\n  const lat = 90 - (Math.acos(y / radius) * 180) / Math.PI;\n  const lng = (Math.atan2(z, -x) * 180) / Math.PI - 180;\n\n  return { lat, lng };\n}\n\n/**\n * Calculate distance between two geographic points using Haversine formula\n */\nexport function calculateDistance(\n  lat1: number,\n  lon1: number,\n  lat2: number,\n  lon2: number,\n): number {\n  const R = 6371; // Earth's radius in kilometers\n  const dLat = ((lat2 - lat1) * Math.PI) / 180;\n  const dLon = ((lon2 - lon1) * Math.PI) / 180;\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos((lat1 * Math.PI) / 180) *\n      Math.cos((lat2 * Math.PI) / 180) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\n\n/**\n * Normalize longitude to [-180, 180] range\n */\nexport function normalizeLongitude(lng: number): number {\n  while (lng > 180) lng -= 360;\n  while (lng < -180) lng += 360;\n  return lng;\n}\n\n/**\n * Normalize latitude to [-90, 90] range\n */\nexport function normalizeLatitude(lat: number): number {\n  return Math.max(-90, Math.min(90, lat));\n}\n"],"names":["latLngToPosition","lat","lng","radius","phi","Math","PI","theta","x","sin","cos","z","y","positionToLatLng","sqrt","acos","atan2","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","dLon","a","c","normalizeLongitude","normalizeLatitude","max","min"],"mappings":"AAAA;;;CAGC,GAED;;CAEC;;;;;;;;;;;;AACM,SAASA,iBACdC,GAAW,EACXC,GAAW,EACXC,SAAiB,CAAC;IAElB,MAAMC,MAAM,CAAC,KAAKH,GAAG,IAAI,CAACI,KAAKC,EAAE,GAAG,GAAG;IACvC,MAAMC,QAAQ,CAACL,MAAM,GAAG,IAAI,CAACG,KAAKC,EAAE,GAAG,GAAG;IAE1C,MAAME,IAAI,CAAC,CAACL,SAASE,KAAKI,GAAG,CAACL,OAAOC,KAAKK,GAAG,CAACH,MAAM;IACpD,MAAMI,IAAIR,SAASE,KAAKI,GAAG,CAACL,OAAOC,KAAKI,GAAG,CAACF;IAC5C,MAAMK,IAAIT,SAASE,KAAKK,GAAG,CAACN;IAE5B,OAAO;QAACI;QAAGI;QAAGD;KAAE;AAClB;AAKO,SAASE,iBACdL,CAAS,EACTI,CAAS,EACTD,CAAS;IAET,MAAMR,SAASE,KAAKS,IAAI,CAACN,IAAIA,IAAII,IAAIA,IAAID,IAAIA;IAC7C,MAAMV,MAAM,KAAK,AAACI,KAAKU,IAAI,CAACH,IAAIT,UAAU,MAAOE,KAAKC,EAAE;IACxD,MAAMJ,MAAM,AAACG,KAAKW,KAAK,CAACL,GAAG,CAACH,KAAK,MAAOH,KAAKC,EAAE,GAAG;IAElD,OAAO;QAAEL;QAAKC;IAAI;AACpB;AAKO,SAASe,kBACdC,IAAY,EACZC,IAAY,EACZC,IAAY,EACZC,IAAY;IAEZ,MAAMC,IAAI,MAAM,+BAA+B;IAC/C,MAAMC,OAAO,AAAC,CAACH,OAAOF,IAAI,IAAIb,KAAKC,EAAE,GAAI;IACzC,MAAMkB,OAAO,AAAC,CAACH,OAAOF,IAAI,IAAId,KAAKC,EAAE,GAAI;IACzC,MAAMmB,IACJpB,KAAKI,GAAG,CAACc,OAAO,KAAKlB,KAAKI,GAAG,CAACc,OAAO,KACrClB,KAAKK,GAAG,CAAC,AAACQ,OAAOb,KAAKC,EAAE,GAAI,OAC1BD,KAAKK,GAAG,CAAC,AAACU,OAAOf,KAAKC,EAAE,GAAI,OAC5BD,KAAKI,GAAG,CAACe,OAAO,KAChBnB,KAAKI,GAAG,CAACe,OAAO;IACpB,MAAME,IAAI,IAAIrB,KAAKW,KAAK,CAACX,KAAKS,IAAI,CAACW,IAAIpB,KAAKS,IAAI,CAAC,IAAIW;IACrD,OAAOH,IAAII;AACb;AAKO,SAASC,mBAAmBzB,GAAW;IAC5C,MAAOA,MAAM,IAAKA,OAAO;IACzB,MAAOA,MAAM,CAAC,IAAKA,OAAO;IAC1B,OAAOA;AACT;AAKO,SAAS0B,kBAAkB3B,GAAW;IAC3C,OAAOI,KAAKwB,GAAG,CAAC,CAAC,IAAIxB,KAAKyB,GAAG,CAAC,IAAI7B;AACpC"}},
    {"offset": {"line": 606, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/stores/globe-store.ts"],"sourcesContent":["import { create } from \"zustand\";\nimport { subscribeWithSelector } from \"zustand/middleware\";\nimport type { GlobeState, RadioStation, StationMarker } from \"../types\";\nimport { latLngToPosition } from \"../utils/coordinates\";\n\n// Cesium-compatible camera position type\nexport interface CesiumCameraPosition {\n  longitude: number;\n  latitude: number;\n  height: number;\n  heading?: number;\n  pitch?: number;\n  roll?: number;\n}\n\ninterface GlobeStore extends GlobeState {\n  // Cesium-specific state\n  cesiumCameraPosition?: CesiumCameraPosition;\n\n  // Actions\n  selectStation: (station: RadioStation | null) => void;\n  hoverStation: (station: RadioStation | null) => void;\n  setCameraPosition: (position: [number, number, number]) => void;\n  setCesiumCameraPosition: (position: CesiumCameraPosition) => void;\n  setAutoRotating: (isAutoRotating: boolean) => void;\n  addMarker: (station: RadioStation) => void;\n  removeMarker: (stationId: string) => void;\n  updateMarkerVisibility: (stationId: string, isVisible: boolean) => void;\n  getStationsByRegion: (region: string) => RadioStation[];\n  searchStations: (query: string) => RadioStation[];\n}\n\nexport const useGlobeStore = create<GlobeStore>()(\n  subscribeWithSelector((set, get) => ({\n    // Initial state\n    selectedStation: null,\n    hoveredStation: null,\n    cameraPosition: [0, 0, 2.5],\n    isAutoRotating: true,\n    markers: [],\n\n    // Actions\n    selectStation: (station) => {\n      set((state) => ({\n        selectedStation: station,\n        markers: state.markers.map((marker) => ({\n          ...marker,\n          isSelected: marker.station.id === station?.id,\n        })),\n      }));\n    },\n\n    hoverStation: (station) => {\n      set((state) => ({\n        hoveredStation: station,\n        markers: state.markers.map((marker) => ({\n          ...marker,\n          isHovered: marker.station.id === station?.id,\n        })),\n      }));\n    },\n\n    setCameraPosition: (position) => {\n      set({ cameraPosition: position });\n    },\n\n    setCesiumCameraPosition: (position) => {\n      set({\n        cesiumCameraPosition: position,\n        // Also update legacy camera position for compatibility\n        cameraPosition: [\n          position.longitude,\n          position.latitude,\n          position.height,\n        ],\n      });\n    },\n\n    setAutoRotating: (isAutoRotating) => {\n      set({ isAutoRotating });\n    },\n\n    addMarker: (station) => {\n      const position = latLngToPosition(\n        station.location.lat,\n        station.location.lng,\n      );\n      const marker: StationMarker = {\n        station,\n        position,\n        isVisible: true,\n        isHovered: false,\n        isSelected: false,\n      };\n\n      set((state) => ({\n        markers: [\n          ...state.markers.filter((m) => m.station.id !== station.id),\n          marker,\n        ],\n      }));\n    },\n\n    removeMarker: (stationId) => {\n      set((state) => ({\n        markers: state.markers.filter((m) => m.station.id !== stationId),\n      }));\n    },\n\n    updateMarkerVisibility: (stationId, isVisible) => {\n      set((state) => ({\n        markers: state.markers.map((marker) =>\n          marker.station.id === stationId ? { ...marker, isVisible } : marker,\n        ),\n      }));\n    },\n\n    getStationsByRegion: (region: string) => {\n      const { markers } = get();\n      return markers\n        .filter(\n          (marker) =>\n            marker.station.location.country\n              .toLowerCase()\n              .includes(region.toLowerCase()) ||\n            marker.station.location.city\n              .toLowerCase()\n              .includes(region.toLowerCase()),\n        )\n        .map((marker) => marker.station);\n    },\n\n    searchStations: (query: string) => {\n      const { markers } = get();\n      const searchTerm = query.toLowerCase();\n      return markers\n        .filter(\n          (marker) =>\n            marker.station.name.toLowerCase().includes(searchTerm) ||\n            marker.station.location.city.toLowerCase().includes(searchTerm) ||\n            marker.station.location.country\n              .toLowerCase()\n              .includes(searchTerm) ||\n            marker.station.genre.toLowerCase().includes(searchTerm) ||\n            marker.station.language.toLowerCase().includes(searchTerm),\n        )\n        .map((marker) => marker.station);\n    },\n  })),\n);\n\n// Subscribe to state changes for analytics or side effects\nuseGlobeStore.subscribe(\n  (state) => state.selectedStation,\n  (selectedStation) => {\n    if (selectedStation) {\n      console.log(\"Station selected:\", selectedStation.name);\n      // Track analytics, update URL, etc.\n    }\n  },\n);\n"],"names":["useGlobeStore","set","get","selectedStation","hoveredStation","cameraPosition","isAutoRotating","markers","selectStation","station","state","map","marker","isSelected","id","hoverStation","isHovered","setCameraPosition","position","setCesiumCameraPosition","cesiumCameraPosition","longitude","latitude","height","setAutoRotating","addMarker","location","lat","lng","isVisible","filter","m","removeMarker","stationId","updateMarkerVisibility","getStationsByRegion","region","country","toLowerCase","includes","city","searchStations","query","searchTerm","name","genre","language","subscribe","console","log"],"mappings":"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"}},
    {"offset": {"line": 720, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/StationMarkers.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef } from \"react\";\nimport { useFrame, useThree } from \"@react-three/fiber\";\nimport { useGlobeStore } from \"../stores/globe-store\";\nimport * as THREE from \"three\";\n\nexport function StationMarkers() {\n  const markersRef = useRef<THREE.Group>(null);\n  const { markers, selectStation, hoverStation } = useGlobeStore();\n  const { camera } = useThree();\n\n  useFrame(() => {\n    if (!markersRef.current) return;\n\n    // Update marker facing direction to camera\n    markersRef.current.children.forEach((marker) => {\n      marker.lookAt(camera.position);\n    });\n  });\n\n  return (\n    <group ref={markersRef}>\n      {markers.map((marker) => {\n        if (!marker.isVisible) return null;\n\n        return (\n          <group\n            key={marker.station.id}\n            position={marker.position}\n            onClick={(e) => {\n              e.stopPropagation();\n              selectStation(marker.station);\n            }}\n            onPointerOver={(e) => {\n              e.stopPropagation();\n              hoverStation(marker.station);\n              document.body.style.cursor = \"pointer\";\n            }}\n            onPointerOut={() => {\n              hoverStation(null);\n              document.body.style.cursor = \"auto\";\n            }}\n          >\n            {/* Station marker */}\n            <mesh>\n              <circleGeometry args={[0.03, 16]} />\n              <meshBasicMaterial\n                color={\n                  marker.isSelected\n                    ? \"#00ff88\"\n                    : marker.isHovered\n                      ? \"#88ccff\"\n                      : \"#ff6b6b\"\n                }\n                transparent\n                opacity={marker.isHovered || marker.isSelected ? 1 : 0.9}\n              />\n            </mesh>\n\n            {/* Inner glow */}\n            <mesh>\n              <circleGeometry args={[0.015, 16]} />\n              <meshBasicMaterial\n                color={marker.isSelected ? \"#ffffff\" : \"#ffffff\"}\n                transparent\n                opacity={0.8}\n              />\n            </mesh>\n\n            {/* Pulsing ring for selected station */}\n            {marker.isSelected && (\n              <mesh>\n                <ringGeometry args={[0.04, 0.06, 16]} />\n                <meshBasicMaterial\n                  color=\"#00ff88\"\n                  transparent\n                  opacity={0.6}\n                  side={THREE.DoubleSide}\n                />\n              </mesh>\n            )}\n\n            {/* Hover ring */}\n            {marker.isHovered && !marker.isSelected && (\n              <mesh>\n                <ringGeometry args={[0.035, 0.045, 16]} />\n                <meshBasicMaterial\n                  color=\"#88ccff\"\n                  transparent\n                  opacity={0.5}\n                  side={THREE.DoubleSide}\n                />\n              </mesh>\n            )}\n          </group>\n        );\n      })}\n    </group>\n  );\n}\n"],"names":["StationMarkers","markersRef","markers","selectStation","hoverStation","camera","current","children","forEach","marker","lookAt","position","ref","map","isVisible","onClick","e","stopPropagation","station","onPointerOver","document","body","style","cursor","onPointerOut","args","color","isSelected","isHovered","transparent","opacity","side","id"],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;;;AALA;;;;;AAOO,SAASA;;IACd,MAAMC,aAAa,IAAA,sLAAM,EAAc;IACvC,MAAM,EAAEC,OAAO,EAAEC,aAAa,EAAEC,YAAY,EAAE,GAAG,IAAA,kKAAa;IAC9D,MAAM,EAAEC,MAAM,EAAE,GAAG,IAAA,8NAAQ;IAE3B,IAAA,8NAAQ;mCAAC;YACP,IAAI,CAACJ,WAAWK,OAAO,EAAE;YAEzB,2CAA2C;YAC3CL,WAAWK,OAAO,CAACC,QAAQ,CAACC,OAAO;2CAAC,CAACC;oBACnCA,OAAOC,MAAM,CAACL,OAAOM,QAAQ;gBAC/B;;QACF;;IAEA,qBACE,4MAAC;QAAMC,KAAKX;kBACTC,QAAQW,GAAG,CAAC,CAACJ;YACZ,IAAI,CAACA,OAAOK,SAAS,EAAE,OAAO;YAE9B,qBACE,4MAAC;gBAECH,UAAUF,OAAOE,QAAQ;gBACzBI,SAAS,CAACC;oBACRA,EAAEC,eAAe;oBACjBd,cAAcM,OAAOS,OAAO;gBAC9B;gBACAC,eAAe,CAACH;oBACdA,EAAEC,eAAe;oBACjBb,aAAaK,OAAOS,OAAO;oBAC3BE,SAASC,IAAI,CAACC,KAAK,CAACC,MAAM,GAAG;gBAC/B;gBACAC,cAAc;oBACZpB,aAAa;oBACbgB,SAASC,IAAI,CAACC,KAAK,CAACC,MAAM,GAAG;gBAC/B;;kCAGA,4MAAC;;0CACC,4MAAC;gCAAeE,MAAM;oCAAC;oCAAM;iCAAG;;;;;;0CAChC,4MAAC;gCACCC,OACEjB,OAAOkB,UAAU,GACb,YACAlB,OAAOmB,SAAS,GACd,YACA;gCAERC,WAAW;gCACXC,SAASrB,OAAOmB,SAAS,IAAInB,OAAOkB,UAAU,GAAG,IAAI;;;;;;;;;;;;kCAKzD,4MAAC;;0CACC,4MAAC;gCAAeF,MAAM;oCAAC;oCAAO;iCAAG;;;;;;0CACjC,4MAAC;gCACCC,OAAOjB,OAAOkB,UAAU,GAAG,YAAY;gCACvCE,WAAW;gCACXC,SAAS;;;;;;;;;;;;oBAKZrB,OAAOkB,UAAU,kBAChB,4MAAC;;0CACC,4MAAC;gCAAaF,MAAM;oCAAC;oCAAM;oCAAM;iCAAG;;;;;;0CACpC,4MAAC;gCACCC,OAAM;gCACNG,WAAW;gCACXC,SAAS;gCACTC,MAAM,gKAAgB;;;;;;;;;;;;oBAM3BtB,OAAOmB,SAAS,IAAI,CAACnB,OAAOkB,UAAU,kBACrC,4MAAC;;0CACC,4MAAC;gCAAaF,MAAM;oCAAC;oCAAO;oCAAO;iCAAG;;;;;;0CACtC,4MAAC;gCACCC,OAAM;gCACNG,WAAW;gCACXC,SAAS;gCACTC,MAAM,gKAAgB;;;;;;;;;;;;;eA/DvBtB,OAAOS,OAAO,CAACc,EAAE;;;;;QAqE5B;;;;;;AAGN;GA7FgBhC;;QAEmC,kKAAa;QAC3C,8NAAQ;QAE3B,8NAAQ;;;KALMA"}},
    {"offset": {"line": 915, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/GlobeControls.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef, useEffect, useState } from \"react\";\nimport { useThree, useFrame } from \"@react-three/fiber\";\nimport { OrbitControls } from \"@react-three/drei\";\nimport { useGlobeStore } from \"../stores/globe-store\";\n\nexport function GlobeControls() {\n  const controlsRef = useRef<any>();\n  const { camera } = useThree();\n  const { isAutoRotating, setCameraPosition } = useGlobeStore();\n  const [isMobile, setIsMobile] = useState(false);\n\n  // Detect mobile device\n  useEffect(() => {\n    const checkIfMobile = () => {\n      setIsMobile(window.innerWidth < 768 || \"ontouchstart\" in window);\n    };\n\n    checkIfMobile();\n    window.addEventListener(\"resize\", checkIfMobile);\n    return () => window.removeEventListener(\"resize\", checkIfMobile);\n  }, []);\n\n  useFrame(() => {\n    if (controlsRef.current) {\n      // Update camera position in store\n      setCameraPosition([\n        camera.position.x,\n        camera.position.y,\n        camera.position.z,\n      ]);\n    }\n  });\n\n  return (\n    <OrbitControls\n      ref={controlsRef}\n      enablePan={false}\n      enableZoom={true}\n      enableRotate={true}\n      autoRotate={isAutoRotating}\n      autoRotateSpeed={isMobile ? 0.3 : 0.5}\n      minDistance={isMobile ? 2.5 : 1.5}\n      maxDistance={isMobile ? 8 : 5}\n      minPolarAngle={Math.PI / 6}\n      maxPolarAngle={Math.PI - Math.PI / 6}\n      zoomSpeed={isMobile ? 1.2 : 0.8}\n      rotateSpeed={isMobile ? 0.8 : 0.5}\n      enableDamping={true}\n      dampingFactor={isMobile ? 0.1 : 0.05}\n      touches={{\n        ONE: isMobile ? 2 : 2, // ROTATE\n        TWO: isMobile ? 1 : 1, // DOLLY/ZOOM\n      }}\n      mouseButtons={{\n        LEFT: 2, // ROTATE\n        MIDDLE: 1, // DOLLY\n        RIGHT: undefined, // No right-click action\n      }}\n    />\n  );\n}\n"],"names":["GlobeControls","controlsRef","camera","isAutoRotating","setCameraPosition","isMobile","setIsMobile","checkIfMobile","window","innerWidth","addEventListener","removeEventListener","current","position","x","y","z","ref","enablePan","enableZoom","enableRotate","autoRotate","autoRotateSpeed","minDistance","maxDistance","minPolarAngle","Math","PI","maxPolarAngle","zoomSpeed","rotateSpeed","enableDamping","dampingFactor","touches","ONE","TWO","mouseButtons","LEFT","MIDDLE","RIGHT","undefined"],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;;;AALA;;;;;AAOO,SAASA;;IACd,MAAMC,cAAc,IAAA,sLAAM;IAC1B,MAAM,EAAEC,MAAM,EAAE,GAAG,IAAA,8NAAQ;IAC3B,MAAM,EAAEC,cAAc,EAAEC,iBAAiB,EAAE,GAAG,IAAA,kKAAa;IAC3D,MAAM,CAACC,UAAUC,YAAY,GAAG,IAAA,wLAAQ,EAAC;IAEzC,uBAAuB;IACvB,IAAA,yLAAS;mCAAC;YACR,MAAMC;yDAAgB;oBACpBD,YAAYE,OAAOC,UAAU,GAAG,OAAO,kBAAkBD;gBAC3D;;YAEAD;YACAC,OAAOE,gBAAgB,CAAC,UAAUH;YAClC;2CAAO,IAAMC,OAAOG,mBAAmB,CAAC,UAAUJ;;QACpD;kCAAG,EAAE;IAEL,IAAA,8NAAQ;kCAAC;YACP,IAAIN,YAAYW,OAAO,EAAE;gBACvB,kCAAkC;gBAClCR,kBAAkB;oBAChBF,OAAOW,QAAQ,CAACC,CAAC;oBACjBZ,OAAOW,QAAQ,CAACE,CAAC;oBACjBb,OAAOW,QAAQ,CAACG,CAAC;iBAClB;YACH;QACF;;IAEA,qBACE,4MAAC,qLAAa;QACZC,KAAKhB;QACLiB,WAAW;QACXC,YAAY;QACZC,cAAc;QACdC,YAAYlB;QACZmB,iBAAiBjB,WAAW,MAAM;QAClCkB,aAAalB,WAAW,MAAM;QAC9BmB,aAAanB,WAAW,IAAI;QAC5BoB,eAAeC,KAAKC,EAAE,GAAG;QACzBC,eAAeF,KAAKC,EAAE,GAAGD,KAAKC,EAAE,GAAG;QACnCE,WAAWxB,WAAW,MAAM;QAC5ByB,aAAazB,WAAW,MAAM;QAC9B0B,eAAe;QACfC,eAAe3B,WAAW,MAAM;QAChC4B,SAAS;YACPC,KAAK7B,WAAW,IAAI;YACpB8B,KAAK9B,WAAW,IAAI;QACtB;QACA+B,cAAc;YACZC,MAAM;YACNC,QAAQ;YACRC,OAAOC;QACT;;;;;;AAGN;GAvDgBxC;;QAEK,8NAAQ;QACmB,kKAAa;QAc3D,8NAAQ;;;KAjBMA"}},
    {"offset": {"line": 1012, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/services/radioDiscoveryService.ts"],"sourcesContent":["import { RadioStation } from \"../types/index\";\n\n/**\n * Enhanced Radio Discovery Service\n * Integrates with public APIs and maintains a curated list of global radio stations\n */\nexport class RadioDiscoveryService {\n  private baseUrl = \"https://de1.api.radio-browser.info/json\";\n  private cache = new Map<string, any>();\n  private cacheExpiry = 5 * 60 * 1000; // 5 minutes\n\n  /**\n   * Search radio stations from Radio Browser API\n   */\n  async searchOnlineStations(\n    query: string,\n    limit: number = 50,\n  ): Promise<RadioStation[]> {\n    const cacheKey = `search:${query}:${limit}`;\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await fetch(`${this.baseUrl}/stations/search`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"User-Agent\": \"RadioGlobe/1.0.0\",\n        },\n        body: JSON.stringify({\n          name: query,\n          limit,\n          hidebroken: true,\n          order: \"clickcount\",\n          reverse: true,\n        }),\n      });\n\n      if (!response.ok) throw new Error(\"Failed to fetch stations\");\n\n      const data = await response.json();\n      const stations = this.mapRadioBrowserStations(data);\n\n      this.setCache(cacheKey, stations);\n      return stations;\n    } catch (error) {\n      console.warn(\"Failed to fetch online stations:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Get stations by country from Radio Browser API\n   */\n  async getStationsByCountry(\n    countryCode: string,\n    limit: number = 100,\n  ): Promise<RadioStation[]> {\n    const cacheKey = `country:${countryCode}:${limit}`;\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await fetch(\n        `${this.baseUrl}/stations/bycountrycodeexact/${countryCode}?limit=${limit}&hidebroken=true&order=clickcount&reverse=true`,\n      );\n\n      if (!response.ok) throw new Error(\"Failed to fetch country stations\");\n\n      const data = await response.json();\n      const stations = this.mapRadioBrowserStations(data);\n\n      this.setCache(cacheKey, stations);\n      return stations;\n    } catch (error) {\n      console.warn(\"Failed to fetch country stations:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Get top stations globally\n   */\n  async getTopStations(limit: number = 100): Promise<RadioStation[]> {\n    const cacheKey = `top:${limit}`;\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await fetch(`${this.baseUrl}/stations/topvote/${limit}`);\n\n      if (!response.ok) throw new Error(\"Failed to fetch top stations\");\n\n      const data = await response.json();\n      const stations = this.mapRadioBrowserStations(data);\n\n      this.setCache(cacheKey, stations);\n      return stations;\n    } catch (error) {\n      console.warn(\"Failed to fetch top stations:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Get stations by tag/genre\n   */\n  async getStationsByTag(\n    tag: string,\n    limit: number = 50,\n  ): Promise<RadioStation[]> {\n    const cacheKey = `tag:${tag}:${limit}`;\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await fetch(\n        `${this.baseUrl}/stations/bytag/${encodeURIComponent(tag)}?limit=${limit}&hidebroken=true&order=clickcount&reverse=true`,\n      );\n\n      if (!response.ok) throw new Error(\"Failed to fetch stations by tag\");\n\n      const data = await response.json();\n      const stations = this.mapRadioBrowserStations(data);\n\n      this.setCache(cacheKey, stations);\n      return stations;\n    } catch (error) {\n      console.warn(\"Failed to fetch stations by tag:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Get stations by city from Radio Browser API\n   */\n  async getStationsByCity(\n    city: string,\n    limit: number = 50,\n  ): Promise<RadioStation[]> {\n    const cacheKey = `city:${city}:${limit}`;\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await fetch(\n        `${this.baseUrl}/stations/bycity/${encodeURIComponent(city)}?limit=${limit}&hidebroken=true&order=clickcount&reverse=true`,\n      );\n\n      if (!response.ok) throw new Error(\"Failed to fetch city stations\");\n\n      const data = await response.json();\n      const stations = this.mapRadioBrowserStations(data);\n\n      this.setCache(cacheKey, stations);\n      return stations;\n    } catch (error) {\n      console.warn(\"Failed to fetch city stations:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Get available countries\n   */\n  async getCountries(): Promise<\n    Array<{ name: string; iso: string; stationcount: number }>\n  > {\n    const cacheKey = \"countries\";\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await fetch(`${this.baseUrl}/countries?hidebroken=true`);\n\n      if (!response.ok) throw new Error(\"Failed to fetch countries\");\n\n      const data = await response.json();\n      this.setCache(cacheKey, data, 60 * 60 * 1000); // Cache for 1 hour\n      return data;\n    } catch (error) {\n      console.warn(\"Failed to fetch countries:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Get available tags/genres\n   */\n  async getTags(): Promise<Array<{ name: string; stationcount: number }>> {\n    const cacheKey = \"tags\";\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n\n    try {\n      const response = await fetch(\n        `${this.baseUrl}/tags?hidebroken=true&order=stationcount&reverse=true`,\n      );\n\n      if (!response.ok) throw new Error(\"Failed to fetch tags\");\n\n      const data = await response.json();\n      this.setCache(cacheKey, data, 60 * 60 * 1000); // Cache for 1 hour\n      return data;\n    } catch (error) {\n      console.warn(\"Failed to fetch tags:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Map Radio Browser API response to our RadioStation format\n   */\n  private mapRadioBrowserStations(data: any[]): RadioStation[] {\n    return data\n      .filter((station) => station.url && station.name)\n      .map((station, index) => {\n        let lat = parseFloat(station.geo_lat) || 0;\n        let lng = parseFloat(station.geo_long) || 0;\n\n        // If no coordinates, assign default location based on country\n        if (lat === 0 && lng === 0) {\n          const defaultCoords = this.getDefaultCountryCoordinates(\n            station.country,\n          );\n          lat = defaultCoords.lat + (Math.random() - 0.5) * 2; // Add small random offset\n          lng = defaultCoords.lng + (Math.random() - 0.5) * 2;\n        }\n\n        return {\n          id: station.stationuuid || `station-${index}`,\n          name: station.name || \"Unknown Station\",\n          url: station.url,\n          location: {\n            city: station.state || \"Unknown\",\n            country: station.country || \"Unknown\",\n            lat,\n            lng,\n          },\n          genre: station.tags || station.genre || \"Various\",\n          language: station.language || \"Unknown\",\n          listeners: station.clickcount || 0,\n          bitrate: station.bitrate || 128,\n          description: station.homepage || \"\",\n          isPublic: true,\n          source: \"radio-browser\" as const,\n        };\n      })\n      .filter(\n        (station) => station.location.lat !== 0 || station.location.lng !== 0,\n      ); // Filter out stations without coordinates\n  }\n\n  /**\n   * Cache management\n   */\n  private getFromCache(key: string): any {\n    const cached = this.cache.get(key);\n    if (cached && Date.now() - cached.timestamp < this.cacheExpiry) {\n      return cached.data;\n    }\n    return null;\n  }\n\n  private setCache(key: string, data: any, customExpiry?: number): void {\n    this.cache.set(key, {\n      data,\n      timestamp: Date.now(),\n      expiry: customExpiry || this.cacheExpiry,\n    });\n  }\n\n  /**\n   * Get default coordinates for a country\n   */\n  private getDefaultCountryCoordinates(country: string): {\n    lat: number;\n    lng: number;\n  } {\n    const countryDefaults: { [key: string]: { lat: number; lng: number } } = {\n      Germany: { lat: 51.1657, lng: 10.4515 },\n      \"United States\": { lat: 39.8283, lng: -98.5795 },\n      USA: { lat: 39.8283, lng: -98.5795 },\n      \"United Kingdom\": { lat: 55.3781, lng: -3.436 },\n      UK: { lat: 55.3781, lng: -3.436 },\n      France: { lat: 46.2276, lng: 2.2137 },\n      Italy: { lat: 41.8719, lng: 12.5674 },\n      Spain: { lat: 40.4637, lng: -3.7492 },\n      Canada: { lat: 56.1304, lng: -106.3468 },\n      Australia: { lat: -25.2744, lng: 133.7751 },\n      Japan: { lat: 36.2048, lng: 138.2529 },\n      Brazil: { lat: -14.235, lng: -51.9253 },\n      Netherlands: { lat: 52.1326, lng: 5.2913 },\n      Austria: { lat: 47.5162, lng: 14.5501 },\n      Switzerland: { lat: 46.8182, lng: 8.2275 },\n    };\n\n    return countryDefaults[country] || { lat: 0, lng: 0 };\n  }\n\n  /**\n   * Calculate distance between two coordinates\n   */\n  private calculateDistance(\n    lat1: number,\n    lon1: number,\n    lat2: number,\n    lon2: number,\n  ): number {\n    const R = 6371; // Earth's radius in kilometers\n    const dLat = ((lat2 - lat1) * Math.PI) / 180;\n    const dLon = ((lon2 - lon1) * Math.PI) / 180;\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos((lat1 * Math.PI) / 180) *\n        Math.cos((lat2 * Math.PI) / 180) *\n        Math.sin(dLon / 2) *\n        Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n}\n\n// Singleton instance\nexport const radioDiscoveryService = new RadioDiscoveryService();\n"],"names":["RadioDiscoveryService","baseUrl","cache","Map","cacheExpiry","searchOnlineStations","query","limit","cacheKey","cached","getFromCache","response","fetch","method","headers","body","JSON","stringify","name","hidebroken","order","reverse","ok","Error","data","json","stations","mapRadioBrowserStations","setCache","error","console","warn","getStationsByCountry","countryCode","getTopStations","getStationsByTag","tag","encodeURIComponent","getStationsByCity","city","getCountries","getTags","filter","station","url","map","index","lat","parseFloat","geo_lat","lng","geo_long","defaultCoords","getDefaultCountryCoordinates","country","Math","random","id","stationuuid","location","state","genre","tags","language","listeners","clickcount","bitrate","description","homepage","isPublic","source","key","get","Date","now","timestamp","customExpiry","set","expiry","countryDefaults","Germany","USA","UK","France","Italy","Spain","Canada","Australia","Japan","Brazil","Netherlands","Austria","Switzerland","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","PI","dLon","a","sin","cos","c","atan2","sqrt","radioDiscoveryService"],"mappings":"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"}},
    {"offset": {"line": 1296, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/Globe.tsx"],"sourcesContent":["\"use client\";\n\nimport { Canvas } from \"@react-three/fiber\";\nimport { Suspense, useEffect } from \"react\";\nimport { Earth } from \"./Earth\";\nimport { StationMarkers } from \"./StationMarkers\";\nimport { GlobeControls } from \"./GlobeControls\";\nimport { Stars } from \"@react-three/drei\";\nimport { useGlobeStore } from \"../stores/globe-store\";\nimport { radioDiscoveryService } from \"../services/radioDiscoveryService\";\nimport { latLngToPosition } from \"../utils/coordinates\";\n\nexport function Globe() {\n  const { addMarker } = useGlobeStore();\n\n  // Load radio stations when component mounts\n  useEffect(() => {\n    const loadStations = async () => {\n      try {\n        console.log(\"Loading radio stations...\");\n        const stations = await radioDiscoveryService.getTopStations(100);\n        console.log(\"Loaded stations:\", stations.length);\n        \n        stations.forEach((station) => {\n          console.log(\"Adding station:\", station.name, station.location);\n          addMarker(station);\n        });\n      } catch (error) {\n        console.error(\"Failed to load stations:\", error);\n      }\n    };\n\n    loadStations();\n  }, [addMarker]);\n\n  return (\n    <Canvas\n      camera={{\n        position: [0, 0, 2.5],\n        fov: 75,\n        near: 0.1,\n        far: 1000,\n      }}\n      gl={{\n        antialias: true,\n        alpha: true,\n        powerPreference: \"high-performance\",\n      }}\n    >\n      <Suspense fallback={null}>\n        {/* Dynamic Lighting for Day/Night Cycle */}\n        <ambientLight intensity={0.15} />\n        <directionalLight\n          position={[5, 2, 5]}\n          intensity={0.8}\n          castShadow\n          shadow-mapSize-width={2048}\n          shadow-mapSize-height={2048}\n          shadow-camera-far={50}\n          shadow-camera-left={-10}\n          shadow-camera-right={10}\n          shadow-camera-top={10}\n          shadow-camera-bottom={-10}\n        />\n\n        {/* Rim lighting for atmospheric effect */}\n        <pointLight position={[-10, -10, -10]} intensity={0.1} />\n\n        {/* Background stars */}\n        <Stars\n          radius={300}\n          depth={60}\n          count={20000}\n          factor={7}\n          saturation={0}\n          fade\n        />\n\n        {/* Earth */}\n        <Earth />\n\n        {/* Radio Station Markers */}\n        <StationMarkers />\n\n        {/* Camera Controls */}\n        <GlobeControls />\n      </Suspense>\n    </Canvas>\n  );\n}\n"],"names":["Globe","addMarker","loadStations","console","log","stations","getTopStations","length","forEach","station","name","location","error","camera","position","fov","near","far","gl","antialias","alpha","powerPreference","fallback","intensity","castShadow","radius","depth","count","factor","saturation","fade"],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AATA;;;;;;;;;AAYO,SAASA;;IACd,MAAM,EAAEC,SAAS,EAAE,GAAG,IAAA,kKAAa;IAEnC,4CAA4C;IAC5C,IAAA,yLAAS;2BAAC;YACR,MAAMC;gDAAe;oBACnB,IAAI;wBACFC,QAAQC,GAAG,CAAC;wBACZ,MAAMC,WAAW,MAAM,mLAAqB,CAACC,cAAc,CAAC;wBAC5DH,QAAQC,GAAG,CAAC,oBAAoBC,SAASE,MAAM;wBAE/CF,SAASG,OAAO;4DAAC,CAACC;gCAChBN,QAAQC,GAAG,CAAC,mBAAmBK,QAAQC,IAAI,EAAED,QAAQE,QAAQ;gCAC7DV,UAAUQ;4BACZ;;oBACF,EAAE,OAAOG,OAAO;wBACdT,QAAQS,KAAK,CAAC,4BAA4BA;oBAC5C;gBACF;;YAEAV;QACF;0BAAG;QAACD;KAAU;IAEd,qBACE,4MAAC,gNAAM;QACLY,QAAQ;YACNC,UAAU;gBAAC;gBAAG;gBAAG;aAAI;YACrBC,KAAK;YACLC,MAAM;YACNC,KAAK;QACP;QACAC,IAAI;YACFC,WAAW;YACXC,OAAO;YACPC,iBAAiB;QACnB;kBAEA,cAAA,4MAAC,wLAAQ;YAACC,UAAU;;8BAElB,4MAAC;oBAAaC,WAAW;;;;;;8BACzB,4MAAC;oBACCT,UAAU;wBAAC;wBAAG;wBAAG;qBAAE;oBACnBS,WAAW;oBACXC,UAAU;oBACV,wBAAsB;oBACtB,yBAAuB;oBACvB,qBAAmB;oBACnB,sBAAoB,CAAC;oBACrB,uBAAqB;oBACrB,qBAAmB;oBACnB,wBAAsB,CAAC;;;;;;8BAIzB,4MAAC;oBAAWV,UAAU;wBAAC,CAAC;wBAAI,CAAC;wBAAI,CAAC;qBAAG;oBAAES,WAAW;;;;;;8BAGlD,4MAAC,qKAAK;oBACJE,QAAQ;oBACRC,OAAO;oBACPC,OAAO;oBACPC,QAAQ;oBACRC,YAAY;oBACZC,IAAI;;;;;;8BAIN,4MAAC,sJAAK;;;;;8BAGN,4MAAC,wKAAc;;;;;8BAGf,4MAAC,sKAAa;;;;;;;;;;;;;;;;AAItB;GA7EgB9B;;QACQ,kKAAa;;;KADrBA"}},
    {"offset": {"line": 1460, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/services/audioService.ts"],"sourcesContent":["import { RadioStation } from \"../types\";\n\nexport type AudioState = \"idle\" | \"loading\" | \"playing\" | \"paused\" | \"error\";\n\nexport interface AudioPlayerConfig {\n  volume: number;\n  crossOrigin: \"anonymous\" | \"use-credentials\";\n  preload: \"none\" | \"metadata\" | \"auto\";\n  retryAttempts: number;\n  retryDelay: number;\n}\n\nexport interface AudioPlayerEvents {\n  stateChange: (state: AudioState) => void;\n  error: (error: string) => void;\n  loadStart: () => void;\n  canPlay: () => void;\n  volumeChange: (volume: number) => void;\n  timeUpdate: (currentTime: number) => void;\n}\n\nexport class AudioService {\n  private audio: HTMLAudioElement | null = null;\n  private state: AudioState = \"idle\";\n  private config: AudioPlayerConfig;\n  private listeners: Partial<AudioPlayerEvents> = {};\n  private retryCount = 0;\n  private currentStation: RadioStation | null = null;\n  private lastTimeUpdate = 0;\n  private readonly TIME_UPDATE_THROTTLE = 100; // ms\n\n  constructor(config: Partial<AudioPlayerConfig> = {}) {\n    this.config = {\n      volume: 0.7,\n      crossOrigin: \"anonymous\",\n      preload: \"none\",\n      retryAttempts: 3,\n      retryDelay: 2000,\n      ...config,\n    };\n\n    this.initializeAudio();\n  }\n\n  private initializeAudio() {\n    this.audio = new Audio();\n    this.audio.volume = this.config.volume;\n    this.audio.crossOrigin = this.config.crossOrigin;\n    this.audio.preload = this.config.preload;\n\n    // Set up event listeners\n    this.audio.addEventListener(\"loadstart\", this.handleLoadStart.bind(this));\n    this.audio.addEventListener(\"canplay\", this.handleCanPlay.bind(this));\n    this.audio.addEventListener(\"play\", this.handlePlay.bind(this));\n    this.audio.addEventListener(\"pause\", this.handlePause.bind(this));\n    this.audio.addEventListener(\"error\", this.handleError.bind(this));\n    this.audio.addEventListener(\n      \"volumechange\",\n      this.handleVolumeChange.bind(this),\n    );\n    this.audio.addEventListener(\"timeupdate\", this.handleTimeUpdate.bind(this));\n  }\n\n  private handleLoadStart() {\n    this.setState(\"loading\");\n    this.listeners.loadStart?.();\n  }\n\n  private handleCanPlay() {\n    this.setState(\"paused\");\n    this.listeners.canPlay?.();\n  }\n\n  private handlePlay() {\n    this.setState(\"playing\");\n  }\n\n  private handlePause() {\n    this.setState(\"paused\");\n  }\n\n  private handleError() {\n    this.setState(\"error\");\n    const errorMessage = this.getErrorMessage();\n    this.listeners.error?.(errorMessage);\n\n    // Attempt retry if configured\n    if (this.retryCount < this.config.retryAttempts) {\n      this.scheduleRetry();\n    }\n  }\n\n  private handleVolumeChange() {\n    if (this.audio) {\n      this.listeners.volumeChange?.(this.audio.volume);\n    }\n  }\n\n  private handleTimeUpdate() {\n    if (this.audio) {\n      const now = Date.now();\n      if (now - this.lastTimeUpdate >= this.TIME_UPDATE_THROTTLE) {\n        this.lastTimeUpdate = now;\n        this.listeners.timeUpdate?.(this.audio.currentTime);\n      }\n    }\n  }\n\n  private getErrorMessage(): string {\n    if (!this.audio?.error) return \"Unknown audio error\";\n\n    switch (this.audio.error.code) {\n      case MediaError.MEDIA_ERR_ABORTED:\n        return \"Audio loading was aborted\";\n      case MediaError.MEDIA_ERR_NETWORK:\n        return \"Network error occurred while loading audio\";\n      case MediaError.MEDIA_ERR_DECODE:\n        return \"Audio format not supported\";\n      case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:\n        return \"Audio source not supported\";\n      default:\n        return \"Audio playback failed\";\n    }\n  }\n\n  private scheduleRetry() {\n    setTimeout(() => {\n      if (this.audio && this.currentStation) {\n        this.retryCount++;\n        console.log(\n          `Retrying audio load (attempt ${this.retryCount}/${this.config.retryAttempts})`,\n        );\n        this.audio.load();\n      }\n    }, this.config.retryDelay);\n  }\n\n  private setState(state: AudioState) {\n    this.state = state;\n    this.listeners.stateChange?.(state);\n  }\n\n  // Public API\n  public on<T extends keyof AudioPlayerEvents>(\n    event: T,\n    callback: AudioPlayerEvents[T],\n  ) {\n    this.listeners[event] = callback as any;\n  }\n\n  public off<T extends keyof AudioPlayerEvents>(event: T) {\n    delete this.listeners[event];\n  }\n\n  public async loadStation(\n    station: RadioStation,\n    streamUrl?: string,\n  ): Promise<void> {\n    if (!this.audio) return;\n\n    this.currentStation = station;\n    this.retryCount = 0;\n\n    const url = streamUrl || station.url;\n    if (this.audio.src !== url) {\n      this.audio.src = url;\n      this.audio.load();\n    }\n  }\n\n  public async play(): Promise<void> {\n    if (!this.audio) return;\n\n    try {\n      await this.audio.play();\n    } catch (error) {\n      this.setState(\"error\");\n      throw error;\n    }\n  }\n\n  public pause(): void {\n    if (this.audio) {\n      this.audio.pause();\n    }\n  }\n\n  public setVolume(volume: number): void {\n    if (this.audio) {\n      this.audio.volume = Math.max(0, Math.min(1, volume));\n    }\n  }\n\n  public getVolume(): number {\n    return this.audio?.volume || 0;\n  }\n\n  public mute(): void {\n    this.setVolume(0);\n  }\n\n  public unmute(): void {\n    this.setVolume(this.config.volume);\n  }\n\n  public getState(): AudioState {\n    return this.state;\n  }\n\n  public getCurrentStation(): RadioStation | null {\n    return this.currentStation;\n  }\n\n  public getAudioElement(): HTMLAudioElement | null {\n    return this.audio;\n  }\n\n  public destroy(): void {\n    if (this.audio) {\n      this.audio.pause();\n      this.audio.removeAttribute(\"src\");\n      this.audio.load();\n      this.audio = null;\n    }\n    this.listeners = {};\n    this.currentStation = null;\n  }\n}\n"],"names":["AudioService","audio","state","config","listeners","retryCount","currentStation","lastTimeUpdate","TIME_UPDATE_THROTTLE","volume","crossOrigin","preload","retryAttempts","retryDelay","initializeAudio","Audio","addEventListener","handleLoadStart","bind","handleCanPlay","handlePlay","handlePause","handleError","handleVolumeChange","handleTimeUpdate","setState","loadStart","canPlay","errorMessage","getErrorMessage","error","scheduleRetry","volumeChange","now","Date","timeUpdate","currentTime","code","MediaError","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","setTimeout","console","log","load","stateChange","on","event","callback","off","loadStation","station","streamUrl","url","src","play","pause","setVolume","Math","max","min","getVolume","mute","unmute","getState","getCurrentStation","getAudioElement","destroy","removeAttribute"],"mappings":"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"}},
    {"offset": {"line": 1635, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/services/radioStationService.ts"],"sourcesContent":["// import { globalRadioStations } from '../data/globalRadioStations'\nimport { RadioStation } from \"../types/index\";\nimport { radioDiscoveryService } from \"./radioDiscoveryService\";\n\nexport class RadioStationService {\n  private stations: RadioStation[] = [];\n  private proxyUrl = \"/api/proxy/audio\";\n  private discoveredStations: RadioStation[] = [];\n  private isDiscoveryEnabled = true;\n\n  /**\n   * Get all radio stations (curated + discovered)\n   */\n  getAllStations(): RadioStation[] {\n    return [...this.stations, ...this.discoveredStations];\n  }\n\n  /**\n   * Get curated stations only\n   */\n  getCuratedStations(): RadioStation[] {\n    return this.stations;\n  }\n\n  /**\n   * Enhanced search that includes online discovery\n   */\n  async searchStations(\n    query: string,\n    includeOnline: boolean = true,\n  ): Promise<RadioStation[]> {\n    // Search local curated stations\n    const localResults = this.searchLocalStations(query);\n\n    if (!includeOnline || !this.isDiscoveryEnabled || !query.trim()) {\n      return localResults;\n    }\n\n    try {\n      // Search online stations\n      const onlineResults = await radioDiscoveryService.searchOnlineStations(\n        query,\n        30,\n      );\n\n      // Merge and deduplicate results\n      const allResults = [...localResults];\n      const existingUrls = new Set(localResults.map((s) => s.url));\n\n      for (const station of onlineResults) {\n        if (!existingUrls.has(station.url)) {\n          allResults.push(station);\n          existingUrls.add(station.url);\n        }\n      }\n\n      return allResults.slice(0, 100); // Limit total results\n    } catch (error) {\n      console.warn(\"Failed to search online stations:\", error);\n      return localResults;\n    }\n  }\n\n  /**\n   * Search only local curated stations\n   */\n  private searchLocalStations(query: string): RadioStation[] {\n    const searchTerm = query.toLowerCase();\n\n    return this.stations.filter(\n      (station) =>\n        station.name.toLowerCase().includes(searchTerm) ||\n        station.location.city.toLowerCase().includes(searchTerm) ||\n        station.location.country.toLowerCase().includes(searchTerm) ||\n        station.genre.toLowerCase().includes(searchTerm) ||\n        station.language.toLowerCase().includes(searchTerm) ||\n        (station.description &&\n          station.description.toLowerCase().includes(searchTerm)),\n    );\n  }\n\n  /**\n   * Discover stations by country with online integration\n   */\n  async getStationsByCountry(\n    country: string,\n    includeOnline: boolean = true,\n  ): Promise<RadioStation[]> {\n    const localStations = this.stations.filter(\n      (station) =>\n        station.location.country.toLowerCase() === country.toLowerCase(),\n    );\n\n    if (!includeOnline || !this.isDiscoveryEnabled) {\n      return localStations;\n    }\n\n    try {\n      // Get country code for API call (simplified mapping)\n      const countryCode = this.getCountryCode(country);\n      if (countryCode) {\n        const onlineStations = await radioDiscoveryService.getStationsByCountry(\n          countryCode,\n          50,\n        );\n        return this.mergeStationResults(localStations, onlineStations);\n      }\n    } catch (error) {\n      console.warn(\"Failed to fetch online stations for country:\", error);\n    }\n\n    return localStations;\n  }\n\n  /**\n   * Get popular/top stations with online integration\n   */\n  async getPopularStations(\n    limit: number = 20,\n    includeOnline: boolean = true,\n  ): Promise<RadioStation[]> {\n    const localPopular = [...this.stations]\n      .sort((a, b) => b.listeners - a.listeners)\n      .slice(0, limit);\n\n    if (!includeOnline || !this.isDiscoveryEnabled) {\n      return localPopular;\n    }\n\n    try {\n      const onlineTop = await radioDiscoveryService.getTopStations(limit);\n      return this.mergeStationResults(localPopular, onlineTop).slice(0, limit);\n    } catch (error) {\n      console.warn(\"Failed to fetch online top stations:\", error);\n      return localPopular;\n    }\n  }\n\n  /**\n   * Get stations by genre with online discovery\n   */\n  async getStationsByGenre(\n    genre: string,\n    includeOnline: boolean = true,\n  ): Promise<RadioStation[]> {\n    const localStations = this.stations.filter((station) =>\n      station.genre.toLowerCase().includes(genre.toLowerCase()),\n    );\n\n    if (!includeOnline || !this.isDiscoveryEnabled) {\n      return localStations;\n    }\n\n    try {\n      const onlineStations = await radioDiscoveryService.getStationsByTag(\n        genre,\n        30,\n      );\n      return this.mergeStationResults(localStations, onlineStations);\n    } catch (error) {\n      console.warn(\"Failed to fetch online stations by genre:\", error);\n      return localStations;\n    }\n  }\n\n  /**\n   * Get stations by city with online discovery\n   */\n  async getStationsByCity(\n    city: string,\n    includeOnline: boolean = true,\n  ): Promise<RadioStation[]> {\n    const localStations = this.stations.filter((station) =>\n      station.location.city.toLowerCase().includes(city.toLowerCase()),\n    );\n\n    if (!includeOnline || !this.isDiscoveryEnabled) {\n      return localStations;\n    }\n\n    try {\n      const onlineStations = await radioDiscoveryService.getStationsByCity(\n        city,\n        30,\n      );\n      return this.mergeStationResults(localStations, onlineStations);\n    } catch (error) {\n      console.warn(\"Failed to fetch online stations by city:\", error);\n      return localStations;\n    }\n  }\n\n  /**\n   * Get available countries from both sources\n   */\n  async getAvailableCountries(): Promise<\n    Array<{ name: string; code?: string; count: number }>\n  > {\n    try {\n      const [localCountries, onlineCountries] = await Promise.all([\n        this.getLocalCountries(),\n        radioDiscoveryService.getCountries(),\n      ]);\n\n      // Merge country lists\n      const countryMap = new Map<\n        string,\n        { name: string; code?: string; count: number }\n      >();\n\n      localCountries.forEach((country) => {\n        countryMap.set(country.name.toLowerCase(), country);\n      });\n\n      onlineCountries.forEach((country) => {\n        const key = country.name.toLowerCase();\n        const existing = countryMap.get(key);\n        if (existing) {\n          existing.count += country.stationcount;\n          existing.code = existing.code || country.iso;\n        } else {\n          countryMap.set(key, {\n            name: country.name,\n            code: country.iso,\n            count: country.stationcount,\n          });\n        }\n      });\n\n      return Array.from(countryMap.values()).sort((a, b) => b.count - a.count);\n    } catch (error) {\n      console.warn(\"Failed to get countries:\", error);\n      return this.getLocalCountries();\n    }\n  }\n\n  /**\n   * Get available genres/tags\n   */\n  async getAvailableGenres(): Promise<Array<{ name: string; count: number }>> {\n    try {\n      const [localGenres, onlineTags] = await Promise.all([\n        this.getLocalGenres(),\n        radioDiscoveryService.getTags(),\n      ]);\n\n      // Merge genre lists\n      const genreMap = new Map<string, number>();\n\n      localGenres.forEach((genre) => {\n        genreMap.set(genre.name.toLowerCase(), genre.count);\n      });\n\n      onlineTags.forEach((tag) => {\n        const key = tag.name.toLowerCase();\n        const existing = genreMap.get(key) || 0;\n        genreMap.set(key, existing + tag.stationcount);\n      });\n\n      return Array.from(genreMap.entries())\n        .map(([name, count]) => ({\n          name: name.charAt(0).toUpperCase() + name.slice(1),\n          count,\n        }))\n        .sort((a, b) => b.count - a.count)\n        .slice(0, 50); // Limit to top 50 genres\n    } catch (error) {\n      console.warn(\"Failed to get genres:\", error);\n      return this.getLocalGenres();\n    }\n  }\n\n  /**\n   * Private helper methods\n   */\n  private mergeStationResults(\n    local: RadioStation[],\n    online: RadioStation[],\n  ): RadioStation[] {\n    const merged = [...local];\n    const existingUrls = new Set(local.map((s) => s.url));\n\n    for (const station of online) {\n      if (!existingUrls.has(station.url)) {\n        merged.push(station);\n      }\n    }\n\n    return merged;\n  }\n\n  private getLocalCountries(): Array<{ name: string; count: number }> {\n    const countryCount = new Map<string, number>();\n\n    this.stations.forEach((station) => {\n      const country = station.location.country;\n      countryCount.set(country, (countryCount.get(country) || 0) + 1);\n    });\n\n    return Array.from(countryCount.entries()).map(([name, count]) => ({\n      name,\n      count,\n    }));\n  }\n\n  private getLocalGenres(): Array<{ name: string; count: number }> {\n    const genreCount = new Map<string, number>();\n\n    this.stations.forEach((station) => {\n      const genre = station.genre;\n      genreCount.set(genre, (genreCount.get(genre) || 0) + 1);\n    });\n\n    return Array.from(genreCount.entries()).map(([name, count]) => ({\n      name,\n      count,\n    }));\n  }\n\n  private getCountryCode(countryName: string): string | null {\n    // Simplified country code mapping - in production, use a comprehensive library\n    const countryMap: Record<string, string> = {\n      \"united states\": \"US\",\n      usa: \"US\",\n      canada: \"CA\",\n      \"united kingdom\": \"GB\",\n      uk: \"GB\",\n      germany: \"DE\",\n      france: \"FR\",\n      italy: \"IT\",\n      spain: \"ES\",\n      brazil: \"BR\",\n      japan: \"JP\",\n      australia: \"AU\",\n      netherlands: \"NL\",\n      sweden: \"SE\",\n      norway: \"NO\",\n      denmark: \"DK\",\n      finland: \"FI\",\n    };\n\n    return countryMap[countryName.toLowerCase()] || null;\n  }\n\n  /**\n   * Get stations by continent\n   */\n  getStationsByContinent(continent: string): RadioStation[] {\n    const continentCountries: Record<string, string[]> = {\n      \"north-america\": [\"United States\", \"Canada\", \"Mexico\"],\n      \"south-america\": [\"Brazil\", \"Argentina\", \"Chile\", \"Colombia\", \"Peru\"],\n      europe: [\n        \"United Kingdom\",\n        \"France\",\n        \"Germany\",\n        \"Italy\",\n        \"Spain\",\n        \"Netherlands\",\n        \"Switzerland\",\n      ],\n      asia: [\"Japan\", \"South Korea\", \"China\", \"India\", \"Singapore\", \"Thailand\"],\n      africa: [\"South Africa\", \"Nigeria\", \"Kenya\", \"Egypt\"],\n      oceania: [\"Australia\", \"New Zealand\"],\n    };\n\n    const countries = continentCountries[continent.toLowerCase()] || [];\n    return this.stations.filter((station) =>\n      countries.includes(station.location.country),\n    );\n  }\n\n  /**\n   * Get unique countries\n   */\n  getCountries(): string[] {\n    const countries = Array.from(\n      new Set(this.stations.map((station) => station.location.country)),\n    );\n    return countries.sort();\n  }\n\n  /**\n   * Get unique cities for a country\n   */\n  getCitiesInCountry(country: string): string[] {\n    const cities = this.stations\n      .filter((station) => station.location.country === country)\n      .map((station) => station.location.city);\n\n    return Array.from(new Set(cities)).sort();\n  }\n\n  /**\n   * Get unique genres\n   */\n  getGenres(): string[] {\n    const genres = Array.from(\n      new Set(this.stations.map((station) => station.genre)),\n    );\n    return genres.sort();\n  }\n\n  /**\n   * Get unique languages\n   */\n  getLanguages(): string[] {\n    const languages = Array.from(\n      new Set(this.stations.map((station) => station.language)),\n    );\n    return languages.sort();\n  }\n\n  /**\n   * Get proxied stream URL to avoid CORS issues\n   */\n  getProxiedStreamUrl(station: RadioStation): string {\n    // For known CORS-free streams, return direct URL\n    const corsFreeHosts = [\n      \"ice1.somafm.com\",\n      \"stream.srg-ssr.ch\",\n      \"streams.kqed.org\",\n    ];\n\n    try {\n      const url = new URL(station.url);\n      if (corsFreeHosts.some((host) => url.hostname.includes(host))) {\n        return station.url;\n      }\n    } catch {\n      // Invalid URL, use proxy\n    }\n\n    // Use proxy for potentially CORS-blocked streams\n    return `${this.proxyUrl}?url=${encodeURIComponent(station.url)}`;\n  }\n\n  /**\n   * Get station by ID\n   */\n  getStationById(id: string): RadioStation | undefined {\n    return this.stations.find((station) => station.id === id);\n  }\n\n  /**\n   * Get random stations\n   */\n  getRandomStations(count: number = 5): RadioStation[] {\n    const shuffled = [...this.stations].sort(() => 0.5 - Math.random());\n    return shuffled.slice(0, count);\n  }\n\n  /**\n   * Calculate distance between two points (Haversine formula)\n   */\n  private calculateDistance(\n    lat1: number,\n    lng1: number,\n    lat2: number,\n    lng2: number,\n  ): number {\n    const R = 6371; // Earth's radius in km\n    const dLat = this.toRad(lat2 - lat1);\n    const dLng = this.toRad(lng2 - lng1);\n\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(this.toRad(lat1)) *\n        Math.cos(this.toRad(lat2)) *\n        Math.sin(dLng / 2) *\n        Math.sin(dLng / 2);\n\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n\n  private toRad(degrees: number): number {\n    return degrees * (Math.PI / 180);\n  }\n}\n\n// Export singleton instance\nexport const radioStationService = new RadioStationService();\n"],"names":["RadioStationService","stations","proxyUrl","discoveredStations","isDiscoveryEnabled","getAllStations","getCuratedStations","searchStations","query","includeOnline","localResults","searchLocalStations","trim","onlineResults","searchOnlineStations","allResults","existingUrls","Set","map","s","url","station","has","push","add","slice","error","console","warn","searchTerm","toLowerCase","filter","name","includes","location","city","country","genre","language","description","getStationsByCountry","localStations","countryCode","getCountryCode","onlineStations","mergeStationResults","getPopularStations","limit","localPopular","sort","a","b","listeners","onlineTop","getTopStations","getStationsByGenre","getStationsByTag","getStationsByCity","getAvailableCountries","localCountries","onlineCountries","Promise","all","getLocalCountries","getCountries","countryMap","Map","forEach","set","key","existing","get","count","stationcount","code","iso","Array","from","values","getAvailableGenres","localGenres","onlineTags","getLocalGenres","getTags","genreMap","tag","entries","charAt","toUpperCase","local","online","merged","countryCount","genreCount","countryName","usa","canada","uk","germany","france","italy","spain","brazil","japan","australia","netherlands","sweden","norway","denmark","finland","getStationsByContinent","continent","continentCountries","europe","asia","africa","oceania","countries","getCitiesInCountry","cities","getGenres","genres","getLanguages","languages","getProxiedStreamUrl","corsFreeHosts","URL","some","host","hostname","encodeURIComponent","getStationById","id","find","getRandomStations","shuffled","Math","random","calculateDistance","lat1","lng1","lat2","lng2","R","dLat","toRad","dLng","sin","cos","c","atan2","sqrt","degrees","PI","radioStationService"],"mappings":"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"}},
    {"offset": {"line": 2007, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/hooks/useModularAudio.ts"],"sourcesContent":["import { useState, useRef, useEffect, useCallback, useMemo } from \"react\";\nimport { RadioStation } from \"../types\";\nimport { AudioService, AudioState } from \"../services/audioService\";\nimport { radioStationService } from \"../services/radioStationService\";\n\ninterface UseModularAudioOptions {\n  volume?: number;\n  autoPlay?: boolean;\n  retryAttempts?: number;\n  retryDelay?: number;\n}\n\ninterface ModularAudioState {\n  isPlaying: boolean;\n  isLoading: boolean;\n  error: string | null;\n  volume: number;\n  isMuted: boolean;\n  currentTime: number;\n  state: AudioState;\n  currentStation: RadioStation | null;\n}\n\ninterface ModularAudioActions {\n  play: () => Promise<void>;\n  pause: () => void;\n  setVolume: (volume: number) => void;\n  toggleMute: () => void;\n  loadStation: (station: RadioStation) => Promise<void>;\n  clearError: () => void;\n  getAudioElement: () => HTMLAudioElement | null;\n}\n\nexport function useModularAudio(\n  options: UseModularAudioOptions = {},\n): [ModularAudioState, ModularAudioActions] {\n  const audioServiceRef = useRef<AudioService | null>(null);\n\n  // Memoize options to prevent infinite loops\n  const memoizedOptions = useMemo(\n    () => ({\n      volume: options.volume || 0.7,\n      autoPlay: options.autoPlay || false,\n      retryAttempts: options.retryAttempts || 3,\n      retryDelay: options.retryDelay || 2000,\n    }),\n    [\n      options.volume,\n      options.autoPlay,\n      options.retryAttempts,\n      options.retryDelay,\n    ],\n  );\n\n  const [state, setState] = useState<ModularAudioState>(() => ({\n    isPlaying: false,\n    isLoading: false,\n    error: null,\n    volume: memoizedOptions.volume,\n    isMuted: false,\n    currentTime: 0,\n    state: \"idle\",\n    currentStation: null,\n  }));\n\n  // Initialize audio service\n  useEffect(() => {\n    audioServiceRef.current = new AudioService({\n      volume: memoizedOptions.volume,\n      retryAttempts: memoizedOptions.retryAttempts,\n      retryDelay: memoizedOptions.retryDelay,\n    });\n\n    const service = audioServiceRef.current;\n\n    // Set up event listeners\n    service.on(\"stateChange\", (audioState) => {\n      setState((prev) => ({\n        ...prev,\n        state: audioState,\n        isPlaying: audioState === \"playing\",\n        isLoading: audioState === \"loading\",\n      }));\n    });\n\n    service.on(\"error\", (error) => {\n      setState((prev) => ({\n        ...prev,\n        error,\n        isLoading: false,\n        isPlaying: false,\n      }));\n    });\n\n    service.on(\"volumeChange\", (volume) => {\n      setState((prev) => ({\n        ...prev,\n        volume,\n        isMuted: volume === 0,\n      }));\n    });\n\n    service.on(\"timeUpdate\", (currentTime) => {\n      setState((prev) => ({\n        ...prev,\n        currentTime,\n      }));\n    });\n\n    return () => {\n      service.destroy();\n    };\n  }, [\n    memoizedOptions.volume,\n    memoizedOptions.retryAttempts,\n    memoizedOptions.retryDelay,\n  ]);\n\n  const play = useCallback(async () => {\n    if (!audioServiceRef.current) return;\n\n    try {\n      await audioServiceRef.current.play();\n      setState((prev) => ({ ...prev, error: null }));\n    } catch (error) {\n      setState((prev) => ({\n        ...prev,\n        error: \"Failed to play audio. Please try again.\",\n      }));\n    }\n  }, []);\n\n  const pause = useCallback(() => {\n    if (!audioServiceRef.current) return;\n    audioServiceRef.current.pause();\n  }, []);\n\n  const setVolume = useCallback((volume: number) => {\n    if (!audioServiceRef.current) return;\n    audioServiceRef.current.setVolume(volume);\n  }, []);\n\n  const toggleMute = useCallback(() => {\n    if (!audioServiceRef.current) return;\n\n    if (state.isMuted) {\n      audioServiceRef.current.setVolume(state.volume > 0 ? state.volume : 0.7);\n    } else {\n      audioServiceRef.current.mute();\n    }\n  }, [state.isMuted, state.volume]);\n\n  const loadStation = useCallback(\n    async (station: RadioStation) => {\n      if (!audioServiceRef.current) return;\n\n      try {\n        setState((prev) => ({\n          ...prev,\n          error: null,\n          currentStation: station,\n        }));\n\n        // Get proxied URL to avoid CORS issues\n        const streamUrl = radioStationService.getProxiedStreamUrl(station);\n\n        await audioServiceRef.current.loadStation(station, streamUrl);\n\n        // Auto-play if enabled\n        if (memoizedOptions.autoPlay) {\n          await play();\n        }\n      } catch (error) {\n        setState((prev) => ({\n          ...prev,\n          error: \"Failed to load radio station.\",\n        }));\n      }\n    },\n    [memoizedOptions.autoPlay, play],\n  );\n\n  const clearError = useCallback(() => {\n    setState((prev) => ({ ...prev, error: null }));\n  }, []);\n\n  const getAudioElement = useCallback((): HTMLAudioElement | null => {\n    return audioServiceRef.current?.getAudioElement() || null;\n  }, []);\n\n  const playerState: ModularAudioState = useMemo(\n    () => ({\n      ...state,\n      currentStation:\n        audioServiceRef.current?.getCurrentStation() || state.currentStation,\n    }),\n    [state],\n  );\n\n  const actions: ModularAudioActions = useMemo(\n    () => ({\n      play,\n      pause,\n      setVolume,\n      toggleMute,\n      loadStation,\n      clearError,\n      getAudioElement,\n    }),\n    [\n      play,\n      pause,\n      setVolume,\n      toggleMute,\n      loadStation,\n      clearError,\n      getAudioElement,\n    ],\n  );\n\n  return [playerState, actions];\n}\n"],"names":["useModularAudio","options","audioServiceRef","memoizedOptions","volume","autoPlay","retryAttempts","retryDelay","state","setState","isPlaying","isLoading","error","isMuted","currentTime","currentStation","current","service","on","audioState","prev","destroy","play","pause","setVolume","toggleMute","mute","loadStation","station","streamUrl","getProxiedStreamUrl","clearError","getAudioElement","playerState","getCurrentStation","actions"],"mappings":"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"}},
    {"offset": {"line": 2245, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/services/audioVisualizationService.ts"],"sourcesContent":["export type VisualizationType = \"bars\" | \"waveform\" | \"circular\" | \"particles\";\n\nexport interface VisualizerConfig {\n  fftSize: number;\n  smoothingTimeConstant: number;\n  minDecibels: number;\n  maxDecibels: number;\n  backgroundColor: string;\n  primaryColor: string;\n  secondaryColor: string;\n}\n\nexport interface VisualizerRenderer {\n  render(\n    data: Uint8Array,\n    canvas: HTMLCanvasElement,\n    config: VisualizerConfig,\n  ): void;\n}\n\nexport class BarsRenderer implements VisualizerRenderer {\n  render(\n    data: Uint8Array,\n    canvas: HTMLCanvasElement,\n    config: VisualizerConfig,\n  ): void {\n    const ctx = canvas.getContext(\"2d\")!;\n    const width = canvas.width;\n    const height = canvas.height;\n    const barWidth = (width / data.length) * 2;\n\n    // Clear canvas with fade effect\n    ctx.fillStyle = config.backgroundColor;\n    ctx.fillRect(0, 0, width, height);\n\n    // Draw bars\n    for (let i = 0; i < data.length; i++) {\n      const barHeight = (data[i] / 255) * height * 0.8;\n      const x = i * barWidth;\n      const y = height - barHeight;\n\n      // Create gradient\n      const gradient = ctx.createLinearGradient(0, y, 0, height);\n      gradient.addColorStop(0, config.primaryColor);\n      gradient.addColorStop(0.5, config.secondaryColor);\n      gradient.addColorStop(1, config.primaryColor);\n\n      ctx.fillStyle = gradient;\n      ctx.fillRect(x, y, barWidth - 1, barHeight);\n    }\n  }\n}\n\nexport class WaveformRenderer implements VisualizerRenderer {\n  render(\n    data: Uint8Array,\n    canvas: HTMLCanvasElement,\n    config: VisualizerConfig,\n  ): void {\n    const ctx = canvas.getContext(\"2d\")!;\n    const width = canvas.width;\n    const height = canvas.height;\n\n    // Clear canvas with fade effect\n    ctx.fillStyle = config.backgroundColor;\n    ctx.fillRect(0, 0, width, height);\n\n    // Draw waveform\n    ctx.lineWidth = 2;\n    ctx.strokeStyle = config.primaryColor;\n    ctx.beginPath();\n\n    const sliceWidth = width / data.length;\n    let x = 0;\n\n    for (let i = 0; i < data.length; i++) {\n      const v = data[i] / 128.0;\n      const y = (v * height) / 2;\n\n      if (i === 0) {\n        ctx.moveTo(x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n\n      x += sliceWidth;\n    }\n\n    ctx.stroke();\n  }\n}\n\nexport class CircularRenderer implements VisualizerRenderer {\n  render(\n    data: Uint8Array,\n    canvas: HTMLCanvasElement,\n    config: VisualizerConfig,\n  ): void {\n    const ctx = canvas.getContext(\"2d\")!;\n    const width = canvas.width;\n    const height = canvas.height;\n    const centerX = width / 2;\n    const centerY = height / 2;\n    const radius = Math.min(width, height) * 0.3;\n\n    // Clear canvas with fade effect\n    ctx.fillStyle = config.backgroundColor;\n    ctx.fillRect(0, 0, width, height);\n\n    // Draw center circle\n    ctx.fillStyle = config.primaryColor + \"40\";\n    ctx.beginPath();\n    ctx.arc(centerX, centerY, radius * 0.8, 0, Math.PI * 2);\n    ctx.fill();\n\n    // Draw circular visualization\n    const angleStep = (Math.PI * 2) / data.length;\n\n    for (let i = 0; i < data.length; i++) {\n      const amplitude = (data[i] / 255) * radius;\n      const angle = i * angleStep;\n\n      const x1 = centerX + Math.cos(angle) * radius;\n      const y1 = centerY + Math.sin(angle) * radius;\n      const x2 = centerX + Math.cos(angle) * (radius + amplitude);\n      const y2 = centerY + Math.sin(angle) * (radius + amplitude);\n\n      // Create gradient\n      const gradient = ctx.createLinearGradient(x1, y1, x2, y2);\n      gradient.addColorStop(0, config.primaryColor + \"CC\");\n      gradient.addColorStop(1, config.secondaryColor + \"66\");\n\n      ctx.strokeStyle = gradient;\n      ctx.lineWidth = 2;\n      ctx.beginPath();\n      ctx.moveTo(x1, y1);\n      ctx.lineTo(x2, y2);\n      ctx.stroke();\n    }\n  }\n}\n\nexport class ParticlesRenderer implements VisualizerRenderer {\n  private particles: Array<{\n    x: number;\n    y: number;\n    vx: number;\n    vy: number;\n    life: number;\n  }> = [];\n\n  render(\n    data: Uint8Array,\n    canvas: HTMLCanvasElement,\n    config: VisualizerConfig,\n  ): void {\n    const ctx = canvas.getContext(\"2d\")!;\n    const width = canvas.width;\n    const height = canvas.height;\n\n    // Clear canvas\n    ctx.fillStyle = config.backgroundColor;\n    ctx.fillRect(0, 0, width, height);\n\n    // Calculate average amplitude\n    const avgAmplitude = data.reduce((sum, val) => sum + val, 0) / data.length;\n\n    // Generate new particles based on audio intensity\n    if (avgAmplitude > 50) {\n      for (let i = 0; i < Math.floor(avgAmplitude / 20); i++) {\n        this.particles.push({\n          x: Math.random() * width,\n          y: height,\n          vx: (Math.random() - 0.5) * 4,\n          vy: -Math.random() * 5 - 2,\n          life: 1.0,\n        });\n      }\n    }\n\n    // Update and draw particles\n    this.particles = this.particles.filter((particle) => {\n      particle.x += particle.vx;\n      particle.y += particle.vy;\n      particle.vy += 0.1; // gravity\n      particle.life -= 0.02;\n\n      if (particle.life > 0) {\n        ctx.fillStyle =\n          config.primaryColor +\n          Math.floor(particle.life * 255)\n            .toString(16)\n            .padStart(2, \"0\");\n        ctx.beginPath();\n        ctx.arc(particle.x, particle.y, 2, 0, Math.PI * 2);\n        ctx.fill();\n        return true;\n      }\n      return false;\n    });\n  }\n}\n\nexport class AudioVisualizationService {\n  private analyser: AnalyserNode | null = null;\n  private dataArray: Uint8Array | null = null;\n  private animationFrame: number | null = null;\n  private renderers: Map<VisualizationType, VisualizerRenderer>;\n  private currentRenderer: VisualizerRenderer | null = null;\n  private config: VisualizerConfig;\n\n  constructor(config: Partial<VisualizerConfig> = {}) {\n    this.config = {\n      fftSize: 256,\n      smoothingTimeConstant: 0.8,\n      minDecibels: -90,\n      maxDecibels: -10,\n      backgroundColor: \"rgba(0, 0, 0, 0.1)\",\n      primaryColor: \"#60a5fa\",\n      secondaryColor: \"#3b82f6\",\n      ...config,\n    };\n\n    this.renderers = new Map([\n      [\"bars\", new BarsRenderer()],\n      [\"waveform\", new WaveformRenderer()],\n      [\"circular\", new CircularRenderer()],\n      [\"particles\", new ParticlesRenderer()],\n    ]);\n  }\n\n  public initialize(audioElement: HTMLAudioElement): boolean {\n    try {\n      const audioContext = new (\n        window.AudioContext || (window as any).webkitAudioContext\n      )();\n      const source = audioContext.createMediaElementSource(audioElement);\n      this.analyser = audioContext.createAnalyser();\n\n      // Configure analyser\n      this.analyser.fftSize = this.config.fftSize;\n      this.analyser.smoothingTimeConstant = this.config.smoothingTimeConstant;\n      this.analyser.minDecibels = this.config.minDecibels;\n      this.analyser.maxDecibels = this.config.maxDecibels;\n\n      // Connect audio graph\n      source.connect(this.analyser);\n      this.analyser.connect(audioContext.destination);\n\n      this.dataArray = new Uint8Array(this.analyser.frequencyBinCount);\n\n      // Resume audio context if suspended\n      if (audioContext.state === \"suspended\") {\n        audioContext.resume();\n      }\n\n      return true;\n    } catch (error) {\n      console.warn(\"Audio visualization initialization failed:\", error);\n      return false;\n    }\n  }\n\n  public start(\n    canvas: HTMLCanvasElement,\n    type: VisualizationType = \"bars\",\n  ): void {\n    this.currentRenderer = this.renderers.get(type) || null;\n\n    if (!this.analyser || !this.dataArray || !this.currentRenderer) {\n      return;\n    }\n\n    const animate = () => {\n      if (!this.analyser || !this.dataArray || !this.currentRenderer) return;\n\n      if (this.dataArray) {\n        this.analyser.getByteFrequencyData(this.dataArray as any);\n      }\n      this.currentRenderer.render(this.dataArray, canvas, this.config);\n\n      this.animationFrame = requestAnimationFrame(animate);\n    };\n\n    animate();\n  }\n\n  public stop(): void {\n    if (this.animationFrame) {\n      cancelAnimationFrame(this.animationFrame);\n      this.animationFrame = null;\n    }\n  }\n\n  public changeType(type: VisualizationType): void {\n    this.currentRenderer = this.renderers.get(type) || null;\n  }\n\n  public updateConfig(newConfig: Partial<VisualizerConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n  }\n\n  public getAvailableTypes(): VisualizationType[] {\n    return Array.from(this.renderers.keys());\n  }\n\n  public destroy(): void {\n    this.stop();\n    this.analyser = null;\n    this.dataArray = null;\n    this.currentRenderer = null;\n  }\n}\n"],"names":["BarsRenderer","render","data","canvas","config","ctx","getContext","width","height","barWidth","length","fillStyle","backgroundColor","fillRect","i","barHeight","x","y","gradient","createLinearGradient","addColorStop","primaryColor","secondaryColor","WaveformRenderer","lineWidth","strokeStyle","beginPath","sliceWidth","v","moveTo","lineTo","stroke","CircularRenderer","centerX","centerY","radius","Math","min","arc","PI","fill","angleStep","amplitude","angle","x1","cos","y1","sin","x2","y2","ParticlesRenderer","particles","avgAmplitude","reduce","sum","val","floor","push","random","vx","vy","life","filter","particle","toString","padStart","AudioVisualizationService","analyser","dataArray","animationFrame","renderers","currentRenderer","fftSize","smoothingTimeConstant","minDecibels","maxDecibels","Map","initialize","audioElement","audioContext","window","AudioContext","webkitAudioContext","source","createMediaElementSource","createAnalyser","connect","destination","Uint8Array","frequencyBinCount","state","resume","error","console","warn","start","type","get","animate","getByteFrequencyData","requestAnimationFrame","stop","cancelAnimationFrame","changeType","updateConfig","newConfig","getAvailableTypes","Array","from","keys","destroy"],"mappings":"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"}},
    {"offset": {"line": 2494, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/ModularAudioVisualizer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport {\n  AudioVisualizationService,\n  VisualizationType,\n} from \"../services/audioVisualizationService\";\n\ninterface ModularAudioVisualizerProps {\n  audioElement?: HTMLAudioElement | null;\n  isPlaying: boolean;\n  className?: string;\n  type?: VisualizationType;\n  width?: number;\n  height?: number;\n  colors?: {\n    primary?: string;\n    secondary?: string;\n    background?: string;\n  };\n}\n\nexport function ModularAudioVisualizer({\n  audioElement,\n  isPlaying,\n  className = \"\",\n  type = \"bars\",\n  width = 300,\n  height = 100,\n  colors = {},\n}: ModularAudioVisualizerProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const visualizationServiceRef = useRef<AudioVisualizationService | null>(\n    null,\n  );\n  const [isSupported, setIsSupported] = useState(true);\n  const [currentType, setCurrentType] = useState<VisualizationType>(type);\n\n  // Initialize visualization service\n  useEffect(() => {\n    visualizationServiceRef.current = new AudioVisualizationService({\n      fftSize: type === \"waveform\" ? 2048 : 256,\n      primaryColor: colors.primary || \"#60a5fa\",\n      secondaryColor: colors.secondary || \"#3b82f6\",\n      backgroundColor: colors.background || \"rgba(0, 0, 0, 0.1)\",\n    });\n\n    return () => {\n      visualizationServiceRef.current?.destroy();\n    };\n  }, [type, colors.primary, colors.secondary, colors.background]);\n\n  // Handle audio element changes\n  useEffect(() => {\n    if (!audioElement || !visualizationServiceRef.current) {\n      return;\n    }\n\n    const success = visualizationServiceRef.current.initialize(audioElement);\n    if (!success) {\n      setIsSupported(false);\n    }\n  }, [audioElement]);\n\n  // Handle playback state changes\n  useEffect(() => {\n    if (!visualizationServiceRef.current || !canvasRef.current) {\n      return;\n    }\n\n    if (isPlaying && isSupported) {\n      visualizationServiceRef.current.start(canvasRef.current, currentType);\n    } else {\n      visualizationServiceRef.current.stop();\n    }\n\n    return () => {\n      visualizationServiceRef.current?.stop();\n    };\n  }, [isPlaying, isSupported, currentType]);\n\n  // Handle type changes\n  useEffect(() => {\n    setCurrentType(type);\n    if (visualizationServiceRef.current) {\n      visualizationServiceRef.current.changeType(type);\n    }\n  }, [type]);\n\n  if (!isSupported) {\n    return (\n      <div className={`flex items-center justify-center ${className}`}>\n        <div className=\"text-gray-500 text-sm\">\n          Audio visualization not supported\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <motion.div\n      className={`relative ${className}`}\n      initial={{ opacity: 0, scale: 0.8 }}\n      animate={{\n        opacity: isPlaying ? 1 : 0.5,\n        scale: 1,\n        filter: isPlaying ? \"blur(0px)\" : \"blur(1px)\",\n      }}\n      transition={{ duration: 0.3 }}\n    >\n      <canvas\n        ref={canvasRef}\n        width={width}\n        height={height}\n        className=\"w-full h-full rounded-lg bg-black/20 backdrop-blur-sm border border-white/10\"\n        style={{\n          imageRendering: \"pixelated\",\n        }}\n      />\n\n      {/* Overlay effects */}\n      {isPlaying && (\n        <>\n          <div className=\"absolute inset-0 rounded-lg bg-gradient-to-t from-blue-500/10 to-transparent pointer-events-none\" />\n          <div className=\"absolute inset-0 rounded-lg shadow-inner pointer-events-none\" />\n        </>\n      )}\n\n      {/* Loading indicator when audio is initializing */}\n      {!isPlaying && (\n        <div className=\"absolute inset-0 flex items-center justify-center\">\n          <div className=\"flex items-center gap-2 text-gray-400 text-xs\">\n            <div className=\"w-3 h-3 border border-gray-400 border-t-transparent rounded-full animate-spin\" />\n            Ready\n          </div>\n        </div>\n      )}\n    </motion.div>\n  );\n}\n\n// Hook for easier visualization type cycling\nexport function useVisualizationType() {\n  const [type, setType] = useState<VisualizationType>(\"bars\");\n  const types: VisualizationType[] = [\n    \"bars\",\n    \"waveform\",\n    \"circular\",\n    \"particles\",\n  ];\n\n  const nextType = () => {\n    const currentIndex = types.indexOf(type);\n    const nextIndex = (currentIndex + 1) % types.length;\n    setType(types[nextIndex]);\n  };\n\n  const setVisualizationType = (newType: VisualizationType) => {\n    setType(newType);\n  };\n\n  return {\n    currentType: type,\n    availableTypes: types,\n    nextType,\n    setType: setVisualizationType,\n  };\n}\n"],"names":["ModularAudioVisualizer","audioElement","isPlaying","className","type","width","height","colors","canvasRef","visualizationServiceRef","isSupported","setIsSupported","currentType","setCurrentType","current","fftSize","primaryColor","primary","secondaryColor","secondary","backgroundColor","background","destroy","success","initialize","start","stop","changeType","div","initial","opacity","scale","animate","filter","transition","duration","ref","style","imageRendering","useVisualizationType","setType","types","nextType","currentIndex","indexOf","nextIndex","length","setVisualizationType","newType","availableTypes"],"mappings":"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"}},
    {"offset": {"line": 2714, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/ModularAudioPlayer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport {\n  Play,\n  Pause,\n  Volume2,\n  VolumeX,\n  MoreVertical,\n  SkipBack,\n  SkipForward,\n  Settings,\n} from \"lucide-react\";\nimport { useGlobeStore } from \"../stores/globe-store\";\nimport { useModularAudio } from \"../hooks/useModularAudio\";\nimport {\n  ModularAudioVisualizer,\n  useVisualizationType,\n} from \"./ModularAudioVisualizer\";\nimport { useState } from \"react\";\n\ninterface ModularAudioPlayerProps {\n  className?: string;\n  showVisualizer?: boolean;\n  compactMode?: boolean;\n  autoPlay?: boolean;\n}\n\nexport function ModularAudioPlayer({\n  className = \"\",\n  showVisualizer = true,\n  compactMode = false,\n  autoPlay = false,\n}: ModularAudioPlayerProps) {\n  const selectedStation = useGlobeStore((state) => state.selectedStation);\n  const [showSettings, setShowSettings] = useState(false);\n  const [audioState, audioActions] = useModularAudio({ autoPlay, volume: 0.7 });\n  const { currentType, availableTypes, nextType, setType } =\n    useVisualizationType();\n\n  // Load station when selected\n  useEffect(() => {\n    if (selectedStation) {\n      audioActions.loadStation(selectedStation);\n    }\n  }, [selectedStation, audioActions.loadStation]);\n\n  const formatTime = (time: number): string => {\n    const minutes = Math.floor(time / 60);\n    const seconds = Math.floor(time % 60);\n    return `${minutes}:${seconds.toString().padStart(2, \"0\")}`;\n  };\n\n  if (!selectedStation) {\n    return (\n      <motion.div\n        className={`glass rounded-xl p-6 text-center ${className}`}\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n      >\n        <div className=\"text-gray-400 mb-2\">\n          <Volume2 className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n        </div>\n        <p className=\"text-white text-sm mb-1\">Select a Radio Station</p>\n        <p className=\"text-gray-400 text-xs\">\n          Click on any station marker on the globe\n        </p>\n      </motion.div>\n    );\n  }\n\n  return (\n    <motion.div\n      className={`glass rounded-xl overflow-hidden ${compactMode ? \"p-3\" : \"p-4\"} ${className}`}\n      initial={{ y: 100, opacity: 0 }}\n      animate={{ y: 0, opacity: 1 }}\n      exit={{ y: 100, opacity: 0 }}\n      layout\n    >\n      {/* Station Info Header */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex items-center space-x-3 flex-1 min-w-0\">\n          {!compactMode && (\n            <div className=\"flex-shrink-0\">\n              <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center\">\n                <span className=\"text-white font-bold text-sm\">\n                  {selectedStation.name.charAt(0)}\n                </span>\n              </div>\n            </div>\n          )}\n\n          <div className=\"min-w-0 flex-1\">\n            <h3\n              className={`text-white font-semibold truncate ${compactMode ? \"text-sm\" : \"\"}`}\n            >\n              {selectedStation.name}\n            </h3>\n            <p\n              className={`text-gray-400 truncate ${compactMode ? \"text-xs\" : \"text-sm\"}`}\n            >\n              {selectedStation.location.city},{\" \"}\n              {selectedStation.location.country} â¢ {selectedStation.genre}\n            </p>\n          </div>\n        </div>\n\n        {/* Settings Button */}\n        <motion.button\n          onClick={() => setShowSettings(!showSettings)}\n          className=\"text-white/60 hover:text-white transition-colors p-1 rounded\"\n          whileHover={{ scale: 1.1 }}\n          whileTap={{ scale: 0.9 }}\n        >\n          <Settings className=\"w-4 h-4\" />\n        </motion.button>\n      </div>\n\n      {/* Audio Visualizer */}\n      <AnimatePresence>\n        {showVisualizer && audioState.isPlaying && !compactMode && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: \"auto\", opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.3 }}\n            className=\"mb-4 overflow-hidden\"\n          >\n            <div className=\"flex items-center justify-between mb-2\">\n              <span className=\"text-white/60 text-xs\">Audio Visualization</span>\n              <div className=\"flex space-x-1\">\n                {availableTypes.map((type) => (\n                  <button\n                    key={type}\n                    onClick={() => setType(type)}\n                    className={`px-2 py-1 text-xs rounded transition-colors ${\n                      currentType === type\n                        ? \"bg-blue-500 text-white\"\n                        : \"text-white/60 hover:text-white\"\n                    }`}\n                  >\n                    {type}\n                  </button>\n                ))}\n              </div>\n            </div>\n            <ModularAudioVisualizer\n              audioElement={audioActions.getAudioElement()}\n              isPlaying={audioState.isPlaying}\n              type={currentType}\n              className=\"w-full\"\n              height={compactMode ? 40 : 80}\n            />\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Main Controls */}\n      <div className=\"flex items-center space-x-4\">\n        {/* Play/Pause Button */}\n        <motion.button\n          onClick={\n            audioState.isPlaying ? audioActions.pause : audioActions.play\n          }\n          disabled={audioState.isLoading}\n          className={`flex-shrink-0 ${compactMode ? \"w-10 h-10\" : \"w-12 h-12\"} bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 rounded-full flex items-center justify-center transition-all`}\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n        >\n          {audioState.isLoading ? (\n            <div\n              className={`${compactMode ? \"w-4 h-4\" : \"w-5 h-5\"} border-2 border-white border-t-transparent rounded-full animate-spin`}\n            />\n          ) : audioState.isPlaying ? (\n            <Pause\n              className={`${compactMode ? \"w-4 h-4\" : \"w-5 h-5\"} text-white`}\n            />\n          ) : (\n            <Play\n              className={`${compactMode ? \"w-4 h-4\" : \"w-5 h-5\"} text-white ml-0.5`}\n            />\n          )}\n        </motion.button>\n\n        {/* Volume Control */}\n        <div className=\"flex items-center space-x-2 flex-1\">\n          <motion.button\n            onClick={audioActions.toggleMute}\n            className=\"text-white hover:text-blue-300 transition-colors\"\n            whileHover={{ scale: 1.1 }}\n          >\n            {audioState.isMuted ? (\n              <VolumeX className={compactMode ? \"w-4 h-4\" : \"w-5 h-5\"} />\n            ) : (\n              <Volume2 className={compactMode ? \"w-4 h-4\" : \"w-5 h-5\"} />\n            )}\n          </motion.button>\n\n          <div className=\"flex-1 max-w-24\">\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"100\"\n              value={audioState.isMuted ? 0 : audioState.volume * 100}\n              onChange={(e) =>\n                audioActions.setVolume(Number(e.target.value) / 100)\n              }\n              className=\"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer\n                        [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 \n                        [&::-webkit-slider-thumb]:bg-blue-500 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer\n                        [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:bg-blue-500 [&::-moz-range-thumb]:rounded-full \n                        [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:cursor-pointer\"\n            />\n          </div>\n\n          <span className=\"text-white/60 text-xs min-w-8\">\n            {Math.round((audioState.isMuted ? 0 : audioState.volume) * 100)}%\n          </span>\n        </div>\n\n        {/* Now Playing Indicator */}\n        {audioState.isPlaying && !compactMode && (\n          <motion.div\n            className=\"flex items-center space-x-2\"\n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n          >\n            <div className=\"flex space-x-0.5\">\n              {[...Array(3)].map((_, i) => (\n                <motion.div\n                  key={i}\n                  className=\"w-1 bg-green-500 rounded-full\"\n                  animate={{\n                    height: [4, 16, 4],\n                  }}\n                  transition={{\n                    duration: 0.8,\n                    repeat: Infinity,\n                    delay: i * 0.1,\n                  }}\n                />\n              ))}\n            </div>\n            <span className=\"text-green-500 text-xs font-medium\">LIVE</span>\n          </motion.div>\n        )}\n      </div>\n\n      {/* Error Display */}\n      <AnimatePresence>\n        {audioState.error && (\n          <motion.div\n            className=\"mt-3 p-2 bg-red-500/20 border border-red-500/50 rounded text-red-300 text-sm flex items-center justify-between\"\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n          >\n            <span className=\"flex-1\">{audioState.error}</span>\n            <button\n              onClick={audioActions.clearError}\n              className=\"text-red-300 hover:text-red-100 ml-2\"\n            >\n              Ã\n            </button>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Settings Panel */}\n      <AnimatePresence>\n        {showSettings && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"mt-4 p-3 bg-white/5 rounded-lg border border-white/10\"\n          >\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-white text-sm\">Show Visualizer</span>\n                <button\n                  onClick={() => setShowSettings(false)}\n                  className={`w-8 h-4 rounded-full transition-colors ${\n                    showVisualizer ? \"bg-blue-500\" : \"bg-gray-600\"\n                  }`}\n                >\n                  <div\n                    className={`w-3 h-3 bg-white rounded-full transition-transform ${\n                      showVisualizer ? \"translate-x-4\" : \"translate-x-0.5\"\n                    }`}\n                  />\n                </button>\n              </div>\n\n              <div className=\"text-xs text-gray-400\">\n                Station: {selectedStation.name}\n                <br />\n                Genre: {selectedStation.genre}\n                <br />\n                Location: {selectedStation.location.city},{\" \"}\n                {selectedStation.location.country}\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </motion.div>\n  );\n}\n"],"names":["ModularAudioPlayer","className","showVisualizer","compactMode","autoPlay","selectedStation","state","showSettings","setShowSettings","audioState","audioActions","volume","currentType","availableTypes","nextType","setType","loadStation","formatTime","time","minutes","Math","floor","seconds","toString","padStart","div","initial","opacity","y","animate","exit","layout","name","charAt","location","city","country","genre","button","onClick","whileHover","scale","whileTap","isPlaying","height","transition","duration","map","type","audioElement","getAudioElement","pause","play","disabled","isLoading","toggleMute","isMuted","min","max","value","onChange","e","setVolume","Number","target","round","x","Array","_","i","repeat","Infinity","delay","error","clearError"],"mappings":"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"}},
    {"offset": {"line": 3320, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/hooks/useUserData.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport type { RadioStation } from \"../types\";\n\nconst STORAGE_KEYS = {\n  FAVORITES: \"radioGlobe_favorites\",\n  RECENT: \"radioGlobe_recent\",\n  PREFERENCES: \"radioGlobe_preferences\",\n};\n\nconst MAX_RECENT = 20;\n\ninterface UserPreferences {\n  autoPlay: boolean;\n  defaultVolume: number;\n  preferredGenres: string[];\n  preferredCountries: string[];\n  sleepTimer: number | null; // minutes\n}\n\nconst DEFAULT_PREFERENCES: UserPreferences = {\n  autoPlay: false,\n  defaultVolume: 70,\n  preferredGenres: [],\n  preferredCountries: [],\n  sleepTimer: null,\n};\n\nexport function useFavorites() {\n  const [favorites, setFavorites] = useState<RadioStation[]>([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  // Load favorites from localStorage\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEYS.FAVORITES);\n      if (stored) {\n        setFavorites(JSON.parse(stored));\n      }\n    } catch (e) {\n      console.error(\"Failed to load favorites:\", e);\n    }\n    setIsLoaded(true);\n  }, []);\n\n  // Save favorites to localStorage\n  useEffect(() => {\n    if (isLoaded) {\n      localStorage.setItem(STORAGE_KEYS.FAVORITES, JSON.stringify(favorites));\n    }\n  }, [favorites, isLoaded]);\n\n  const addFavorite = useCallback((station: RadioStation) => {\n    setFavorites((prev) => {\n      if (prev.some((s) => s.id === station.id)) return prev;\n      return [station, ...prev];\n    });\n  }, []);\n\n  const removeFavorite = useCallback((stationId: string) => {\n    setFavorites((prev) => prev.filter((s) => s.id !== stationId));\n  }, []);\n\n  const isFavorite = useCallback(\n    (stationId: string) => {\n      return favorites.some((s) => s.id === stationId);\n    },\n    [favorites],\n  );\n\n  const toggleFavorite = useCallback(\n    (station: RadioStation) => {\n      if (isFavorite(station.id)) {\n        removeFavorite(station.id);\n      } else {\n        addFavorite(station);\n      }\n    },\n    [isFavorite, removeFavorite, addFavorite],\n  );\n\n  return {\n    favorites,\n    addFavorite,\n    removeFavorite,\n    isFavorite,\n    toggleFavorite,\n    isLoaded,\n  };\n}\n\nexport function useRecentStations() {\n  const [recent, setRecent] = useState<RadioStation[]>([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  // Load recent from localStorage\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEYS.RECENT);\n      if (stored) {\n        setRecent(JSON.parse(stored));\n      }\n    } catch (e) {\n      console.error(\"Failed to load recent stations:\", e);\n    }\n    setIsLoaded(true);\n  }, []);\n\n  // Save recent to localStorage\n  useEffect(() => {\n    if (isLoaded) {\n      localStorage.setItem(STORAGE_KEYS.RECENT, JSON.stringify(recent));\n    }\n  }, [recent, isLoaded]);\n\n  const addToRecent = useCallback((station: RadioStation) => {\n    setRecent((prev) => {\n      // Remove if already exists\n      const filtered = prev.filter((s) => s.id !== station.id);\n      // Add to front and limit size\n      return [station, ...filtered].slice(0, MAX_RECENT);\n    });\n  }, []);\n\n  const clearRecent = useCallback(() => {\n    setRecent([]);\n  }, []);\n\n  return {\n    recent,\n    addToRecent,\n    clearRecent,\n    isLoaded,\n  };\n}\n\nexport function usePreferences() {\n  const [preferences, setPreferences] =\n    useState<UserPreferences>(DEFAULT_PREFERENCES);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  // Load preferences from localStorage\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEYS.PREFERENCES);\n      if (stored) {\n        setPreferences({ ...DEFAULT_PREFERENCES, ...JSON.parse(stored) });\n      }\n    } catch (e) {\n      console.error(\"Failed to load preferences:\", e);\n    }\n    setIsLoaded(true);\n  }, []);\n\n  // Save preferences to localStorage\n  useEffect(() => {\n    if (isLoaded) {\n      localStorage.setItem(\n        STORAGE_KEYS.PREFERENCES,\n        JSON.stringify(preferences),\n      );\n    }\n  }, [preferences, isLoaded]);\n\n  const updatePreference = useCallback(\n    <K extends keyof UserPreferences>(key: K, value: UserPreferences[K]) => {\n      setPreferences((prev) => ({ ...prev, [key]: value }));\n    },\n    [],\n  );\n\n  const addPreferredGenre = useCallback((genre: string) => {\n    setPreferences((prev) => ({\n      ...prev,\n      preferredGenres: Array.from(new Set([...prev.preferredGenres, genre])),\n    }));\n  }, []);\n\n  const removePreferredGenre = useCallback((genre: string) => {\n    setPreferences((prev) => ({\n      ...prev,\n      preferredGenres: prev.preferredGenres.filter((g) => g !== genre),\n    }));\n  }, []);\n\n  return {\n    preferences,\n    updatePreference,\n    addPreferredGenre,\n    removePreferredGenre,\n    isLoaded,\n  };\n}\n\n// Combined hook for all user data\nexport function useUserData() {\n  const favorites = useFavorites();\n  const recent = useRecentStations();\n  const preferences = usePreferences();\n\n  return {\n    favorites,\n    recent,\n    preferences,\n    isLoaded: favorites.isLoaded && recent.isLoaded && preferences.isLoaded,\n  };\n}\n"],"names":["STORAGE_KEYS","FAVORITES","RECENT","PREFERENCES","MAX_RECENT","DEFAULT_PREFERENCES","autoPlay","defaultVolume","preferredGenres","preferredCountries","sleepTimer","useFavorites","favorites","setFavorites","isLoaded","setIsLoaded","stored","localStorage","getItem","JSON","parse","e","console","error","setItem","stringify","addFavorite","station","prev","some","s","id","removeFavorite","stationId","filter","isFavorite","toggleFavorite","useRecentStations","recent","setRecent","addToRecent","filtered","slice","clearRecent","usePreferences","preferences","setPreferences","updatePreference","key","value","addPreferredGenre","genre","Array","from","Set","removePreferredGenre","g","useUserData"],"mappings":"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"}},
    {"offset": {"line": 3593, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/hooks/useUserLocation.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\n\ninterface UserLocation {\n  latitude: number;\n  longitude: number;\n  country?: string;\n  city?: string;\n  timezone?: string;\n}\n\ninterface LocationState {\n  location: UserLocation | null;\n  isLoading: boolean;\n  error: string | null;\n  permissionDenied: boolean;\n}\n\n// Fallback locations by country code\nconst FALLBACK_LOCATIONS: Record<string, UserLocation> = {\n  US: {\n    latitude: 37.7749,\n    longitude: -122.4194,\n    country: \"United States\",\n    city: \"San Francisco\",\n    timezone: \"America/Los_Angeles\",\n  },\n  GB: {\n    latitude: 51.5074,\n    longitude: -0.1278,\n    country: \"United Kingdom\",\n    city: \"London\",\n    timezone: \"Europe/London\",\n  },\n  DE: {\n    latitude: 52.52,\n    longitude: 13.405,\n    country: \"Germany\",\n    city: \"Berlin\",\n    timezone: \"Europe/Berlin\",\n  },\n  FR: {\n    latitude: 48.8566,\n    longitude: 2.3522,\n    country: \"France\",\n    city: \"Paris\",\n    timezone: \"Europe/Paris\",\n  },\n  JP: {\n    latitude: 35.6762,\n    longitude: 139.6503,\n    country: \"Japan\",\n    city: \"Tokyo\",\n    timezone: \"Asia/Tokyo\",\n  },\n  KE: {\n    latitude: -1.2921,\n    longitude: 36.8219,\n    country: \"Kenya\",\n    city: \"Nairobi\",\n    timezone: \"Africa/Nairobi\",\n  },\n  IN: {\n    latitude: 28.6139,\n    longitude: 77.209,\n    country: \"India\",\n    city: \"New Delhi\",\n    timezone: \"Asia/Kolkata\",\n  },\n  BR: {\n    latitude: -23.5505,\n    longitude: -46.6333,\n    country: \"Brazil\",\n    city: \"SÃ£o Paulo\",\n    timezone: \"America/Sao_Paulo\",\n  },\n  AU: {\n    latitude: -33.8688,\n    longitude: 151.2093,\n    country: \"Australia\",\n    city: \"Sydney\",\n    timezone: \"Australia/Sydney\",\n  },\n};\n\nexport function useUserLocation() {\n  const [state, setState] = useState<LocationState>({\n    location: null,\n    isLoading: true,\n    error: null,\n    permissionDenied: false,\n  });\n\n  useEffect(() => {\n    // Try to get from localStorage first (cached location)\n    const cached = localStorage.getItem(\"userLocation\");\n    if (cached) {\n      try {\n        const parsed = JSON.parse(cached);\n        // Use cached if less than 24 hours old\n        if (Date.now() - parsed.timestamp < 24 * 60 * 60 * 1000) {\n          setState({\n            location: parsed.location,\n            isLoading: false,\n            error: null,\n            permissionDenied: false,\n          });\n          return;\n        }\n      } catch (e) {\n        localStorage.removeItem(\"userLocation\");\n      }\n    }\n\n    // Try geolocation API\n    if (\"geolocation\" in navigator) {\n      navigator.geolocation.getCurrentPosition(\n        async (position) => {\n          const { latitude, longitude } = position.coords;\n\n          // Try to get location details via reverse geocoding\n          let locationDetails: UserLocation = { latitude, longitude };\n\n          try {\n            // Using a free reverse geocoding service\n            const response = await fetch(\n              `https://nominatim.openstreetmap.org/reverse?lat=${latitude}&lon=${longitude}&format=json`,\n              { headers: { \"User-Agent\": \"RadioGlobe/1.0\" } },\n            );\n            if (response.ok) {\n              const data = await response.json();\n              locationDetails = {\n                latitude,\n                longitude,\n                country: data.address?.country,\n                city:\n                  data.address?.city ||\n                  data.address?.town ||\n                  data.address?.village,\n                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n              };\n            }\n          } catch (e) {\n            // Reverse geocoding failed, use coordinates only\n            locationDetails.timezone =\n              Intl.DateTimeFormat().resolvedOptions().timeZone;\n          }\n\n          // Cache the location\n          localStorage.setItem(\n            \"userLocation\",\n            JSON.stringify({\n              location: locationDetails,\n              timestamp: Date.now(),\n            }),\n          );\n\n          setState({\n            location: locationDetails,\n            isLoading: false,\n            error: null,\n            permissionDenied: false,\n          });\n        },\n        (error) => {\n          console.warn(\"Geolocation error:\", error.message);\n\n          // Use timezone-based fallback\n          const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n          const fallbackLocation = getFallbackFromTimezone(timezone);\n\n          setState({\n            location: fallbackLocation,\n            isLoading: false,\n            error: error.message,\n            permissionDenied: error.code === error.PERMISSION_DENIED,\n          });\n        },\n        {\n          enableHighAccuracy: false,\n          timeout: 10000,\n          maximumAge: 300000, // 5 minutes\n        },\n      );\n    } else {\n      // Geolocation not supported, use timezone fallback\n      const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n      const fallbackLocation = getFallbackFromTimezone(timezone);\n\n      setState({\n        location: fallbackLocation,\n        isLoading: false,\n        error: \"Geolocation not supported\",\n        permissionDenied: false,\n      });\n    }\n  }, []);\n\n  return state;\n}\n\nfunction getFallbackFromTimezone(timezone: string): UserLocation {\n  // Map timezones to countries\n  if (timezone.startsWith(\"America/\")) {\n    if (timezone.includes(\"Sao_Paulo\") || timezone.includes(\"Brasilia\")) {\n      return FALLBACK_LOCATIONS.BR;\n    }\n    return FALLBACK_LOCATIONS.US;\n  }\n  if (timezone.startsWith(\"Europe/London\")) return FALLBACK_LOCATIONS.GB;\n  if (\n    timezone.startsWith(\"Europe/Berlin\") ||\n    timezone.startsWith(\"Europe/Vienna\")\n  )\n    return FALLBACK_LOCATIONS.DE;\n  if (timezone.startsWith(\"Europe/Paris\")) return FALLBACK_LOCATIONS.FR;\n  if (timezone.startsWith(\"Asia/Tokyo\")) return FALLBACK_LOCATIONS.JP;\n  if (timezone.startsWith(\"Asia/Kolkata\")) return FALLBACK_LOCATIONS.IN;\n  if (timezone.startsWith(\"Africa/Nairobi\")) return FALLBACK_LOCATIONS.KE;\n  if (timezone.startsWith(\"Australia/\")) return FALLBACK_LOCATIONS.AU;\n\n  // Default to US\n  return FALLBACK_LOCATIONS.US;\n}\n\n// Calculate distance between two coordinates in km\nexport function calculateDistance(\n  lat1: number,\n  lon1: number,\n  lat2: number,\n  lon2: number,\n): number {\n  const R = 6371; // Earth's radius in km\n  const dLat = toRad(lat2 - lat1);\n  const dLon = toRad(lon2 - lon1);\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(toRad(lat1)) *\n      Math.cos(toRad(lat2)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\n\nfunction toRad(deg: number): number {\n  return deg * (Math.PI / 180);\n}\n\n// Get time of day category\nexport function getTimeOfDay(): \"morning\" | \"afternoon\" | \"evening\" | \"night\" {\n  const hour = new Date().getHours();\n  if (hour >= 5 && hour < 12) return \"morning\";\n  if (hour >= 12 && hour < 17) return \"afternoon\";\n  if (hour >= 17 && hour < 21) return \"evening\";\n  return \"night\";\n}\n\n// Get recommended genres based on time of day\nexport function getTimeBasedGenres(): string[] {\n  const timeOfDay = getTimeOfDay();\n  switch (timeOfDay) {\n    case \"morning\":\n      return [\"news\", \"talk\", \"classical\", \"jazz\", \"acoustic\"];\n    case \"afternoon\":\n      return [\"pop\", \"rock\", \"indie\", \"electronic\", \"world\"];\n    case \"evening\":\n      return [\"jazz\", \"soul\", \"r&b\", \"chill\", \"lounge\"];\n    case \"night\":\n      return [\"ambient\", \"electronic\", \"classical\", \"lo-fi\", \"sleep\"];\n  }\n}\n"],"names":["FALLBACK_LOCATIONS","US","latitude","longitude","country","city","timezone","GB","DE","FR","JP","KE","IN","BR","AU","useUserLocation","state","setState","location","isLoading","error","permissionDenied","cached","localStorage","getItem","parsed","JSON","parse","Date","now","timestamp","e","removeItem","navigator","geolocation","getCurrentPosition","position","coords","locationDetails","response","fetch","headers","ok","data","json","address","town","village","Intl","DateTimeFormat","resolvedOptions","timeZone","setItem","stringify","console","warn","message","fallbackLocation","getFallbackFromTimezone","code","PERMISSION_DENIED","enableHighAccuracy","timeout","maximumAge","startsWith","includes","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","toRad","dLon","a","Math","sin","cos","c","atan2","sqrt","deg","PI","getTimeOfDay","hour","getHours","getTimeBasedGenres","timeOfDay"],"mappings":"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"}},
    {"offset": {"line": 3859, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/StationPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport {\n  MapPin,\n  Clock,\n  Users,\n  ExternalLink,\n  Heart,\n  Share2,\n  X,\n  Wifi,\n  WifiOff,\n  Copy,\n  Check,\n} from \"lucide-react\";\nimport { RadioStation } from \"../types\";\nimport { useFavorites } from \"../hooks/useUserData\";\nimport { useUserLocation, calculateDistance } from \"../hooks/useUserLocation\";\n\ninterface StationPanelProps {\n  station: RadioStation;\n  onClose?: () => void;\n}\n\nexport function StationPanel({ station, onClose }: StationPanelProps) {\n  const { isFavorite, toggleFavorite } = useFavorites();\n  const { location } = useUserLocation();\n  const [copied, setCopied] = useState(false);\n\n  const isStationFavorite = isFavorite(station.id);\n\n  const currentTime = new Date().toLocaleTimeString(\"en-US\", {\n    timeZone: station.location.timezone || \"UTC\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n\n  // Calculate distance from user\n  const distance =\n    location && station.location.lat && station.location.lng\n      ? calculateDistance(\n          location.latitude,\n          location.longitude,\n          station.location.lat,\n          station.location.lng,\n        )\n      : null;\n\n  const formatDistance = (km: number) => {\n    if (km < 1) return `${Math.round(km * 1000)}m`;\n    if (km < 100) return `${km.toFixed(1)}km`;\n    return `${Math.round(km).toLocaleString()}km`;\n  };\n\n  // Get quality indicator\n  const getQualityIndicator = (bitrate?: number) => {\n    if (!bitrate)\n      return { label: \"Unknown\", color: \"text-gray-400\", icon: WifiOff };\n    if (bitrate >= 256)\n      return { label: \"HD\", color: \"text-green-400\", icon: Wifi };\n    if (bitrate >= 128)\n      return { label: \"Good\", color: \"text-blue-400\", icon: Wifi };\n    return { label: \"Low\", color: \"text-yellow-400\", icon: Wifi };\n  };\n\n  const quality = getQualityIndicator(station.bitrate);\n\n  const handleShare = async () => {\n    const shareData = {\n      title: station.name,\n      text: `Listen to ${station.name} on Radio Globe`,\n      url: `${window.location.origin}?station=${station.id}`,\n    };\n\n    if (navigator.share) {\n      try {\n        await navigator.share(shareData);\n      } catch (e) {\n        // User cancelled or share failed\n        copyToClipboard(shareData.url);\n      }\n    } else {\n      copyToClipboard(shareData.url);\n    }\n  };\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.9 }}\n      animate={{ opacity: 1, scale: 1 }}\n      exit={{ opacity: 0, scale: 0.9 }}\n      className=\"glass rounded-xl p-5 w-80 max-w-sm relative\"\n    >\n      {/* Close Button */}\n      {onClose && (\n        <button\n          onClick={onClose}\n          className=\"absolute top-3 right-3 p-1.5 rounded-lg hover:bg-white/10 transition-colors\"\n        >\n          <X className=\"w-4 h-4 text-gray-400\" />\n        </button>\n      )}\n\n      {/* Header */}\n      <div className=\"mb-4 pr-8\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0\">\n            <span className=\"text-white font-bold text-lg\">\n              {station.name.charAt(0).toUpperCase()}\n            </span>\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"font-bold text-lg text-white truncate\">\n              {station.name}\n            </h3>\n            <div className=\"flex items-center gap-1.5 text-gray-400 text-sm\">\n              <MapPin className=\"w-3.5 h-3.5 flex-shrink-0\" />\n              <span className=\"truncate\">\n                {station.location.city}, {station.location.country}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        {/* Distance Badge */}\n        {distance !== null && (\n          <div className=\"mt-2 inline-flex items-center gap-1 px-2 py-1 bg-blue-500/20 text-blue-300 rounded-full text-xs\">\n            <MapPin className=\"w-3 h-3\" />\n            {formatDistance(distance)} away\n          </div>\n        )}\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-3 gap-2 mb-4\">\n        <div className=\"text-center p-2.5 bg-white/5 rounded-lg\">\n          <Users className=\"w-4 h-4 mx-auto mb-1 text-blue-400\" />\n          <div className=\"text-sm font-semibold text-white\">\n            {station.listeners >= 1000\n              ? `${(station.listeners / 1000).toFixed(0)}k`\n              : station.listeners}\n          </div>\n          <div className=\"text-[10px] text-gray-500\">Listeners</div>\n        </div>\n        <div className=\"text-center p-2.5 bg-white/5 rounded-lg\">\n          <Clock className=\"w-4 h-4 mx-auto mb-1 text-green-400\" />\n          <div className=\"text-sm font-semibold text-white\">{currentTime}</div>\n          <div className=\"text-[10px] text-gray-500\">Local Time</div>\n        </div>\n        <div className=\"text-center p-2.5 bg-white/5 rounded-lg\">\n          <quality.icon className={`w-4 h-4 mx-auto mb-1 ${quality.color}`} />\n          <div className={`text-sm font-semibold ${quality.color}`}>\n            {quality.label}\n          </div>\n          <div className=\"text-[10px] text-gray-500\">\n            {station.bitrate ? `${station.bitrate}kbps` : \"Quality\"}\n          </div>\n        </div>\n      </div>\n\n      {/* Genre Tags */}\n      {station.genre && (\n        <div className=\"flex flex-wrap gap-1.5 mb-4\">\n          {station.genre\n            .split(\",\")\n            .slice(0, 3)\n            .map((genre, i) => (\n              <span\n                key={i}\n                className=\"px-2 py-0.5 bg-white/10 text-gray-300 rounded-full text-xs\"\n              >\n                {genre.trim()}\n              </span>\n            ))}\n        </div>\n      )}\n\n      {/* Language & Details */}\n      <div className=\"space-y-2 mb-4 text-sm\">\n        {station.language && (\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-gray-500\">Language</span>\n            <span className=\"text-gray-300 capitalize\">{station.language}</span>\n          </div>\n        )}\n      </div>\n\n      {/* Actions */}\n      <div className=\"flex gap-2\">\n        <button\n          onClick={() => toggleFavorite(station)}\n          className={`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg font-medium transition-all ${\n            isStationFavorite\n              ? \"bg-pink-500/20 text-pink-400 border border-pink-500/30\"\n              : \"bg-white/10 text-white hover:bg-white/20\"\n          }`}\n        >\n          <Heart\n            className={`w-4 h-4 ${isStationFavorite ? \"fill-current\" : \"\"}`}\n          />\n          {isStationFavorite ? \"Saved\" : \"Save\"}\n        </button>\n        <button\n          onClick={handleShare}\n          className=\"flex items-center justify-center gap-2 px-4 py-2.5 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors\"\n        >\n          {copied ? (\n            <Check className=\"w-4 h-4 text-green-400\" />\n          ) : (\n            <Share2 className=\"w-4 h-4\" />\n          )}\n        </button>\n        {station.website && (\n          <a\n            href={station.website}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"flex items-center justify-center px-3 py-2.5 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors\"\n          >\n            <ExternalLink className=\"w-4 h-4\" />\n          </a>\n        )}\n      </div>\n    </motion.div>\n  );\n}\n"],"names":["StationPanel","station","onClose","isFavorite","toggleFavorite","location","copied","setCopied","isStationFavorite","id","currentTime","Date","toLocaleTimeString","timeZone","timezone","hour","minute","distance","lat","lng","latitude","longitude","formatDistance","km","Math","round","toFixed","toLocaleString","getQualityIndicator","bitrate","label","color","icon","quality","handleShare","shareData","title","name","text","url","window","origin","navigator","share","e","copyToClipboard","clipboard","writeText","setTimeout","div","initial","opacity","scale","animate","exit","className","onClick","charAt","toUpperCase","city","country","listeners","genre","split","slice","map","i","trim","language","website","href","target","rel"],"mappings":"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"}},
    {"offset": {"line": 4316, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/SearchPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Search,\n  MapPin,\n  Volume2,\n  Heart,\n  Share,\n  Globe,\n  Music,\n  Radio,\n} from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { RadioStation } from \"../types\";\nimport { useGlobeStore } from \"../stores/globe-store\";\nimport { radioStationService } from \"../services/radioStationService\";\n\ninterface SearchPanelProps {\n  className?: string;\n}\n\nexport function SearchPanel({ className = \"\" }: SearchPanelProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [searchResults, setSearchResults] = useState<RadioStation[]>([]);\n  const [popularStations, setPopularStations] = useState<RadioStation[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [searchFilter, setSearchFilter] = useState<\n    \"all\" | \"genre\" | \"country\" | \"city\"\n  >(\"all\");\n  const { selectStation } = useGlobeStore();\n\n  // Load popular stations once\n  useEffect(() => {\n    const fetchPopular = async () => {\n      try {\n        const stations = await radioStationService.getPopularStations(8);\n        setPopularStations(stations);\n      } catch (error) {\n        console.error(\"Failed to load popular stations:\", error);\n      }\n    };\n    fetchPopular();\n  }, []);\n\n  // Enhanced search with filters\n  useEffect(() => {\n    let timer: NodeJS.Timeout;\n\n    if (searchTerm.length > 2) {\n      setIsLoading(true);\n\n      timer = setTimeout(async () => {\n        let results: RadioStation[] = [];\n\n        try {\n          switch (searchFilter) {\n            case \"genre\":\n              results =\n                await radioStationService.getStationsByGenre(searchTerm);\n              break;\n            case \"country\":\n              results =\n                await radioStationService.getStationsByCountry(searchTerm);\n              break;\n            case \"city\":\n              results = await radioStationService.getStationsByCity(searchTerm);\n              break;\n            default:\n              results = await radioStationService.searchStations(searchTerm);\n          }\n\n          setSearchResults(results.slice(0, 10)); // Limit results\n        } catch (error) {\n          console.error(\"Search error:\", error);\n          setSearchResults([]);\n        } finally {\n          setIsLoading(false);\n        }\n      }, 300);\n    } else {\n      setSearchResults([]);\n      setIsLoading(false);\n    }\n\n    return () => {\n      if (timer) clearTimeout(timer);\n    };\n  }, [searchTerm, searchFilter]);\n\n  const handleStationSelect = (station: RadioStation) => {\n    selectStation(station);\n    setIsOpen(false);\n    setSearchTerm(\"\");\n    setSearchResults([]);\n  };\n\n  return (\n    <div className={`relative ${className}`}>\n      {/* Search Input */}\n      <motion.div className=\"flex items-center\" whileHover={{ scale: 1.02 }}>\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-3 w-4 h-4 text-gray-400\" />\n          <input\n            type=\"text\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            onFocus={() => setIsOpen(true)}\n            placeholder=\"Search radio stations...\"\n            className=\"glass pl-10 pr-4 py-2 w-64 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          />\n          {isLoading && (\n            <div className=\"absolute right-3 top-3\">\n              <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n            </div>\n          )}\n        </div>\n      </motion.div>\n\n      {/* Search Results Dropdown */}\n      <AnimatePresence>\n        {isOpen && (\n          <motion.div\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -10 }}\n            className=\"absolute top-full left-0 mt-2 w-80 glass rounded-xl overflow-hidden z-50 max-h-96 overflow-y-auto\"\n          >\n            {/* Search Filters */}\n            <div className=\"p-3 border-b border-white/10\">\n              <div className=\"flex gap-2\">\n                {[\"all\", \"genre\", \"country\", \"city\"].map((filter) => (\n                  <button\n                    key={filter}\n                    onClick={() => setSearchFilter(filter as any)}\n                    className={`px-3 py-1 text-xs rounded-full transition-colors ${\n                      searchFilter === filter\n                        ? \"bg-blue-500 text-white\"\n                        : \"bg-white/10 text-gray-300 hover:bg-white/20\"\n                    }`}\n                  >\n                    {filter.charAt(0).toUpperCase() + filter.slice(1)}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {/* Search Results */}\n            {searchResults.length > 0 && (\n              <div className=\"p-2\">\n                <div className=\"text-xs text-gray-400 px-2 py-1\">\n                  {searchResults.length} stations found\n                </div>\n                {searchResults.map((station) => (\n                  <motion.button\n                    key={station.id}\n                    onClick={() => handleStationSelect(station)}\n                    className=\"w-full p-3 text-left hover:bg-white/10 rounded-lg transition-colors\"\n                    whileHover={{ scale: 1.02 }}\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center flex-shrink-0\">\n                        <Radio className=\"w-5 h-5 text-white\" />\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"font-medium text-white text-sm truncate\">\n                          {station.name}\n                        </div>\n                        <div className=\"text-xs text-gray-400 flex items-center gap-2\">\n                          <MapPin className=\"w-3 h-3\" />\n                          {station.location.city}, {station.location.country}\n                          <span className=\"bg-blue-500/20 text-blue-300 px-1.5 py-0.5 rounded text-xs\">\n                            {station.genre}\n                          </span>\n                        </div>\n                      </div>\n                      <div className=\"text-xs text-gray-500\">\n                        {(station.listeners / 1000).toFixed(0)}k\n                      </div>\n                    </div>\n                  </motion.button>\n                ))}\n              </div>\n            )}\n\n            {/* Popular Stations (when no search) */}\n            {searchTerm.length === 0 && popularStations.length > 0 && (\n              <div className=\"p-2\">\n                <div className=\"text-xs text-gray-400 px-2 py-2 flex items-center gap-2\">\n                  <Music className=\"w-3 h-3\" />\n                  Popular Stations\n                </div>\n                {popularStations.map((station) => (\n                  <motion.button\n                    key={station.id}\n                    onClick={() => handleStationSelect(station)}\n                    className=\"w-full p-3 text-left hover:bg-white/10 rounded-lg transition-colors\"\n                    whileHover={{ scale: 1.02 }}\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-600 rounded-lg flex items-center justify-center flex-shrink-0\">\n                        <span className=\"text-white text-xs font-bold\">\n                          {station.name.charAt(0)}\n                        </span>\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"font-medium text-white text-sm truncate\">\n                          {station.name}\n                        </div>\n                        <div className=\"text-xs text-gray-400\">\n                          {station.location.city}, {station.location.country}\n                        </div>\n                      </div>\n                      <div className=\"text-xs text-green-400\">\n                        {(station.listeners / 1000).toFixed(0)}k\n                      </div>\n                    </div>\n                  </motion.button>\n                ))}\n              </div>\n            )}\n\n            {/* No Results */}\n            {searchTerm.length > 2 &&\n              searchResults.length === 0 &&\n              !isLoading && (\n                <div className=\"p-6 text-center text-gray-400\">\n                  <Globe className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n                  <div className=\"text-sm\">No stations found</div>\n                  <div className=\"text-xs\">\n                    Try searching by genre or country\n                  </div>\n                </div>\n              )}\n\n            {/* Close Button */}\n            <div className=\"p-2 border-t border-white/10\">\n              <button\n                onClick={() => {\n                  setIsOpen(false);\n                  setSearchTerm(\"\");\n                }}\n                className=\"w-full py-2 text-xs text-gray-400 hover:text-white transition-colors\"\n              >\n                Close\n              </button>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Click outside to close */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 z-40\"\n          onClick={() => {\n            setIsOpen(false);\n            setSearchTerm(\"\");\n          }}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":["SearchPanel","className","isOpen","setIsOpen","searchTerm","setSearchTerm","searchResults","setSearchResults","popularStations","setPopularStations","isLoading","setIsLoading","searchFilter","setSearchFilter","selectStation","fetchPopular","stations","getPopularStations","error","console","timer","length","setTimeout","results","getStationsByGenre","getStationsByCountry","getStationsByCity","searchStations","slice","clearTimeout","handleStationSelect","station","div","whileHover","scale","type","value","onChange","e","target","onFocus","placeholder","initial","opacity","y","animate","exit","map","filter","onClick","charAt","toUpperCase","button","name","location","city","country","genre","listeners","toFixed","id"],"mappings":"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"}},
    {"offset": {"line": 4820, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/StationDirectory.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useMemo, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport {\n  Globe,\n  Radio,\n  MapPin,\n  Play,\n  Volume2,\n  Heart,\n  Clock,\n  Compass,\n  TrendingUp,\n  History,\n  Sparkles,\n  Filter,\n  ChevronDown,\n} from \"lucide-react\";\nimport { RadioStation } from \"../types\";\nimport { useGlobeStore } from \"../stores/globe-store\";\nimport { useFavorites, useRecentStations } from \"../hooks/useUserData\";\nimport {\n  useUserLocation,\n  calculateDistance,\n  getTimeOfDay,\n  getTimeBasedGenres,\n} from \"../hooks/useUserLocation\";\nimport { radioDiscoveryService } from \"../services/radioDiscoveryService\";\n\ninterface StationDirectoryProps {\n  className?: string;\n}\n\ntype TabType = \"discover\" | \"nearby\" | \"favorites\" | \"recent\";\n\nexport function StationDirectory({ className = \"\" }: StationDirectoryProps) {\n  const [activeTab, setActiveTab] = useState<TabType>(\"discover\");\n  const [selectedGenre, setSelectedGenre] = useState<string>(\"all\");\n  const [stations, setStations] = useState<RadioStation[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [showFilters, setShowFilters] = useState(false);\n\n  const { selectedStation, selectStation } = useGlobeStore();\n  const { favorites, isFavorite, toggleFavorite } = useFavorites();\n  const { recent, addToRecent } = useRecentStations();\n  const { location, isLoading: locationLoading } = useUserLocation();\n\n  // Load stations\n  useEffect(() => {\n    const loadStations = async () => {\n      setIsLoading(true);\n      try {\n        const data = await radioDiscoveryService.getTopStations(100);\n        setStations(data);\n      } catch (error) {\n        console.error(\"Failed to load stations:\", error);\n      }\n      setIsLoading(false);\n    };\n    loadStations();\n  }, []);\n\n  // Get unique genres\n  const genres = useMemo(() => {\n    const allGenres = stations.flatMap(\n      (s) => s.genre?.split(\",\").map((g) => g.trim().toLowerCase()) || [],\n    );\n    return [\"all\", ...Array.from(new Set(allGenres)).slice(0, 10)];\n  }, [stations]);\n\n  // Time-based recommendations\n  const timeOfDay = getTimeOfDay();\n  const recommendedGenres = getTimeBasedGenres();\n\n  // Sort stations by distance if location available\n  const stationsWithDistance = useMemo(() => {\n    if (!location) return stations.map((s) => ({ station: s, distance: null }));\n\n    return stations\n      .map((station) => {\n        const distance =\n          station.location.lat && station.location.lng\n            ? calculateDistance(\n                location.latitude,\n                location.longitude,\n                station.location.lat,\n                station.location.lng,\n              )\n            : null;\n        return { station, distance };\n      })\n      .sort((a, b) => {\n        if (a.distance === null) return 1;\n        if (b.distance === null) return -1;\n        return a.distance - b.distance;\n      });\n  }, [stations, location]);\n\n  // Filter stations by genre\n  const filteredStations = useMemo(() => {\n    if (selectedGenre === \"all\") return stationsWithDistance;\n    return stationsWithDistance.filter(({ station }) =>\n      station.genre?.toLowerCase().includes(selectedGenre),\n    );\n  }, [stationsWithDistance, selectedGenre]);\n\n  // Get display data based on active tab\n  const displayData = useMemo(() => {\n    switch (activeTab) {\n      case \"nearby\":\n        return filteredStations.slice(0, 20);\n      case \"favorites\":\n        return favorites.map((s) => ({ station: s, distance: null }));\n      case \"recent\":\n        return recent.map((s) => ({ station: s, distance: null }));\n      case \"discover\":\n      default:\n        // Time-based smart discovery\n        const timeFiltered = stationsWithDistance.filter(({ station }) =>\n          recommendedGenres.some((genre) =>\n            station.genre?.toLowerCase().includes(genre),\n          ),\n        );\n        // Mix time-relevant with popular\n        return [\n          ...timeFiltered.slice(0, 5),\n          ...stationsWithDistance\n            .filter((s) => !timeFiltered.includes(s))\n            .sort((a, b) => b.station.listeners - a.station.listeners)\n            .slice(0, 15),\n        ];\n    }\n  }, [\n    activeTab,\n    filteredStations,\n    favorites,\n    recent,\n    stationsWithDistance,\n    recommendedGenres,\n  ]);\n\n  const handleStationSelect = (station: RadioStation) => {\n    selectStation(station);\n    addToRecent(station);\n  };\n\n  const formatDistance = (km: number | null) => {\n    if (km === null) return null;\n    if (km < 1) return `${Math.round(km * 1000)}m`;\n    if (km < 100) return `${km.toFixed(0)}km`;\n    return `${Math.round(km).toLocaleString()}km`;\n  };\n\n  const tabs = [\n    { id: \"discover\" as TabType, label: \"Discover\", icon: Sparkles },\n    { id: \"nearby\" as TabType, label: \"Near Me\", icon: Compass },\n    {\n      id: \"favorites\" as TabType,\n      label: \"Favorites\",\n      icon: Heart,\n      count: favorites.length,\n    },\n    {\n      id: \"recent\" as TabType,\n      label: \"Recent\",\n      icon: History,\n      count: recent.length,\n    },\n  ];\n\n  return (\n    <motion.div\n      className={`glass rounded-xl overflow-hidden flex flex-col h-full ${className}`}\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n    >\n      {/* Header */}\n      <div className=\"p-4 border-b border-white/10 flex-shrink-0\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <div className=\"flex items-center gap-2\">\n            <Globe className=\"w-5 h-5 text-blue-400\" />\n            <h2 className=\"text-lg font-bold text-white\">Stations</h2>\n          </div>\n\n          {/* Time-based greeting */}\n          <div className=\"flex items-center gap-2 text-xs\">\n            <span className=\"text-gray-400\">\n              {timeOfDay === \"morning\" && \"âï¸ Good morning\"}\n              {timeOfDay === \"afternoon\" && \"ð¤ï¸ Good afternoon\"}\n              {timeOfDay === \"evening\" && \"ð Good evening\"}\n              {timeOfDay === \"night\" && \"ð Night mode\"}\n            </span>\n          </div>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"flex gap-1 bg-white/5 p-1 rounded-lg\">\n          {tabs.map((tab) => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={`flex-1 flex items-center justify-center gap-1.5 px-2 py-2 text-xs rounded-md transition-all ${\n                activeTab === tab.id\n                  ? \"bg-blue-500 text-white shadow-lg\"\n                  : \"text-gray-400 hover:text-white hover:bg-white/5\"\n              }`}\n            >\n              <tab.icon className=\"w-3.5 h-3.5\" />\n              <span className=\"hidden sm:inline\">{tab.label}</span>\n              {tab.count !== undefined && tab.count > 0 && (\n                <span\n                  className={`px-1.5 py-0.5 text-[10px] rounded-full ${\n                    activeTab === tab.id ? \"bg-white/20\" : \"bg-white/10\"\n                  }`}\n                >\n                  {tab.count}\n                </span>\n              )}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Filters - For discover and nearby tabs */}\n      {(activeTab === \"discover\" || activeTab === \"nearby\") && (\n        <div className=\"px-4 py-2 border-b border-white/5 flex-shrink-0\">\n          <button\n            onClick={() => setShowFilters(!showFilters)}\n            className=\"flex items-center gap-2 text-xs text-gray-400 hover:text-white transition-colors\"\n          >\n            <Filter className=\"w-3.5 h-3.5\" />\n            <span>Filter by genre</span>\n            <ChevronDown\n              className={`w-3.5 h-3.5 transition-transform ${showFilters ? \"rotate-180\" : \"\"}`}\n            />\n          </button>\n\n          <AnimatePresence>\n            {showFilters && (\n              <motion.div\n                initial={{ height: 0, opacity: 0 }}\n                animate={{ height: \"auto\", opacity: 1 }}\n                exit={{ height: 0, opacity: 0 }}\n                className=\"overflow-hidden\"\n              >\n                <div className=\"flex flex-wrap gap-1.5 pt-2\">\n                  {genres.map((genre) => (\n                    <button\n                      key={genre}\n                      onClick={() => setSelectedGenre(genre)}\n                      className={`px-2 py-1 text-xs rounded-full transition-colors ${\n                        selectedGenre === genre\n                          ? \"bg-blue-500 text-white\"\n                          : \"bg-white/10 text-gray-400 hover:text-white hover:bg-white/20\"\n                      }`}\n                    >\n                      {genre === \"all\" ? \"All\" : genre}\n                    </button>\n                  ))}\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n      )}\n\n      {/* Content Heading */}\n      {activeTab === \"discover\" && (\n        <div className=\"px-4 py-2 flex-shrink-0\">\n          <div className=\"flex items-center gap-2 text-xs text-gray-400\">\n            <TrendingUp className=\"w-3.5 h-3.5 text-green-400\" />\n            <span>\n              Recommended for {timeOfDay}:{\" \"}\n              <span className=\"text-gray-300\">\n                {recommendedGenres.slice(0, 3).join(\", \")}\n              </span>\n            </span>\n          </div>\n        </div>\n      )}\n\n      {activeTab === \"nearby\" && location && (\n        <div className=\"px-4 py-2 flex-shrink-0\">\n          <div className=\"flex items-center gap-2 text-xs text-gray-400\">\n            <MapPin className=\"w-3.5 h-3.5 text-blue-400\" />\n            <span>\n              Stations near{\" \"}\n              <span className=\"text-gray-300\">\n                {location.city || \"your location\"}\n              </span>\n            </span>\n          </div>\n        </div>\n      )}\n\n      {/* Station List */}\n      <div className=\"flex-1 overflow-y-auto\">\n        {isLoading ? (\n          <div className=\"flex items-center justify-center h-32\">\n            <div className=\"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin\" />\n          </div>\n        ) : displayData.length === 0 ? (\n          <div className=\"p-8 text-center text-gray-400\">\n            <Radio className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n            <div className=\"text-sm\">\n              {activeTab === \"favorites\" && \"No favorites yet\"}\n              {activeTab === \"recent\" && \"No recently played\"}\n              {activeTab === \"nearby\" && \"No nearby stations found\"}\n              {activeTab === \"discover\" && \"No stations found\"}\n            </div>\n            <div className=\"text-xs mt-1\">\n              {activeTab === \"favorites\" &&\n                \"Tap the heart icon to save stations\"}\n              {activeTab === \"recent\" && \"Play some stations to see them here\"}\n            </div>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-white/5\">\n            {displayData.map(({ station, distance }) => (\n              <StationListItem\n                key={station.id}\n                station={station}\n                distance={formatDistance(distance)}\n                isSelected={selectedStation?.id === station.id}\n                isFavorite={isFavorite(station.id)}\n                onSelect={() => handleStationSelect(station)}\n                onToggleFavorite={() => toggleFavorite(station)}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Footer Stats */}\n      <div className=\"p-3 border-t border-white/10 bg-white/5 flex-shrink-0\">\n        <div className=\"flex justify-between text-xs text-gray-500\">\n          <span>{displayData.length} stations</span>\n          <span>{location?.city && `ð ${location.city}`}</span>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\ninterface StationListItemProps {\n  station: RadioStation;\n  distance: string | null;\n  isSelected: boolean;\n  isFavorite: boolean;\n  onSelect: () => void;\n  onToggleFavorite: () => void;\n}\n\nfunction StationListItem({\n  station,\n  distance,\n  isSelected,\n  isFavorite,\n  onSelect,\n  onToggleFavorite,\n}: StationListItemProps) {\n  return (\n    <motion.div\n      className={`p-3 cursor-pointer transition-colors ${\n        isSelected ? \"bg-blue-500/20\" : \"hover:bg-white/5\"\n      }`}\n      onClick={onSelect}\n      whileTap={{ scale: 0.98 }}\n    >\n      <div className=\"flex items-center gap-3\">\n        {/* Station Icon */}\n        <div\n          className={`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${\n            isSelected\n              ? \"bg-blue-500\"\n              : \"bg-gradient-to-br from-purple-500/30 to-blue-500/30\"\n          }`}\n        >\n          {isSelected ? (\n            <div className=\"flex items-end gap-0.5 h-4\">\n              <div\n                className=\"w-1 bg-white rounded-full animate-pulse\"\n                style={{ height: \"40%\" }}\n              />\n              <div\n                className=\"w-1 bg-white rounded-full animate-pulse\"\n                style={{ height: \"100%\", animationDelay: \"0.1s\" }}\n              />\n              <div\n                className=\"w-1 bg-white rounded-full animate-pulse\"\n                style={{ height: \"60%\", animationDelay: \"0.2s\" }}\n              />\n            </div>\n          ) : (\n            <span className=\"text-white font-bold text-sm\">\n              {station.name.charAt(0).toUpperCase()}\n            </span>\n          )}\n        </div>\n\n        {/* Station Info */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2\">\n            <h3\n              className={`font-medium text-sm truncate ${\n                isSelected ? \"text-blue-300\" : \"text-white\"\n              }`}\n            >\n              {station.name}\n            </h3>\n          </div>\n\n          <div className=\"flex items-center gap-2 text-xs text-gray-500 mt-0.5\">\n            <span className=\"truncate\">{station.location.country}</span>\n            {station.genre && (\n              <>\n                <span className=\"text-gray-600\">â¢</span>\n                <span className=\"truncate text-gray-400\">\n                  {station.genre.split(\",\")[0]}\n                </span>\n              </>\n            )}\n          </div>\n        </div>\n\n        {/* Distance & Stats */}\n        <div className=\"flex items-center gap-2 flex-shrink-0\">\n          {distance && (\n            <span className=\"text-xs text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-full\">\n              {distance}\n            </span>\n          )}\n\n          <div className=\"flex items-center gap-1 text-xs text-gray-500\">\n            <Volume2 className=\"w-3 h-3\" />\n            <span>\n              {station.listeners >= 1000\n                ? `${(station.listeners / 1000).toFixed(0)}k`\n                : station.listeners}\n            </span>\n          </div>\n\n          {/* Favorite Button */}\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              onToggleFavorite();\n            }}\n            className={`p-1.5 rounded-full transition-colors ${\n              isFavorite\n                ? \"text-pink-400 bg-pink-500/20\"\n                : \"text-gray-500 hover:text-pink-400 hover:bg-white/5\"\n            }`}\n          >\n            <Heart\n              className={`w-3.5 h-3.5 ${isFavorite ? \"fill-current\" : \"\"}`}\n            />\n          </button>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n"],"names":["StationDirectory","className","activeTab","setActiveTab","selectedGenre","setSelectedGenre","stations","setStations","isLoading","setIsLoading","showFilters","setShowFilters","selectedStation","selectStation","favorites","isFavorite","toggleFavorite","recent","addToRecent","location","locationLoading","loadStations","data","getTopStations","error","console","genres","allGenres","flatMap","s","genre","split","map","g","trim","toLowerCase","Array","from","Set","slice","timeOfDay","recommendedGenres","stationsWithDistance","station","distance","lat","lng","latitude","longitude","sort","a","b","filteredStations","filter","includes","displayData","timeFiltered","some","listeners","handleStationSelect","formatDistance","km","Math","round","toFixed","toLocaleString","tabs","id","label","icon","count","length","div","initial","opacity","y","animate","tab","onClick","undefined","height","exit","join","city","StationListItem","isSelected","onSelect","onToggleFavorite","whileTap","scale","style","animationDelay","name","charAt","toUpperCase","country","e","stopPropagation"],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AACA;AACA;AAMA;;;AA5BA;;;;;;;;AAoCO,SAASA,iBAAiB,EAAEC,YAAY,EAAE,EAAyB;;IACxE,MAAM,CAACC,WAAWC,aAAa,GAAG,IAAA,wLAAQ,EAAU;IACpD,MAAM,CAACC,eAAeC,iBAAiB,GAAG,IAAA,wLAAQ,EAAS;IAC3D,MAAM,CAACC,UAAUC,YAAY,GAAG,IAAA,wLAAQ,EAAiB,EAAE;IAC3D,MAAM,CAACC,WAAWC,aAAa,GAAG,IAAA,wLAAQ,EAAC;IAC3C,MAAM,CAACC,aAAaC,eAAe,GAAG,IAAA,wLAAQ,EAAC;IAE/C,MAAM,EAAEC,eAAe,EAAEC,aAAa,EAAE,GAAG,IAAA,kKAAa;IACxD,MAAM,EAAEC,SAAS,EAAEC,UAAU,EAAEC,cAAc,EAAE,GAAG,IAAA,6JAAY;IAC9D,MAAM,EAAEC,MAAM,EAAEC,WAAW,EAAE,GAAG,IAAA,kKAAiB;IACjD,MAAM,EAAEC,QAAQ,EAAEX,WAAWY,eAAe,EAAE,GAAG,IAAA,oKAAe;IAEhE,gBAAgB;IAChB,IAAA,yLAAS;sCAAC;YACR,MAAMC;2DAAe;oBACnBZ,aAAa;oBACb,IAAI;wBACF,MAAMa,OAAO,MAAM,mLAAqB,CAACC,cAAc,CAAC;wBACxDhB,YAAYe;oBACd,EAAE,OAAOE,OAAO;wBACdC,QAAQD,KAAK,CAAC,4BAA4BA;oBAC5C;oBACAf,aAAa;gBACf;;YACAY;QACF;qCAAG,EAAE;IAEL,oBAAoB;IACpB,MAAMK,SAAS,IAAA,uLAAO;4CAAC;YACrB,MAAMC,YAAYrB,SAASsB,OAAO;8DAChC,CAACC,IAAMA,EAAEC,KAAK,EAAEC,MAAM,KAAKC;sEAAI,CAACC,IAAMA,EAAEC,IAAI,GAAGC,WAAW;wEAAO,EAAE;;YAErE,OAAO;gBAAC;mBAAUC,MAAMC,IAAI,CAAC,IAAIC,IAAIX,YAAYY,KAAK,CAAC,GAAG;aAAI;QAChE;2CAAG;QAACjC;KAAS;IAEb,6BAA6B;IAC7B,MAAMkC,YAAY,IAAA,iKAAY;IAC9B,MAAMC,oBAAoB,IAAA,uKAAkB;IAE5C,kDAAkD;IAClD,MAAMC,uBAAuB,IAAA,uLAAO;0DAAC;YACnC,IAAI,CAACvB,UAAU,OAAOb,SAAS0B,GAAG;kEAAC,CAACH,IAAM,CAAC;wBAAEc,SAASd;wBAAGe,UAAU;oBAAK,CAAC;;YAEzE,OAAOtC,SACJ0B,GAAG;kEAAC,CAACW;oBACJ,MAAMC,WACJD,QAAQxB,QAAQ,CAAC0B,GAAG,IAAIF,QAAQxB,QAAQ,CAAC2B,GAAG,GACxC,IAAA,sKAAiB,EACf3B,SAAS4B,QAAQ,EACjB5B,SAAS6B,SAAS,EAClBL,QAAQxB,QAAQ,CAAC0B,GAAG,EACpBF,QAAQxB,QAAQ,CAAC2B,GAAG,IAEtB;oBACN,OAAO;wBAAEH;wBAASC;oBAAS;gBAC7B;iEACCK,IAAI;kEAAC,CAACC,GAAGC;oBACR,IAAID,EAAEN,QAAQ,KAAK,MAAM,OAAO;oBAChC,IAAIO,EAAEP,QAAQ,KAAK,MAAM,OAAO,CAAC;oBACjC,OAAOM,EAAEN,QAAQ,GAAGO,EAAEP,QAAQ;gBAChC;;QACJ;yDAAG;QAACtC;QAAUa;KAAS;IAEvB,2BAA2B;IAC3B,MAAMiC,mBAAmB,IAAA,uLAAO;sDAAC;YAC/B,IAAIhD,kBAAkB,OAAO,OAAOsC;YACpC,OAAOA,qBAAqBW,MAAM;8DAAC,CAAC,EAAEV,OAAO,EAAE,GAC7CA,QAAQb,KAAK,EAAEK,cAAcmB,SAASlD;;QAE1C;qDAAG;QAACsC;QAAsBtC;KAAc;IAExC,uCAAuC;IACvC,MAAMmD,cAAc,IAAA,uLAAO;iDAAC;YAC1B,OAAQrD;gBACN,KAAK;oBACH,OAAOkD,iBAAiBb,KAAK,CAAC,GAAG;gBACnC,KAAK;oBACH,OAAOzB,UAAUkB,GAAG;iEAAC,CAACH,IAAM,CAAC;gCAAEc,SAASd;gCAAGe,UAAU;4BAAK,CAAC;;gBAC7D,KAAK;oBACH,OAAO3B,OAAOe,GAAG;iEAAC,CAACH,IAAM,CAAC;gCAAEc,SAASd;gCAAGe,UAAU;4BAAK,CAAC;;gBAC1D,KAAK;gBACL;oBACE,6BAA6B;oBAC7B,MAAMY,eAAed,qBAAqBW,MAAM;8EAAC,CAAC,EAAEV,OAAO,EAAE,GAC3DF,kBAAkBgB,IAAI;sFAAC,CAAC3B,QACtBa,QAAQb,KAAK,EAAEK,cAAcmB,SAASxB;;;oBAG1C,iCAAiC;oBACjC,OAAO;2BACF0B,aAAajB,KAAK,CAAC,GAAG;2BACtBG,qBACAW,MAAM;qEAAC,CAACxB,IAAM,CAAC2B,aAAaF,QAAQ,CAACzB;oEACrCoB,IAAI;qEAAC,CAACC,GAAGC,IAAMA,EAAER,OAAO,CAACe,SAAS,GAAGR,EAAEP,OAAO,CAACe,SAAS;oEACxDnB,KAAK,CAAC,GAAG;qBACb;YACL;QACF;gDAAG;QACDrC;QACAkD;QACAtC;QACAG;QACAyB;QACAD;KACD;IAED,MAAMkB,sBAAsB,CAAChB;QAC3B9B,cAAc8B;QACdzB,YAAYyB;IACd;IAEA,MAAMiB,iBAAiB,CAACC;QACtB,IAAIA,OAAO,MAAM,OAAO;QACxB,IAAIA,KAAK,GAAG,OAAO,GAAGC,KAAKC,KAAK,CAACF,KAAK,MAAM,CAAC,CAAC;QAC9C,IAAIA,KAAK,KAAK,OAAO,GAAGA,GAAGG,OAAO,CAAC,GAAG,EAAE,CAAC;QACzC,OAAO,GAAGF,KAAKC,KAAK,CAACF,IAAII,cAAc,GAAG,EAAE,CAAC;IAC/C;IAEA,MAAMC,OAAO;QACX;YAAEC,IAAI;YAAuBC,OAAO;YAAYC,MAAM,yNAAQ;QAAC;QAC/D;YAAEF,IAAI;YAAqBC,OAAO;YAAWC,MAAM,sNAAO;QAAC;QAC3D;YACEF,IAAI;YACJC,OAAO;YACPC,MAAM,gNAAK;YACXC,OAAOxD,UAAUyD,MAAM;QACzB;QACA;YACEJ,IAAI;YACJC,OAAO;YACPC,MAAM,sNAAO;YACbC,OAAOrD,OAAOsD,MAAM;QACtB;KACD;IAED,qBACE,4MAAC,uLAAM,CAACC,GAAG;QACTvE,WAAW,CAAC,sDAAsD,EAAEA,WAAW;QAC/EwE,SAAS;YAAEC,SAAS;YAAGC,GAAG;QAAG;QAC7BC,SAAS;YAAEF,SAAS;YAAGC,GAAG;QAAE;;0BAG5B,4MAAC;gBAAI1E,WAAU;;kCACb,4MAAC;wBAAIA,WAAU;;0CACb,4MAAC;gCAAIA,WAAU;;kDACb,4MAAC,gNAAK;wCAACA,WAAU;;;;;;kDACjB,4MAAC;wCAAGA,WAAU;kDAA+B;;;;;;;;;;;;0CAI/C,4MAAC;gCAAIA,WAAU;0CACb,cAAA,4MAAC;oCAAKA,WAAU;;wCACbuC,cAAc,aAAa;wCAC3BA,cAAc,eAAe;wCAC7BA,cAAc,aAAa;wCAC3BA,cAAc,WAAW;;;;;;;;;;;;;;;;;;kCAMhC,4MAAC;wBAAIvC,WAAU;kCACZiE,KAAKlC,GAAG,CAAC,CAAC6C,oBACT,4MAAC;gCAECC,SAAS,IAAM3E,aAAa0E,IAAIV,EAAE;gCAClClE,WAAW,CAAC,4FAA4F,EACtGC,cAAc2E,IAAIV,EAAE,GAChB,qCACA,mDACJ;;kDAEF,4MAACU,IAAIR,IAAI;wCAACpE,WAAU;;;;;;kDACpB,4MAAC;wCAAKA,WAAU;kDAAoB4E,IAAIT,KAAK;;;;;;oCAC5CS,IAAIP,KAAK,KAAKS,aAAaF,IAAIP,KAAK,GAAG,mBACtC,4MAAC;wCACCrE,WAAW,CAAC,uCAAuC,EACjDC,cAAc2E,IAAIV,EAAE,GAAG,gBAAgB,eACvC;kDAEDU,IAAIP,KAAK;;;;;;;+BAhBTO,IAAIV,EAAE;;;;;;;;;;;;;;;;YAyBlB,CAACjE,cAAc,cAAcA,cAAc,QAAQ,mBAClD,4MAAC;gBAAID,WAAU;;kCACb,4MAAC;wBACC6E,SAAS,IAAMnE,eAAe,CAACD;wBAC/BT,WAAU;;0CAEV,4MAAC,mNAAM;gCAACA,WAAU;;;;;;0CAClB,4MAAC;0CAAK;;;;;;0CACN,4MAAC,sOAAW;gCACVA,WAAW,CAAC,iCAAiC,EAAES,cAAc,eAAe,IAAI;;;;;;;;;;;;kCAIpF,4MAAC,+MAAe;kCACbA,6BACC,4MAAC,uLAAM,CAAC8D,GAAG;4BACTC,SAAS;gCAAEO,QAAQ;gCAAGN,SAAS;4BAAE;4BACjCE,SAAS;gCAAEI,QAAQ;gCAAQN,SAAS;4BAAE;4BACtCO,MAAM;gCAAED,QAAQ;gCAAGN,SAAS;4BAAE;4BAC9BzE,WAAU;sCAEV,cAAA,4MAAC;gCAAIA,WAAU;0CACZyB,OAAOM,GAAG,CAAC,CAACF,sBACX,4MAAC;wCAECgD,SAAS,IAAMzE,iBAAiByB;wCAChC7B,WAAW,CAAC,iDAAiD,EAC3DG,kBAAkB0B,QACd,2BACA,gEACJ;kDAEDA,UAAU,QAAQ,QAAQA;uCARtBA;;;;;;;;;;;;;;;;;;;;;;;;;;YAmBpB5B,cAAc,4BACb,4MAAC;gBAAID,WAAU;0BACb,cAAA,4MAAC;oBAAIA,WAAU;;sCACb,4MAAC,mOAAU;4BAACA,WAAU;;;;;;sCACtB,4MAAC;;gCAAK;gCACauC;gCAAU;gCAAE;8CAC7B,4MAAC;oCAAKvC,WAAU;8CACbwC,kBAAkBF,KAAK,CAAC,GAAG,GAAG2C,IAAI,CAAC;;;;;;;;;;;;;;;;;;;;;;;YAO7ChF,cAAc,YAAYiB,0BACzB,4MAAC;gBAAIlB,WAAU;0BACb,cAAA,4MAAC;oBAAIA,WAAU;;sCACb,4MAAC,uNAAM;4BAACA,WAAU;;;;;;sCAClB,4MAAC;;gCAAK;gCACU;8CACd,4MAAC;oCAAKA,WAAU;8CACbkB,SAASgE,IAAI,IAAI;;;;;;;;;;;;;;;;;;;;;;;0BAQ5B,4MAAC;gBAAIlF,WAAU;0BACZO,0BACC,4MAAC;oBAAIP,WAAU;8BACb,cAAA,4MAAC;wBAAIA,WAAU;;;;;;;;;;2BAEfsD,YAAYgB,MAAM,KAAK,kBACzB,4MAAC;oBAAItE,WAAU;;sCACb,4MAAC,gNAAK;4BAACA,WAAU;;;;;;sCACjB,4MAAC;4BAAIA,WAAU;;gCACZC,cAAc,eAAe;gCAC7BA,cAAc,YAAY;gCAC1BA,cAAc,YAAY;gCAC1BA,cAAc,cAAc;;;;;;;sCAE/B,4MAAC;4BAAID,WAAU;;gCACZC,cAAc,eACb;gCACDA,cAAc,YAAY;;;;;;;;;;;;yCAI/B,4MAAC;oBAAID,WAAU;8BACZsD,YAAYvB,GAAG,CAAC,CAAC,EAAEW,OAAO,EAAEC,QAAQ,EAAE,iBACrC,4MAACwC;4BAECzC,SAASA;4BACTC,UAAUgB,eAAehB;4BACzByC,YAAYzE,iBAAiBuD,OAAOxB,QAAQwB,EAAE;4BAC9CpD,YAAYA,WAAW4B,QAAQwB,EAAE;4BACjCmB,UAAU,IAAM3B,oBAAoBhB;4BACpC4C,kBAAkB,IAAMvE,eAAe2B;2BANlCA,QAAQwB,EAAE;;;;;;;;;;;;;;;0BAczB,4MAAC;gBAAIlE,WAAU;0BACb,cAAA,4MAAC;oBAAIA,WAAU;;sCACb,4MAAC;;gCAAMsD,YAAYgB,MAAM;gCAAC;;;;;;;sCAC1B,4MAAC;sCAAMpD,UAAUgE,QAAQ,CAAC,GAAG,EAAEhE,SAASgE,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;;AAKxD;GAnTgBnF;;QAO6B,kKAAa;QACN,6JAAY;QAC9B,kKAAiB;QACA,oKAAe;;;KAVlDA;AA8ThB,SAASoF,gBAAgB,EACvBzC,OAAO,EACPC,QAAQ,EACRyC,UAAU,EACVtE,UAAU,EACVuE,QAAQ,EACRC,gBAAgB,EACK;IACrB,qBACE,4MAAC,uLAAM,CAACf,GAAG;QACTvE,WAAW,CAAC,qCAAqC,EAC/CoF,aAAa,mBAAmB,oBAChC;QACFP,SAASQ;QACTE,UAAU;YAAEC,OAAO;QAAK;kBAExB,cAAA,4MAAC;YAAIxF,WAAU;;8BAEb,4MAAC;oBACCA,WAAW,CAAC,oEAAoE,EAC9EoF,aACI,gBACA,uDACJ;8BAEDA,2BACC,4MAAC;wBAAIpF,WAAU;;0CACb,4MAAC;gCACCA,WAAU;gCACVyF,OAAO;oCAAEV,QAAQ;gCAAM;;;;;;0CAEzB,4MAAC;gCACC/E,WAAU;gCACVyF,OAAO;oCAAEV,QAAQ;oCAAQW,gBAAgB;gCAAO;;;;;;0CAElD,4MAAC;gCACC1F,WAAU;gCACVyF,OAAO;oCAAEV,QAAQ;oCAAOW,gBAAgB;gCAAO;;;;;;;;;;;6CAInD,4MAAC;wBAAK1F,WAAU;kCACb0C,QAAQiD,IAAI,CAACC,MAAM,CAAC,GAAGC,WAAW;;;;;;;;;;;8BAMzC,4MAAC;oBAAI7F,WAAU;;sCACb,4MAAC;4BAAIA,WAAU;sCACb,cAAA,4MAAC;gCACCA,WAAW,CAAC,6BAA6B,EACvCoF,aAAa,kBAAkB,cAC/B;0CAED1C,QAAQiD,IAAI;;;;;;;;;;;sCAIjB,4MAAC;4BAAI3F,WAAU;;8CACb,4MAAC;oCAAKA,WAAU;8CAAY0C,QAAQxB,QAAQ,CAAC4E,OAAO;;;;;;gCACnDpD,QAAQb,KAAK,kBACZ;;sDACE,4MAAC;4CAAK7B,WAAU;sDAAgB;;;;;;sDAChC,4MAAC;4CAAKA,WAAU;sDACb0C,QAAQb,KAAK,CAACC,KAAK,CAAC,IAAI,CAAC,EAAE;;;;;;;;;;;;;;;;;;;;8BAQtC,4MAAC;oBAAI9B,WAAU;;wBACZ2C,0BACC,4MAAC;4BAAK3C,WAAU;sCACb2C;;;;;;sCAIL,4MAAC;4BAAI3C,WAAU;;8CACb,4MAAC,0NAAO;oCAACA,WAAU;;;;;;8CACnB,4MAAC;8CACE0C,QAAQe,SAAS,IAAI,OAClB,GAAG,CAACf,QAAQe,SAAS,GAAG,IAAI,EAAEM,OAAO,CAAC,GAAG,CAAC,CAAC,GAC3CrB,QAAQe,SAAS;;;;;;;;;;;;sCAKzB,4MAAC;4BACCoB,SAAS,CAACkB;gCACRA,EAAEC,eAAe;gCACjBV;4BACF;4BACAtF,WAAW,CAAC,qCAAqC,EAC/Cc,aACI,iCACA,sDACJ;sCAEF,cAAA,4MAAC,gNAAK;gCACJd,WAAW,CAAC,YAAY,EAAEc,aAAa,iBAAiB,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO1E;MA7GSqE"}},
    {"offset": {"line": 5635, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/UserPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { User, Settings, LogOut, Heart, History, Globe } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nexport function UserPanel() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isLoggedIn, setIsLoggedIn] = useState(false); // Mock auth state\n\n  if (!isLoggedIn) {\n    return (\n      <div className=\"flex gap-2\">\n        <button className=\"button-secondary text-sm\">Sign In</button>\n        <button className=\"button-primary text-sm\">Sign Up</button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex items-center gap-3 p-3 glass rounded-lg hover:bg-white/20 transition-colors\"\n      >\n        <div className=\"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center\">\n          <User className=\"w-4 h-4 text-white\" />\n        </div>\n        <div className=\"text-left\">\n          <div className=\"text-sm font-medium text-white\">John Doe</div>\n          <div className=\"text-xs text-gray-400\">Premium</div>\n        </div>\n      </button>\n\n      <AnimatePresence>\n        {isOpen && (\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95, y: -10 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.95, y: -10 }}\n            className=\"absolute right-0 top-full mt-2 w-64 glass rounded-xl overflow-hidden z-50\"\n          >\n            <div className=\"p-4 border-b border-white/10\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center\">\n                  <User className=\"w-6 h-6 text-white\" />\n                </div>\n                <div>\n                  <div className=\"font-medium text-white\">John Doe</div>\n                  <div className=\"text-sm text-gray-400\">john@example.com</div>\n                  <div className=\"text-xs text-blue-400\">Premium Member</div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"p-2\">\n              <button className=\"w-full flex items-center gap-3 p-3 hover:bg-white/10 rounded-lg transition-colors\">\n                <Heart className=\"w-4 h-4 text-gray-400\" />\n                <span className=\"text-white\">Favorites</span>\n                <span className=\"ml-auto text-xs text-gray-400\">24</span>\n              </button>\n\n              <button className=\"w-full flex items-center gap-3 p-3 hover:bg-white/10 rounded-lg transition-colors\">\n                <History className=\"w-4 h-4 text-gray-400\" />\n                <span className=\"text-white\">Listening History</span>\n              </button>\n\n              <button className=\"w-full flex items-center gap-3 p-3 hover:bg-white/10 rounded-lg transition-colors\">\n                <Globe className=\"w-4 h-4 text-gray-400\" />\n                <span className=\"text-white\">Discover</span>\n              </button>\n\n              <div className=\"border-t border-white/10 my-2\"></div>\n\n              <button className=\"w-full flex items-center gap-3 p-3 hover:bg-white/10 rounded-lg transition-colors\">\n                <Settings className=\"w-4 h-4 text-gray-400\" />\n                <span className=\"text-white\">Settings</span>\n              </button>\n\n              <button className=\"w-full flex items-center gap-3 p-3 hover:bg-white/10 rounded-lg transition-colors text-red-400\">\n                <LogOut className=\"w-4 h-4\" />\n                <span>Sign Out</span>\n              </button>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Click outside to close */}\n      {isOpen && (\n        <div className=\"fixed inset-0 z-40\" onClick={() => setIsOpen(false)} />\n      )}\n    </div>\n  );\n}\n"],"names":["UserPanel","isOpen","setIsOpen","isLoggedIn","setIsLoggedIn","className","onClick","div","initial","opacity","scale","y","animate","exit"],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;;;AAJA;;;;AAMO,SAASA;;IACd,MAAM,CAACC,QAAQC,UAAU,GAAG,IAAA,wLAAQ,EAAC;IACrC,MAAM,CAACC,YAAYC,cAAc,GAAG,IAAA,wLAAQ,EAAC,QAAQ,kBAAkB;IAEvE,IAAI,CAACD,YAAY;QACf,qBACE,4MAAC;YAAIE,WAAU;;8BACb,4MAAC;oBAAOA,WAAU;8BAA2B;;;;;;8BAC7C,4MAAC;oBAAOA,WAAU;8BAAyB;;;;;;;;;;;;IAGjD;IAEA,qBACE,4MAAC;QAAIA,WAAU;;0BACb,4MAAC;gBACCC,SAAS,IAAMJ,UAAU,CAACD;gBAC1BI,WAAU;;kCAEV,4MAAC;wBAAIA,WAAU;kCACb,cAAA,4MAAC,6MAAI;4BAACA,WAAU;;;;;;;;;;;kCAElB,4MAAC;wBAAIA,WAAU;;0CACb,4MAAC;gCAAIA,WAAU;0CAAiC;;;;;;0CAChD,4MAAC;gCAAIA,WAAU;0CAAwB;;;;;;;;;;;;;;;;;;0BAI3C,4MAAC,+MAAe;0BACbJ,wBACC,4MAAC,uLAAM,CAACM,GAAG;oBACTC,SAAS;wBAAEC,SAAS;wBAAGC,OAAO;wBAAMC,GAAG,CAAC;oBAAG;oBAC3CC,SAAS;wBAAEH,SAAS;wBAAGC,OAAO;wBAAGC,GAAG;oBAAE;oBACtCE,MAAM;wBAAEJ,SAAS;wBAAGC,OAAO;wBAAMC,GAAG,CAAC;oBAAG;oBACxCN,WAAU;;sCAEV,4MAAC;4BAAIA,WAAU;sCACb,cAAA,4MAAC;gCAAIA,WAAU;;kDACb,4MAAC;wCAAIA,WAAU;kDACb,cAAA,4MAAC,6MAAI;4CAACA,WAAU;;;;;;;;;;;kDAElB,4MAAC;;0DACC,4MAAC;gDAAIA,WAAU;0DAAyB;;;;;;0DACxC,4MAAC;gDAAIA,WAAU;0DAAwB;;;;;;0DACvC,4MAAC;gDAAIA,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;;;;;;sCAK7C,4MAAC;4BAAIA,WAAU;;8CACb,4MAAC;oCAAOA,WAAU;;sDAChB,4MAAC,gNAAK;4CAACA,WAAU;;;;;;sDACjB,4MAAC;4CAAKA,WAAU;sDAAa;;;;;;sDAC7B,4MAAC;4CAAKA,WAAU;sDAAgC;;;;;;;;;;;;8CAGlD,4MAAC;oCAAOA,WAAU;;sDAChB,4MAAC,sNAAO;4CAACA,WAAU;;;;;;sDACnB,4MAAC;4CAAKA,WAAU;sDAAa;;;;;;;;;;;;8CAG/B,4MAAC;oCAAOA,WAAU;;sDAChB,4MAAC,gNAAK;4CAACA,WAAU;;;;;;sDACjB,4MAAC;4CAAKA,WAAU;sDAAa;;;;;;;;;;;;8CAG/B,4MAAC;oCAAIA,WAAU;;;;;;8CAEf,4MAAC;oCAAOA,WAAU;;sDAChB,4MAAC,yNAAQ;4CAACA,WAAU;;;;;;sDACpB,4MAAC;4CAAKA,WAAU;sDAAa;;;;;;;;;;;;8CAG/B,4MAAC;oCAAOA,WAAU;;sDAChB,4MAAC,uNAAM;4CAACA,WAAU;;;;;;sDAClB,4MAAC;sDAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAQfJ,wBACC,4MAAC;gBAAII,WAAU;gBAAqBC,SAAS,IAAMJ,UAAU;;;;;;;;;;;;AAIrE;GAxFgBF;KAAAA"}},
    {"offset": {"line": 5999, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Globe } from \"../components/Globe\";\nimport { ModularAudioPlayer } from \"../components/ModularAudioPlayer\";\nimport { StationPanel } from \"../components/StationPanel\";\nimport { SearchPanel } from \"../components/SearchPanel\";\nimport { StationDirectory } from \"../components/StationDirectory\";\nimport { UserPanel } from \"../components/UserPanel\";\nimport { useGlobeStore } from \"../stores/globe-store\";\n// import { globalRadioStations } from '../data/globalRadioStations'\nimport { radioDiscoveryService } from \"../services/radioDiscoveryService\";\nimport { motion } from \"framer-motion\";\nimport { Radio, Menu, X, List } from \"lucide-react\";\n\nexport default function Home() {\n  const { selectedStation, addMarker, markers } = useGlobeStore();\n  const [isMobile, setIsMobile] = useState(false);\n  const [showDirectory, setShowDirectory] = useState(false);\n  const [showMobileMenu, setShowMobileMenu] = useState(false);\n\n  // Detect mobile device and screen size\n  useEffect(() => {\n    const checkIfMobile = () => {\n      setIsMobile(window.innerWidth < 768 || \"ontouchstart\" in window);\n    };\n\n    checkIfMobile();\n    window.addEventListener(\"resize\", checkIfMobile);\n    return () => window.removeEventListener(\"resize\", checkIfMobile);\n  }, []);\n\n  return (\n    <main className=\"relative h-screen w-screen overflow-hidden bg-black\">\n      {/* 3D Globe with Three.js */}\n      <div className=\"absolute inset-0\">\n        <Globe />\n      </div>\n\n      {/* Top Bar */}\n      <motion.div\n        className=\"absolute top-0 left-0 right-0 z-40 p-4\"\n        initial={{ y: -100 }}\n        animate={{ y: 0 }}\n        transition={{ delay: 0.5 }}\n      >\n        <div className=\"flex items-center justify-between\">\n          {/* Logo */}\n          <motion.div\n            className=\"flex items-center gap-3\"\n            whileHover={{ scale: 1.05 }}\n          >\n            <div className=\"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center\">\n              <Radio className=\"w-6 h-6 text-white\" />\n            </div>\n            <div className=\"hidden md:block\">\n              <h1 className=\"text-2xl font-bold text-white\">Radio Globe</h1>\n              <p className=\"text-sm text-gray-400\">\n                Discover global radio stations\n              </p>\n            </div>\n          </motion.div>\n\n          {/* Desktop Navigation */}\n          {!isMobile && (\n            <div className=\"flex items-center gap-4\">\n              <SearchPanel />\n              <motion.button\n                onClick={() => setShowDirectory(!showDirectory)}\n                className={`glass px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${\n                  showDirectory\n                    ? \"bg-blue-500/20 text-blue-300\"\n                    : \"text-white hover:bg-white/10\"\n                }`}\n                whileHover={{ scale: 1.05 }}\n              >\n                <List className=\"w-4 h-4\" />\n                <span className=\"text-sm\">Directory</span>\n              </motion.button>\n            </div>\n          )}\n\n          {/* Mobile Menu Button */}\n          {isMobile && (\n            <motion.button\n              onClick={() => setShowMobileMenu(!showMobileMenu)}\n              className=\"glass p-3 rounded-lg text-white\"\n              whileHover={{ scale: 1.05 }}\n            >\n              {showMobileMenu ? (\n                <X className=\"w-5 h-5\" />\n              ) : (\n                <Menu className=\"w-5 h-5\" />\n              )}\n            </motion.button>\n          )}\n        </div>\n      </motion.div>\n\n      {/* Station Directory Panel */}\n      {showDirectory && !isMobile && (\n        <motion.div\n          className=\"absolute top-20 left-4 z-50 w-96\"\n          initial={{ x: -400, opacity: 0 }}\n          animate={{ x: 0, opacity: 1 }}\n          exit={{ x: -400, opacity: 0 }}\n        >\n          <StationDirectory />\n        </motion.div>\n      )}\n\n      {/* Station Info Panel */}\n      {selectedStation && (\n        <motion.div\n          className={`absolute ${isMobile ? \"bottom-20 left-3 right-3\" : \"top-20 left-4\"} z-50`}\n          initial={{\n            x: isMobile ? 0 : -400,\n            y: isMobile ? 100 : 0,\n            opacity: 0,\n          }}\n          animate={{ x: 0, y: 0, opacity: 1 }}\n          exit={{ x: isMobile ? 0 : -400, y: isMobile ? 100 : 0, opacity: 0 }}\n        >\n          <StationPanel station={selectedStation} />\n        </motion.div>\n      )}\n\n      {/* Bottom Controls */}\n      <motion.div\n        className=\"absolute bottom-0 left-0 right-0 z-40\"\n        initial={{ y: 100 }}\n        animate={{ y: 0 }}\n        transition={{ delay: 0.7 }}\n      >\n        <div className=\"p-4\">\n          <div className=\"flex items-center justify-between\">\n            {/* User Panel - Desktop */}\n            {!isMobile && <UserPanel />}\n\n            {/* Audio Player */}\n            <div className=\"flex-1 max-w-2xl mx-4\">\n              <ModularAudioPlayer\n                showVisualizer={!isMobile}\n                compactMode={isMobile}\n                autoPlay={false}\n              />\n            </div>\n\n            {/* Mobile Controls */}\n            {isMobile && (\n              <div className=\"flex items-center gap-2\">\n                <motion.button\n                  onClick={() => setShowDirectory(!showDirectory)}\n                  className={`glass p-3 rounded-lg transition-colors ${\n                    showDirectory\n                      ? \"bg-blue-500/20 text-blue-300\"\n                      : \"text-white\"\n                  }`}\n                  whileHover={{ scale: 1.05 }}\n                >\n                  <List className=\"w-5 h-5\" />\n                </motion.button>\n              </div>\n            )}\n\n            {/* Desktop Stats */}\n            {!isMobile && (\n              <div className=\"glass px-4 py-2 rounded-lg flex-shrink-0\">\n                <div className=\"text-xs text-gray-400\">Global Stations</div>\n                <div className=\"text-lg font-bold text-white\">\n                  {markers.length}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </motion.div>\n\n      {/* Mobile Menu Overlay */}\n      {showMobileMenu && isMobile && (\n        <motion.div\n          className=\"absolute inset-0 z-50\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n        >\n          <div\n            className=\"absolute inset-0 bg-black/80\"\n            onClick={() => setShowMobileMenu(false)}\n          />\n          <motion.div\n            className=\"absolute top-0 right-0 h-full w-80 glass p-6\"\n            initial={{ x: 320 }}\n            animate={{ x: 0 }}\n            exit={{ x: 320 }}\n          >\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className=\"text-xl font-bold text-white\">Menu</h2>\n                <button\n                  onClick={() => setShowMobileMenu(false)}\n                  className=\"p-2 hover:bg-white/10 rounded-lg transition-colors\"\n                >\n                  <X className=\"w-5 h-5 text-white\" />\n                </button>\n              </div>\n\n              <div className=\"space-y-4\">\n                <SearchPanel />\n\n                <motion.button\n                  onClick={() => {\n                    setShowDirectory(!showDirectory);\n                    setShowMobileMenu(false);\n                  }}\n                  className=\"w-full glass p-4 rounded-lg flex items-center gap-3 text-left\"\n                  whileHover={{ scale: 1.02 }}\n                >\n                  <List className=\"w-5 h-5 text-blue-400\" />\n                  <div>\n                    <div className=\"font-medium text-white\">\n                      Station Directory\n                    </div>\n                    <div className=\"text-xs text-gray-400\">\n                      Browse all stations\n                    </div>\n                  </div>\n                </motion.button>\n\n                <UserPanel />\n              </div>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n\n      {/* Mobile Directory Overlay */}\n      {showDirectory && isMobile && (\n        <motion.div\n          className=\"absolute inset-0 z-50\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n        >\n          <div\n            className=\"absolute inset-0 bg-black/80\"\n            onClick={() => setShowDirectory(false)}\n          />\n          <motion.div\n            className=\"absolute top-20 bottom-20 left-4 right-4 rounded-xl overflow-hidden\"\n            initial={{ scale: 0.8, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.8, opacity: 0 }}\n          >\n            <StationDirectory />\n          </motion.div>\n        </motion.div>\n      )}\n\n      {/* Loading Screen */}\n      <motion.div\n        className=\"absolute inset-0 z-50 bg-black flex items-center justify-center\"\n        initial={{ opacity: 1 }}\n        animate={{ opacity: 0 }}\n        transition={{ delay: 1, duration: 0.5 }}\n        style={{ pointerEvents: \"none\" }}\n      >\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-white text-lg\">Loading Radio Globe...</p>\n          <p className=\"text-gray-400 text-sm\">\n            Connecting to global stations...\n          </p>\n        </div>\n      </motion.div>\n    </main>\n  );\n}\n"],"names":["Home","selectedStation","addMarker","markers","isMobile","setIsMobile","showDirectory","setShowDirectory","showMobileMenu","setShowMobileMenu","checkIfMobile","window","innerWidth","addEventListener","removeEventListener","className","div","initial","y","animate","transition","delay","whileHover","scale","button","onClick","x","opacity","exit","station","showVisualizer","compactMode","autoPlay","length","duration","style","pointerEvents"],"mappings":"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"}}]
}