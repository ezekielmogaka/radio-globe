{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/utils/cesiumUtils.ts"],"sourcesContent":["import { Cartesian3, Math as CesiumMath, Cartographic } from \"cesium\";\nimport { RadioStation } from \"../types\";\n\n/**\n * Utility functions for working with Cesium coordinates and radio stations\n */\n\nexport interface CesiumCoordinate {\n  longitude: number;\n  latitude: number;\n  height?: number;\n}\n\nexport interface StationEntity {\n  id: string;\n  station: RadioStation;\n  position: Cartesian3;\n  coordinate: CesiumCoordinate;\n}\n\n/**\n * Convert latitude/longitude to Cesium Cartesian3 position\n */\nexport function latLngToCartesian3(\n  lat: number,\n  lng: number,\n  height: number = 0,\n): Cartesian3 {\n  return Cartesian3.fromDegrees(lng, lat, height);\n}\n\n/**\n * Convert radio station to Cesium entity data\n */\nexport function radioStationToEntity(station: RadioStation): StationEntity {\n  const coordinate: CesiumCoordinate = {\n    longitude: station.location.lng,\n    latitude: station.location.lat,\n    height: 10000, // 10km above surface for visibility\n  };\n\n  return {\n    id: station.id,\n    station,\n    position: latLngToCartesian3(\n      coordinate.latitude,\n      coordinate.longitude,\n      coordinate.height,\n    ),\n    coordinate,\n  };\n}\n\n/**\n * Calculate distance between two coordinates in kilometers\n */\nexport function calculateDistance(\n  coord1: CesiumCoordinate,\n  coord2: CesiumCoordinate,\n): number {\n  const R = 6371; // Earth's radius in km\n  const dLat = CesiumMath.toRadians(coord2.latitude - coord1.latitude);\n  const dLon = CesiumMath.toRadians(coord2.longitude - coord1.longitude);\n\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(CesiumMath.toRadians(coord1.latitude)) *\n      Math.cos(CesiumMath.toRadians(coord2.latitude)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\n\n/**\n * Get optimal camera position for viewing a station\n */\nexport function getStationCameraPosition(station: RadioStation): Cartesian3 {\n  const distance = 2000000; // 2000km from surface\n  return latLngToCartesian3(\n    station.location.lat,\n    station.location.lng,\n    distance,\n  );\n}\n\n/**\n * Create camera destination for smooth animation to station\n */\nexport function createCameraDestination(station: RadioStation) {\n  return {\n    destination: Cartesian3.fromDegrees(\n      station.location.lng,\n      station.location.lat,\n      1500000, // 1500km altitude for good view\n    ),\n    orientation: {\n      heading: CesiumMath.toRadians(0),\n      pitch: CesiumMath.toRadians(-45), // Look down at angle\n      roll: 0,\n    },\n  };\n}\n\n/**\n * Filter stations by visibility based on camera position\n */\nexport function filterStationsByDistance(\n  stations: RadioStation[],\n  cameraPosition: Cartesian3,\n  maxDistance: number = 5000, // km\n): RadioStation[] {\n  const cameraCartographic = Cartographic.fromCartesian(cameraPosition);\n  const cameraCoord: CesiumCoordinate = {\n    longitude: CesiumMath.toDegrees(cameraCartographic.longitude),\n    latitude: CesiumMath.toDegrees(cameraCartographic.latitude),\n  };\n\n  return stations.filter((station) => {\n    const stationCoord: CesiumCoordinate = {\n      longitude: station.location.lng,\n      latitude: station.location.lat,\n    };\n    return calculateDistance(cameraCoord, stationCoord) <= maxDistance;\n  });\n}\n\n/**\n * Get color for station based on status\n */\nexport function getStationColor(\n  station: RadioStation,\n  isSelected: boolean = false,\n  isHovered: boolean = false,\n) {\n  if (isSelected) return { red: 1.0, green: 0.0, blue: 0.0, alpha: 1.0 }; // Red\n  if (isHovered) return { red: 1.0, green: 1.0, blue: 0.0, alpha: 1.0 }; // Yellow\n\n  // Color by region/country with extensive coverage\n  const country = station.location.country || \"default\";\n  switch (country) {\n    // North America\n    case \"US\":\n    case \"USA\":\n      return { red: 0.0, green: 0.5, blue: 1.0, alpha: 0.8 }; // Blue\n    case \"CA\":\n    case \"Canada\":\n      return { red: 1.0, green: 0.0, blue: 0.0, alpha: 0.8 }; // Red\n    case \"MX\":\n    case \"Mexico\":\n      return { red: 0.0, green: 1.0, blue: 0.0, alpha: 0.8 }; // Green\n\n    // Europe\n    case \"UK\":\n    case \"GB\":\n    case \"United Kingdom\":\n      return { red: 1.0, green: 0.0, blue: 0.5, alpha: 0.8 }; // Pink\n    case \"DE\":\n    case \"Germany\":\n      return { red: 1.0, green: 1.0, blue: 0.0, alpha: 0.8 }; // Yellow\n    case \"FR\":\n    case \"France\":\n      return { red: 0.5, green: 0.0, blue: 1.0, alpha: 0.8 }; // Purple\n    case \"IT\":\n    case \"Italy\":\n      return { red: 0.0, green: 1.0, blue: 0.5, alpha: 0.8 }; // Light Green\n    case \"ES\":\n    case \"Spain\":\n      return { red: 1.0, green: 0.5, blue: 0.0, alpha: 0.8 }; // Orange\n    case \"NL\":\n    case \"Netherlands\":\n      return { red: 1.0, green: 0.5, blue: 0.5, alpha: 0.8 }; // Light Pink\n    case \"SE\":\n    case \"Sweden\":\n      return { red: 0.0, green: 0.7, blue: 1.0, alpha: 0.8 }; // Light Blue\n    case \"NO\":\n    case \"Norway\":\n      return { red: 0.0, green: 0.3, blue: 0.7, alpha: 0.8 }; // Dark Blue\n    case \"DK\":\n    case \"Denmark\":\n      return { red: 0.8, green: 0.0, blue: 0.3, alpha: 0.8 }; // Dark Pink\n    case \"FI\":\n    case \"Finland\":\n      return { red: 0.0, green: 0.8, blue: 0.8, alpha: 0.8 }; // Cyan\n    case \"CH\":\n    case \"Switzerland\":\n      return { red: 0.7, green: 0.7, blue: 0.7, alpha: 0.8 }; // Light Gray\n    case \"AT\":\n    case \"Austria\":\n      return { red: 0.5, green: 0.5, blue: 0.0, alpha: 0.8 }; // Olive\n    case \"BE\":\n    case \"Belgium\":\n      return { red: 0.3, green: 0.0, blue: 0.0, alpha: 0.8 }; // Dark Red\n    case \"PL\":\n    case \"Poland\":\n      return { red: 0.8, green: 0.8, blue: 0.0, alpha: 0.8 }; // Bright Yellow\n    case \"RU\":\n    case \"Russia\":\n      return { red: 0.0, green: 0.0, blue: 0.8, alpha: 0.8 }; // Dark Blue\n\n    // Asia Pacific\n    case \"JP\":\n    case \"Japan\":\n      return { red: 1.0, green: 0.0, blue: 1.0, alpha: 0.8 }; // Magenta\n    case \"CN\":\n    case \"China\":\n      return { red: 1.0, green: 0.8, blue: 0.0, alpha: 0.8 }; // Gold\n    case \"KR\":\n    case \"Korea\":\n    case \"South Korea\":\n      return { red: 0.5, green: 1.0, blue: 0.5, alpha: 0.8 }; // Light Green\n    case \"IN\":\n    case \"India\":\n      return { red: 1.0, green: 0.5, blue: 0.2, alpha: 0.8 }; // Saffron\n    case \"AU\":\n    case \"Australia\":\n      return { red: 0.0, green: 0.6, blue: 0.0, alpha: 0.8 }; // Forest Green\n    case \"NZ\":\n    case \"New Zealand\":\n      return { red: 0.0, green: 0.4, blue: 0.0, alpha: 0.8 }; // Dark Green\n    case \"TH\":\n    case \"Thailand\":\n      return { red: 0.8, green: 0.4, blue: 0.8, alpha: 0.8 }; // Light Purple\n    case \"SG\":\n    case \"Singapore\":\n      return { red: 0.0, green: 0.8, blue: 0.6, alpha: 0.8 }; // Teal\n    case \"MY\":\n    case \"Malaysia\":\n      return { red: 0.6, green: 0.8, blue: 0.0, alpha: 0.8 }; // Lime\n    case \"ID\":\n    case \"Indonesia\":\n      return { red: 0.8, green: 0.0, blue: 0.8, alpha: 0.8 }; // Purple\n    case \"PH\":\n    case \"Philippines\":\n      return { red: 0.0, green: 0.0, blue: 1.0, alpha: 0.8 }; // Blue\n\n    // South America\n    case \"BR\":\n    case \"Brazil\":\n      return { red: 0.0, green: 0.8, blue: 0.2, alpha: 0.8 }; // Brazilian Green\n    case \"AR\":\n    case \"Argentina\":\n      return { red: 0.5, green: 0.8, blue: 1.0, alpha: 0.8 }; // Sky Blue\n    case \"CL\":\n    case \"Chile\":\n      return { red: 0.8, green: 0.0, blue: 0.0, alpha: 0.8 }; // Red\n    case \"PE\":\n    case \"Peru\":\n      return { red: 0.8, green: 0.2, blue: 0.0, alpha: 0.8 }; // Dark Orange\n    case \"CO\":\n    case \"Colombia\":\n      return { red: 1.0, green: 1.0, blue: 0.0, alpha: 0.8 }; // Yellow\n\n    // Africa\n    case \"ZA\":\n    case \"South Africa\":\n      return { red: 0.0, green: 0.5, blue: 0.0, alpha: 0.8 }; // Green\n    case \"NG\":\n    case \"Nigeria\":\n      return { red: 0.0, green: 0.7, blue: 0.0, alpha: 0.8 }; // Green\n    case \"KE\":\n    case \"Kenya\":\n      return { red: 0.8, green: 0.0, blue: 0.0, alpha: 0.8 }; // Red\n    case \"EG\":\n    case \"Egypt\":\n      return { red: 0.8, green: 0.6, blue: 0.0, alpha: 0.8 }; // Gold\n    case \"MA\":\n    case \"Morocco\":\n      return { red: 0.8, green: 0.0, blue: 0.0, alpha: 0.8 }; // Red\n\n    // Middle East\n    case \"AE\":\n    case \"UAE\":\n      return { red: 0.0, green: 0.6, blue: 0.8, alpha: 0.8 }; // Turquoise\n    case \"SA\":\n    case \"Saudi Arabia\":\n      return { red: 0.0, green: 0.5, blue: 0.0, alpha: 0.8 }; // Green\n    case \"IL\":\n    case \"Israel\":\n      return { red: 0.0, green: 0.0, blue: 0.8, alpha: 0.8 }; // Blue\n    case \"TR\":\n    case \"Turkey\":\n      return { red: 0.8, green: 0.0, blue: 0.0, alpha: 0.8 }; // Red\n    case \"IR\":\n    case \"Iran\":\n      return { red: 0.0, green: 0.8, blue: 0.0, alpha: 0.8 }; // Green\n\n    // Default for unspecified countries\n    default:\n      return { red: 0.7, green: 0.7, blue: 0.7, alpha: 0.8 }; // Light Gray\n  }\n}\n\n/**\n * Create billboard scale based on station importance\n */\nexport function getStationScale(station: RadioStation): number {\n  // Scale based on language or listener count (if available)\n  if (station.language === \"en\") return 1.2;\n  if (station.tags?.includes(\"popular\")) return 1.1;\n  return 1.0;\n}\n"],"names":["latLngToCartesian3","lat","lng","height","fromDegrees","radioStationToEntity","station","coordinate","longitude","location","latitude","id","position","calculateDistance","coord1","coord2","R","dLat","toRadians","dLon","a","Math","sin","cos","c","atan2","sqrt","getStationCameraPosition","distance","createCameraDestination","destination","orientation","heading","pitch","roll","filterStationsByDistance","stations","cameraPosition","maxDistance","cameraCartographic","fromCartesian","cameraCoord","toDegrees","filter","stationCoord","getStationColor","isSelected","isHovered","red","green","blue","alpha","country","getStationScale","language","tags","includes"],"mappings":"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"}},
    {"offset": {"line": 477, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/utils/cesiumEntityManager.ts"],"sourcesContent":["import {\n  Viewer,\n  Entity,\n  Color,\n  ConstantProperty,\n  BillboardGraphics,\n  LabelGraphics,\n  HeightReference,\n  NearFarScalar,\n  Cartesian2,\n  VerticalOrigin,\n  LabelStyle,\n} from \"cesium\";\nimport {\n  radioStationToEntity,\n  getStationColor,\n  getStationScale,\n} from \"../utils/cesiumUtils\";\nimport type { RadioStation } from \"../types\";\n\n/**\n * Manages Cesium entities for radio stations\n */\nexport class CesiumEntityManager {\n  private entities = new Map<string, Entity>();\n  private viewer: Viewer;\n\n  constructor(viewer: Viewer) {\n    this.viewer = viewer;\n  }\n\n  /**\n   * Create a radio station entity\n   */\n  createStationEntity(station: RadioStation): Entity {\n    const stationEntity = radioStationToEntity(station);\n\n    const entity = this.viewer.entities.add({\n      id: station.id,\n      position: stationEntity.position,\n\n      billboard: new BillboardGraphics({\n        image: new ConstantProperty(\"/radio-station-icon.svg\"),\n        show: new ConstantProperty(true),\n        scale: new ConstantProperty(getStationScale(station)),\n        color: new ConstantProperty(Color.WHITE),\n        scaleByDistance: new ConstantProperty(\n          new NearFarScalar(1.5e6, 2.0, 2.0e7, 0.5),\n        ),\n        heightReference: new ConstantProperty(\n          HeightReference.RELATIVE_TO_GROUND,\n        ),\n        disableDepthTestDistance: new ConstantProperty(\n          Number.POSITIVE_INFINITY,\n        ),\n      }),\n\n      label: new LabelGraphics({\n        text: new ConstantProperty(station.name),\n        font: new ConstantProperty(\"12pt monospace\"),\n        style: new ConstantProperty(LabelStyle.FILL_AND_OUTLINE),\n        outlineWidth: new ConstantProperty(2),\n        verticalOrigin: new ConstantProperty(VerticalOrigin.BOTTOM),\n        pixelOffset: new ConstantProperty(new Cartesian2(0, -32)),\n        show: new ConstantProperty(false),\n        fillColor: new ConstantProperty(Color.WHITE),\n        outlineColor: new ConstantProperty(Color.BLACK),\n        scaleByDistance: new ConstantProperty(\n          new NearFarScalar(1.5e6, 1.0, 2.0e7, 0.0),\n        ),\n      }),\n    });\n\n    // Store station data on the entity\n    (entity as any).station = station;\n    this.entities.set(station.id, entity);\n\n    return entity;\n  }\n\n  /**\n   * Update entity appearance based on selection/hover state\n   */\n  updateEntityAppearance(\n    stationId: string,\n    isSelected: boolean,\n    isHovered: boolean,\n  ): void {\n    const entity = this.entities.get(stationId);\n    if (!entity) return;\n\n    const station = (entity as any).station as RadioStation;\n\n    if (entity.billboard) {\n      // Update billboard color and scale\n      const color = getStationColor(station, isSelected, isHovered);\n      entity.billboard.color = new ConstantProperty(\n        Color.fromBytes(\n          Math.round(color.red * 255),\n          Math.round(color.green * 255),\n          Math.round(color.blue * 255),\n          Math.round(color.alpha * 255),\n        ),\n      );\n      const newScale =\n        getStationScale(station) * (isSelected ? 1.5 : isHovered ? 1.2 : 1.0);\n      entity.billboard.scale = new ConstantProperty(newScale);\n    }\n\n    if (entity.label) {\n      // Show label on hover or selection\n      entity.label.show = new ConstantProperty(isHovered || isSelected);\n    }\n  }\n\n  /**\n   * Get entity by station ID\n   */\n  getEntity(stationId: string): Entity | undefined {\n    return this.entities.get(stationId);\n  }\n\n  /**\n   * Get all entities\n   */\n  getAllEntities(): Map<string, Entity> {\n    return this.entities;\n  }\n\n  /**\n   * Clear all entities\n   */\n  clearAll(): void {\n    this.viewer.entities.removeAll();\n    this.entities.clear();\n  }\n\n  /**\n   * Remove specific entity\n   */\n  removeEntity(stationId: string): void {\n    const entity = this.entities.get(stationId);\n    if (entity) {\n      this.viewer.entities.remove(entity);\n      this.entities.delete(stationId);\n    }\n  }\n}\n"],"names":["CesiumEntityManager","entities","Map","viewer","createStationEntity","station","stationEntity","entity","add","id","position","billboard","image","show","scale","color","WHITE","scaleByDistance","heightReference","RELATIVE_TO_GROUND","disableDepthTestDistance","Number","POSITIVE_INFINITY","label","text","name","font","style","FILL_AND_OUTLINE","outlineWidth","verticalOrigin","BOTTOM","pixelOffset","fillColor","outlineColor","BLACK","set","updateEntityAppearance","stationId","isSelected","isHovered","get","fromBytes","Math","round","red","green","blue","alpha","newScale","getEntity","getAllEntities","clearAll","removeAll","clear","removeEntity","remove","delete"],"mappings":"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"}},
    {"offset": {"line": 584, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/apps/web/src/components/CesiumGlobeRenderer.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, RefObject } from \"react\";\nimport {\n  Ion,\n  Viewer,\n  ScreenSpaceEventType,\n  TileMapServiceImageryProvider,\n  Credit,\n} from \"cesium\";\n// import 'cesium/Build/Cesium/Widgets/widgets.css'\nimport { useGlobeStore } from \"../stores/globe-store\";\nimport { radioStationService } from \"../services/radioStationService\";\nimport { radioDiscoveryService } from \"../services/radioDiscoveryService\";\nimport { createCameraDestination } from \"../utils/cesiumUtils\";\nimport { CesiumEntityManager } from \"../utils/cesiumEntityManager\";\nimport {\n  createCesiumViewer,\n  createEventHandlers,\n} from \"../utils/cesiumViewerConfig\";\nimport type { RadioStation } from \"../types\";\n\n// Set Cesium base URL as early as possible\nif (typeof window !== \"undefined\") {\n  (window as any).CESIUM_BASE_URL = \"/cesium/\";\n\n  // Add global error handler for Cesium imagery errors specifically\n  window.addEventListener(\"unhandledrejection\", (event) => {\n    if (\n      event.reason &&\n      (event.reason.toString().includes(\"ImageryLayer\") ||\n        event.reason.toString().includes(\"cesium\") ||\n        event.reason.toString().includes(\"imagery\"))\n    ) {\n      console.warn(\"Cesium imagery error caught and handled:\", event.reason);\n      event.preventDefault();\n    }\n  });\n}\n\n// Set Cesium Ion access token\nIon.defaultAccessToken =\n  process.env.NEXT_PUBLIC_CESIUM_ION_TOKEN ||\n  \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlYWE1NGU5Ny05OGNlLTQ4Y2MtOGEyNC0yOGQ1NGM2YmJmMzgiLCJpZCI6MjU5LCJzY29wZXMiOlsiYXNyIiwiZ2MiXSwiaWF0IjoxNzM2NjkwMzIxfQ.aF1ggEQ-dJfCOoAGiU5pynhQD7q4aaUOMkFD2C7sZS8\";\n\ninterface CesiumGlobeRendererProps {\n  containerRef: RefObject<HTMLDivElement>;\n}\n\nexport default function CesiumGlobeRenderer({\n  containerRef,\n}: CesiumGlobeRendererProps) {\n  const viewerRef = useRef<Viewer | null>(null);\n  const entityManagerRef = useRef<CesiumEntityManager | null>(null);\n  const handlerRef = useRef<any>(null);\n\n  const {\n    selectedStation,\n    hoveredStation,\n    selectStation,\n    hoverStation,\n    addMarker,\n  } = useGlobeStore();\n\n  // Load radio stations and create entities\n  const loadStations = async () => {\n    console.log(\"Loading stations...\", {\n      entityManager: !!entityManagerRef.current,\n    });\n    if (!entityManagerRef.current) {\n      console.warn(\"Entity manager not available\");\n      return;\n    }\n\n    try {\n      console.log(\"Fetching top stations from API...\");\n      const stations = await radioDiscoveryService.getTopStations(100);\n      console.log(\"Fetched stations:\", stations.length);\n\n      if (stations.length === 0) {\n        console.warn(\"No stations received from API\");\n        return;\n      }\n\n      // Clear existing entities\n      entityManagerRef.current.clearAll();\n\n      // Add station entities\n      let successCount = 0;\n      stations.forEach((station: RadioStation) => {\n        try {\n          entityManagerRef.current!.createStationEntity(station);\n          addMarker(station);\n          successCount++;\n        } catch (err) {\n          console.warn(\n            \"Failed to create entity for station:\",\n            station.name,\n            err,\n          );\n        }\n      });\n\n      console.log(`Successfully added ${successCount} stations to globe`);\n    } catch (error) {\n      console.error(\"Failed to load radio stations:\", error);\n      // Try a simple test to add one marker\n      try {\n        const testStation: RadioStation = {\n          id: \"test-station\",\n          name: \"Test Station\",\n          location: {\n            lat: 40.7128,\n            lng: -74.006,\n            country: \"USA\",\n            city: \"New York\",\n          },\n          url: \"http://test.com\",\n          genre: \"Test\",\n          language: \"English\",\n          listeners: 1000,\n        };\n        addMarker(testStation);\n        console.log(\"Added test station\");\n      } catch (testError) {\n        console.error(\"Failed to add test station:\", testError);\n      }\n    }\n  };\n\n  // Initialize Cesium viewer and entity manager\n  useEffect(() => {\n    console.log(\"Initializing Cesium...\", {\n      container: !!containerRef.current,\n      viewer: !!viewerRef.current,\n    });\n    if (!containerRef.current || viewerRef.current) return;\n\n    try {\n      console.log(\"Creating Cesium viewer...\");\n\n      // Create viewer with minimal config and reliable imagery\n      const viewer = new Viewer(containerRef.current, {\n        animation: false,\n        baseLayerPicker: false,\n        fullscreenButton: false,\n        geocoder: false,\n        homeButton: false,\n        infoBox: false,\n        sceneModePicker: false,\n        selectionIndicator: false,\n        timeline: false,\n        navigationHelpButton: false,\n        scene3DOnly: true,\n        shouldAnimate: false,\n        showRenderLoopErrors: false, // Disable error popup\n        // Keep default imagery provider but handle errors gracefully\n      });\n\n      viewerRef.current = viewer;\n      console.log(\"Cesium viewer created successfully\");\n\n      // Add error event listeners but don't let them break the app\n      viewer.scene.renderError.addEventListener((scene, error) => {\n        console.warn(\"Cesium render error (handled):\", error);\n      });\n\n      // Handle imagery errors gracefully\n      if (viewer.imageryLayers && viewer.imageryLayers.length > 0) {\n        viewer.imageryLayers.get(0).errorEvent.addEventListener((error) => {\n          console.warn(\"Imagery error (handled):\", error);\n        });\n      }\n\n      // Wait for viewer to fully initialize\n      viewer.scene.globe.enableLighting = false; // Disable lighting for better performance\n      viewer.scene.debugShowFramesPerSecond = false;\n      viewer.scene.globe.showGroundAtmosphere = true;\n      if (viewer.scene.skyBox) viewer.scene.skyBox.show = false; // Disable skybox for better performance\n      if (viewer.scene.sun) viewer.scene.sun.show = false; // Disable sun\n      if (viewer.scene.moon) viewer.scene.moon.show = false; // Disable moon\n      if (viewer.scene.skyAtmosphere) viewer.scene.skyAtmosphere.show = true; // Keep atmosphere\n\n      // Create entity manager\n      console.log(\"Creating entity manager...\");\n      entityManagerRef.current = new CesiumEntityManager(viewer);\n      console.log(\"Entity manager created\");\n\n      // Simple click handler for now\n      viewer.cesiumWidget.screenSpaceEventHandler.setInputAction(() => {\n        console.log(\"Globe clicked\");\n      }, ScreenSpaceEventType.LEFT_CLICK);\n\n      // Load initial stations after a brief delay to ensure viewer is ready\n      console.log(\"Loading stations...\");\n      setTimeout(() => {\n        loadStations();\n      }, 100);\n\n      // Hide loading screen after a delay\n      setTimeout(() => {\n        const loadingEl = document.getElementById(\"cesium-loading\");\n        if (loadingEl) {\n          loadingEl.style.display = \"none\";\n          console.log(\"Hiding loading screen\");\n        }\n      }, 1000);\n    } catch (error) {\n      console.error(\"Failed to initialize Cesium viewer:\", error);\n      const err = error as Error;\n      console.error(\"Error details:\", err.stack);\n\n      // Try to show fallback content\n      const loadingEl = document.getElementById(\"cesium-loading\");\n      if (loadingEl) {\n        loadingEl.innerHTML = `\n          <div class=\"text-white text-center\">\n            <div class=\"text-red-500 mb-2\">Failed to initialize 3D Globe</div>\n            <div class=\"text-sm\">Error: ${err.message}</div>\n          </div>\n        `;\n      }\n    }\n\n    return () => {\n      cleanup();\n    };\n  }, [containerRef, selectStation, hoverStation, loadStations]);\n\n  // Update entity appearance based on selection/hover state\n  useEffect(() => {\n    if (!entityManagerRef.current) return;\n\n    entityManagerRef.current.getAllEntities().forEach((entity, stationId) => {\n      const isSelected = selectedStation?.id === stationId;\n      const isHovered = hoveredStation?.id === stationId;\n\n      entityManagerRef.current!.updateEntityAppearance(\n        stationId,\n        isSelected,\n        isHovered,\n      );\n    });\n  }, [selectedStation, hoveredStation]);\n\n  // Animate camera to selected station\n  useEffect(() => {\n    if (!viewerRef.current || !selectedStation) return;\n\n    const viewer = viewerRef.current;\n    const destination = createCameraDestination(selectedStation);\n\n    viewer.camera.flyTo({\n      destination: destination.destination,\n      orientation: destination.orientation,\n      duration: 2.0,\n    });\n  }, [selectedStation]);\n\n  // Cleanup function\n  const cleanup = () => {\n    if (handlerRef.current) {\n      handlerRef.current.destroy();\n      handlerRef.current = null;\n    }\n    if (viewerRef.current) {\n      viewerRef.current.destroy();\n      viewerRef.current = null;\n    }\n    entityManagerRef.current = null;\n  };\n\n  return null;\n}\n"],"names":["window","CESIUM_BASE_URL","addEventListener","event","reason","toString","includes","console","warn","preventDefault","defaultAccessToken","CesiumGlobeRenderer","containerRef","viewerRef","entityManagerRef","handlerRef","selectedStation","hoveredStation","selectStation","hoverStation","addMarker","loadStations","log","entityManager","current","stations","getTopStations","length","clearAll","successCount","forEach","station","createStationEntity","err","name","error","testStation","id","location","lat","lng","country","city","url","genre","language","listeners","testError","container","viewer","animation","baseLayerPicker","fullscreenButton","geocoder","homeButton","infoBox","sceneModePicker","selectionIndicator","timeline","navigationHelpButton","scene3DOnly","shouldAnimate","showRenderLoopErrors","scene","renderError","imageryLayers","get","errorEvent","globe","enableLighting","debugShowFramesPerSecond","showGroundAtmosphere","skyBox","show","sun","moon","skyAtmosphere","cesiumWidget","screenSpaceEventHandler","setInputAction","LEFT_CLICK","setTimeout","loadingEl","document","getElementById","style","display","stack","innerHTML","message","cleanup","getAllEntities","entity","stationId","isSelected","isHovered","updateEntityAppearance","destination","camera","flyTo","orientation","duration","destroy"],"mappings":"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"}}]
}