{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ezekiel.mogaka/Desktop/Code/radio-globe-next/node_modules/%40cesium/engine/Source/Scene/Cesium3DTile.js"],"sourcesContent":["import BoundingSphere from \"../Core/BoundingSphere.js\";\nimport Cartesian3 from \"../Core/Cartesian3.js\";\nimport Color from \"../Core/Color.js\";\nimport ColorGeometryInstanceAttribute from \"../Core/ColorGeometryInstanceAttribute.js\";\nimport CullingVolume from \"../Core/CullingVolume.js\";\nimport defined from \"../Core/defined.js\";\nimport deprecationWarning from \"../Core/deprecationWarning.js\";\nimport destroyObject from \"../Core/destroyObject.js\";\nimport Ellipsoid from \"../Core/Ellipsoid.js\";\nimport Intersect from \"../Core/Intersect.js\";\nimport JulianDate from \"../Core/JulianDate.js\";\nimport CesiumMath from \"../Core/Math.js\";\nimport Matrix3 from \"../Core/Matrix3.js\";\nimport Matrix4 from \"../Core/Matrix4.js\";\nimport OrientedBoundingBox from \"../Core/OrientedBoundingBox.js\";\nimport OrthographicFrustum from \"../Core/OrthographicFrustum.js\";\nimport Rectangle from \"../Core/Rectangle.js\";\nimport Request from \"../Core/Request.js\";\nimport RequestScheduler from \"../Core/RequestScheduler.js\";\nimport RequestState from \"../Core/RequestState.js\";\nimport RequestType from \"../Core/RequestType.js\";\nimport Resource from \"../Core/Resource.js\";\nimport RuntimeError from \"../Core/RuntimeError.js\";\nimport Cesium3DContentGroup from \"./Cesium3DContentGroup.js\";\nimport Cesium3DTileContentFactory from \"./Cesium3DTileContentFactory.js\";\nimport Cesium3DTileContentState from \"./Cesium3DTileContentState.js\";\nimport Cesium3DTileContentType from \"./Cesium3DTileContentType.js\";\nimport Cesium3DTileOptimizationHint from \"./Cesium3DTileOptimizationHint.js\";\nimport Cesium3DTilePass from \"./Cesium3DTilePass.js\";\nimport Cesium3DTileRefine from \"./Cesium3DTileRefine.js\";\nimport Empty3DTileContent from \"./Empty3DTileContent.js\";\nimport findContentMetadata from \"./findContentMetadata.js\";\nimport findGroupMetadata from \"./findGroupMetadata.js\";\nimport findTileMetadata from \"./findTileMetadata.js\";\nimport hasExtension from \"./hasExtension.js\";\nimport Multiple3DTileContent from \"./Multiple3DTileContent.js\";\nimport BoundingVolumeSemantics from \"./BoundingVolumeSemantics.js\";\nimport preprocess3DTileContent from \"./preprocess3DTileContent.js\";\nimport SceneMode from \"./SceneMode.js\";\nimport TileBoundingRegion from \"./TileBoundingRegion.js\";\nimport TileBoundingS2Cell from \"./TileBoundingS2Cell.js\";\nimport TileBoundingSphere from \"./TileBoundingSphere.js\";\nimport TileOrientedBoundingBox from \"./TileOrientedBoundingBox.js\";\nimport Pass from \"../Renderer/Pass.js\";\nimport VerticalExaggeration from \"../Core/VerticalExaggeration.js\";\n\n/**\n * A tile in a {@link Cesium3DTileset}.  When a tile is first created, its content is not loaded;\n * the content is loaded on-demand when needed based on the view.\n * <p>\n * Do not construct this directly, instead access tiles through {@link Cesium3DTileset#tileVisible}.\n * </p>\n *\n * @alias Cesium3DTile\n * @constructor\n * @param {Cesium3DTileset} tileset The tileset\n * @param {Resource} baseResource The base resource for the tileset\n * @param {object} header The JSON header for the tile\n * @param {Cesium3DTile} parent The parent tile of the new tile\n */\nfunction Cesium3DTile(tileset, baseResource, header, parent) {\n  this._tileset = tileset;\n  this._header = header;\n\n  const hasContentsArray = defined(header.contents);\n  const hasMultipleContents =\n    (hasContentsArray && header.contents.length > 1) ||\n    hasExtension(header, \"3DTILES_multiple_contents\");\n\n  // In the 1.0 schema, content is stored in tile.content instead of tile.contents\n  const contentHeader =\n    hasContentsArray && !hasMultipleContents\n      ? header.contents[0]\n      : header.content;\n\n  this._contentHeader = contentHeader;\n\n  /**\n   * The local transform of this tile.\n   * @type {Matrix4}\n   */\n  this.transform = defined(header.transform)\n    ? Matrix4.unpack(header.transform)\n    : Matrix4.clone(Matrix4.IDENTITY);\n\n  const parentTransform = defined(parent)\n    ? parent.computedTransform\n    : tileset.modelMatrix;\n  const computedTransform = Matrix4.multiply(\n    parentTransform,\n    this.transform,\n    new Matrix4(),\n  );\n\n  const parentInitialTransform = defined(parent)\n    ? parent._initialTransform\n    : Matrix4.IDENTITY;\n  this._initialTransform = Matrix4.multiply(\n    parentInitialTransform,\n    this.transform,\n    new Matrix4(),\n  );\n\n  /**\n   * The final computed transform of this tile.\n   * @type {Matrix4}\n   * @readonly\n   */\n  this.computedTransform = computedTransform;\n\n  /**\n   * When tile metadata is present (3D Tiles 1.1) or the <code>3DTILES_metadata</code> extension is used,\n   * this stores a {@link TileMetadata} object for accessing tile metadata.\n   *\n   * @type {TileMetadata}\n   * @readonly\n   * @private\n   * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium's standard deprecation policy.\n   */\n  this.metadata = findTileMetadata(tileset, header);\n\n  this._verticalExaggeration = 1.0;\n  this._verticalExaggerationRelativeHeight = 0.0;\n\n  // Important: tile metadata must be parsed before this line so that the\n  // metadata semantics TILE_BOUNDING_BOX, TILE_BOUNDING_REGION, or TILE_BOUNDING_SPHERE\n  // can override header.boundingVolume (if necessary)\n  this._boundingVolume = this.createBoundingVolume(\n    header.boundingVolume,\n    computedTransform,\n  );\n  this._boundingVolume2D = undefined;\n\n  let contentBoundingVolume;\n\n  if (defined(contentHeader) && defined(contentHeader.boundingVolume)) {\n    // Non-leaf tiles may have a content bounding-volume, which is a tight-fit bounding volume\n    // around only the features in the tile.  This box is useful for culling for rendering,\n    // but not for culling for traversing the tree since it does not guarantee spatial coherence, i.e.,\n    // since it only bounds features in the tile, not the entire tile, children may be\n    // outside of this box.\n    contentBoundingVolume = this.createBoundingVolume(\n      contentHeader.boundingVolume,\n      computedTransform,\n    );\n  }\n  this._contentBoundingVolume = contentBoundingVolume;\n  this._contentBoundingVolume2D = undefined;\n\n  let viewerRequestVolume;\n  if (defined(header.viewerRequestVolume)) {\n    viewerRequestVolume = this.createBoundingVolume(\n      header.viewerRequestVolume,\n      computedTransform,\n    );\n  }\n  this._viewerRequestVolume = viewerRequestVolume;\n\n  /**\n   * The error, in meters, introduced if this tile is rendered and its children are not.\n   * This is used to compute screen space error, i.e., the error measured in pixels.\n   *\n   * @type {number}\n   * @readonly\n   */\n  this.geometricError = header.geometricError;\n  this._geometricError = header.geometricError;\n\n  if (!defined(this._geometricError)) {\n    this._geometricError = defined(parent)\n      ? parent._geometricError\n      : tileset._geometricError;\n    Cesium3DTile._deprecationWarning(\n      \"geometricErrorUndefined\",\n      \"Required property geometricError is undefined for this tile. Using parent's geometric error instead.\",\n    );\n  }\n\n  this.updateGeometricErrorScale();\n\n  let refine;\n  if (defined(header.refine)) {\n    if (header.refine === \"replace\" || header.refine === \"add\") {\n      Cesium3DTile._deprecationWarning(\n        \"lowercase-refine\",\n        `This tile uses a lowercase refine \"${\n          header.refine\n        }\". Instead use \"${header.refine.toUpperCase()}\".`,\n      );\n    }\n    refine =\n      header.refine.toUpperCase() === \"REPLACE\"\n        ? Cesium3DTileRefine.REPLACE\n        : Cesium3DTileRefine.ADD;\n  } else if (defined(parent)) {\n    // Inherit from parent tile if omitted.\n    refine = parent.refine;\n  } else {\n    refine = Cesium3DTileRefine.REPLACE;\n  }\n\n  /**\n   * Specifies the type of refinement that is used when traversing this tile for rendering.\n   *\n   * @type {Cesium3DTileRefine}\n   * @readonly\n   * @private\n   */\n  this.refine = refine;\n\n  /**\n   * Gets the tile's children.\n   *\n   * @type {Cesium3DTile[]}\n   * @readonly\n   */\n  this.children = [];\n\n  /**\n   * This tile's parent or <code>undefined</code> if this tile is the root.\n   * <p>\n   * When a tile's content points to an external tileset JSON file, the external tileset's\n   * root tile's parent is not <code>undefined</code>; instead, the parent references\n   * the tile (with its content pointing to an external tileset JSON file) as if the two tilesets were merged.\n   * </p>\n   *\n   * @type {Cesium3DTile}\n   * @readonly\n   */\n  this.parent = parent;\n\n  let content;\n  let hasEmptyContent = false;\n  let contentState;\n  let contentResource;\n  let serverKey;\n\n  baseResource = Resource.createIfNeeded(baseResource);\n\n  if (hasMultipleContents) {\n    contentState = Cesium3DTileContentState.UNLOADED;\n    // Each content may have its own URI, but they all need to be resolved\n    // relative to the tileset, so the base resource is used.\n    contentResource = baseResource.clone();\n  } else if (defined(contentHeader)) {\n    let contentHeaderUri = contentHeader.uri;\n    if (defined(contentHeader.url)) {\n      Cesium3DTile._deprecationWarning(\n        \"contentUrl\",\n        'This tileset JSON uses the \"content.url\" property which has been deprecated. Use \"content.uri\" instead.',\n      );\n      contentHeaderUri = contentHeader.url;\n    }\n    if (contentHeaderUri === \"\") {\n      Cesium3DTile._deprecationWarning(\n        \"contentUriEmpty\",\n        \"content.uri property is an empty string, which creates a circular dependency, making this tileset invalid. Omit the content property instead\",\n      );\n      content = new Empty3DTileContent(tileset, this);\n      hasEmptyContent = true;\n      contentState = Cesium3DTileContentState.READY;\n    } else {\n      contentState = Cesium3DTileContentState.UNLOADED;\n      contentResource = baseResource.getDerivedResource({\n        url: contentHeaderUri,\n      });\n      serverKey = RequestScheduler.getServerKey(\n        contentResource.getUrlComponent(),\n      );\n    }\n  } else {\n    content = new Empty3DTileContent(tileset, this);\n    hasEmptyContent = true;\n    contentState = Cesium3DTileContentState.READY;\n  }\n\n  this._content = content;\n  this._contentResource = contentResource;\n  this._contentState = contentState;\n  this._expiredContent = undefined;\n\n  this._serverKey = serverKey;\n\n  /**\n   * When <code>true</code>, the tile has no content.\n   *\n   * @type {boolean}\n   * @readonly\n   *\n   * @private\n   */\n  this.hasEmptyContent = hasEmptyContent;\n\n  /**\n   * When <code>true</code>, the tile's content points to an external tileset.\n   * <p>\n   * This is <code>false</code> until the tile's content is loaded.\n   * </p>\n   *\n   * @type {boolean}\n   * @readonly\n   *\n   * @private\n   */\n  this.hasTilesetContent = false;\n\n  /**\n   * When <code>true</code>, the tile's content is an implicit tileset.\n   * <p>\n   * This is <code>false</code> until the tile's implicit content is loaded.\n   * </p>\n   *\n   * @type {boolean}\n   * @readonly\n   *\n   * @private\n   * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium's standard deprecation policy.\n   */\n  this.hasImplicitContent = false;\n\n  /**\n   * Determines whether the tile has renderable content.\n   *\n   * The loading starts with the assumption that the tile does have\n   * renderable content, if the content is not empty.<br>\n   * <br>\n   * This turns <code>false</code> only when the tile content is loaded\n   * and turns out to be a single content that points to an external\n   * tileset or implicit content\n   * </p>\n   *\n   * @type {boolean}\n   * @readonly\n   *\n   * @private\n   */\n  this.hasRenderableContent = !hasEmptyContent;\n\n  /**\n   * When <code>true</code>, the tile contains content metadata from implicit tiling. This flag is set\n   * for tiles transcoded by <code>Implicit3DTileContent</code>.\n   * <p>\n   * This is <code>false</code> until the tile's content is loaded.\n   * </p>\n   *\n   * @type {boolean}\n   * @readonly\n   *\n   * @private\n   * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium's standard deprecation policy.\n   */\n  this.hasImplicitContentMetadata = false;\n\n  /**\n   * When <code>true</code>, the tile has multiple contents, either in the tile JSON (3D Tiles 1.1)\n   * or via the <code>3DTILES_multiple_contents</code> extension.\n   *\n   * @see {@link https://github.com/CesiumGS/3d-tiles/tree/main/extensions/3DTILES_multiple_contents|3DTILES_multiple_contents extension}\n   *\n   * @type {boolean}\n   * @readonly\n   *\n   * @private\n   */\n  this.hasMultipleContents = hasMultipleContents;\n\n  /**\n   * The node in the tileset's LRU cache, used to determine when to unload a tile's content.\n   *\n   * See {@link Cesium3DTilesetCache}\n   *\n   * @type {DoublyLinkedListNode}\n   * @readonly\n   *\n   * @private\n   */\n  this.cacheNode = undefined;\n\n  const expire = header.expire;\n  let expireDuration;\n  let expireDate;\n  if (defined(expire)) {\n    expireDuration = expire.duration;\n    if (defined(expire.date)) {\n      expireDate = JulianDate.fromIso8601(expire.date);\n    }\n  }\n\n  /**\n   * The time in seconds after the tile's content is ready when the content expires and new content is requested.\n   *\n   * @type {number}\n   */\n  this.expireDuration = expireDuration;\n\n  /**\n   * The date when the content expires and new content is requested.\n   *\n   * @type {JulianDate}\n   */\n  this.expireDate = expireDate;\n\n  /**\n   * The time when a style was last applied to this tile.\n   *\n   * @type {number}\n   *\n   * @private\n   */\n  this.lastStyleTime = 0.0;\n\n  /**\n   * Marks whether the tile's children bounds are fully contained within the tile's bounds\n   *\n   * @type {Cesium3DTileOptimizationHint}\n   *\n   * @private\n   */\n  this._optimChildrenWithinParent = Cesium3DTileOptimizationHint.NOT_COMPUTED;\n\n  /**\n   * Tracks if the tile's relationship with a ClippingPlaneCollection has changed with regards\n   * to the ClippingPlaneCollection's state.\n   *\n   * @type {boolean}\n   *\n   * @private\n   */\n  this.clippingPlanesDirty = false;\n\n  /**\n   * Tracks if the tile's relationship with a ClippingPolygonCollection has changed with regards\n   * to the ClippingPolygonCollection's state.\n   *\n   * @type {boolean}\n   *\n   * @private\n   */\n  this.clippingPolygonsDirty = false;\n\n  /**\n   * Tracks if the tile's request should be deferred until all non-deferred\n   * tiles load.\n   *\n   * @type {boolean}\n   *\n   * @private\n   */\n  this.priorityDeferred = false;\n\n  /**\n   * For implicit tiling, an ImplicitTileset object will be attached to a\n   * placeholder tile with either implicit tiling in the JSON (3D Tiles 1.1)\n   * or the <code>3DTILES_implicit_tiling</code> extension.\n   * This way the {@link Implicit3DTileContent} can access the tile later once the content is fetched.\n   *\n   * @type {ImplicitTileset|undefined}\n   *\n   * @private\n   * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium's standard deprecation policy.\n   */\n  this.implicitTileset = undefined;\n\n  /**\n   * For implicit tiling, the (level, x, y, [z]) coordinates within the\n   * implicit tileset are stored in the tile.\n   *\n   * @type {ImplicitTileCoordinates|undefined}\n   *\n   * @private\n   * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium's standard deprecation policy.\n   */\n  this.implicitCoordinates = undefined;\n\n  /**\n   * For implicit tiling, each transcoded tile will hold a weak reference to\n   * the {@link ImplicitSubtree}.\n   *\n   * @type {ImplicitSubtree|undefined}\n   *\n   * @private\n   * @experimental This feature is using part of the 3D Tiles spec that is not final and is subject to change without Cesium's standard deprecation policy.\n   */\n  this.implicitSubtree = undefined;\n\n  // Members that are updated every frame for tree traversal and rendering optimizations:\n  this._distanceToCamera = 0.0;\n  this._centerZDepth = 0.0;\n  this._screenSpaceError = 0.0;\n  this._screenSpaceErrorProgressiveResolution = 0.0; // The screen space error at a given screen height of tileset.progressiveResolutionHeightFraction * screenHeight\n  this._visibilityPlaneMask = 0;\n  this._visible = false;\n  this._inRequestVolume = false;\n\n  this._finalResolution = true;\n  this._depth = 0;\n  this._stackLength = 0;\n  this._selectionDepth = 0;\n\n  this._updatedVisibilityFrame = 0;\n  this._touchedFrame = 0;\n  this._visitedFrame = 0;\n  this._selectedFrame = 0;\n  this._wasSelectedLastFrame = false;\n  this._requestedFrame = 0;\n  this._ancestorWithContent = undefined;\n  this._ancestorWithContentAvailable = undefined;\n  this._refines = false;\n  this._shouldSelect = false;\n  this._isClipped = true;\n  this._isClippedByPolygon = false;\n  this._clippingPlanesState = 0; // encapsulates (_isClipped, clippingPlanes.enabled) and number/function\n  this._clippingPolygonsState = 0; // encapsulates (_isClipped, clippingPolygons.enabled) and number/function\n  this._debugBoundingVolume = undefined;\n  this._debugContentBoundingVolume = undefined;\n  this._debugViewerRequestVolume = undefined;\n  this._debugColor = Color.fromRandom({ alpha: 1.0 });\n  this._debugColorizeTiles = false;\n\n  this._priority = 0.0; // The priority used for request sorting\n  this._priorityHolder = this; // Reference to the ancestor up the tree that holds the _foveatedFactor and _distanceToCamera for all tiles in the refinement chain.\n  this._priorityProgressiveResolution = false;\n  this._priorityProgressiveResolutionScreenSpaceErrorLeaf = false;\n  this._priorityReverseScreenSpaceError = 0.0;\n  this._foveatedFactor = 0.0;\n  this._wasMinPriorityChild = false; // Needed for knowing when to continue a refinement chain. Gets reset in updateTile in traversal and gets set in updateAndPushChildren in traversal.\n\n  this._loadTimestamp = new JulianDate();\n\n  this._commandsLength = 0;\n\n  this._color = undefined;\n  this._colorDirty = false;\n\n  this._request = undefined;\n}\n\n// This can be overridden for testing purposes\nCesium3DTile._deprecationWarning = deprecationWarning;\n\nObject.defineProperties(Cesium3DTile.prototype, {\n  /**\n   * The tileset containing this tile.\n   *\n   * @memberof Cesium3DTile.prototype\n   *\n   * @type {Cesium3DTileset}\n   * @readonly\n   */\n  tileset: {\n    get: function () {\n      return this._tileset;\n    },\n  },\n\n  /**\n   * The tile's content.  This represents the actual tile's payload,\n   * not the content's metadata in the tileset JSON file.\n   *\n   * @memberof Cesium3DTile.prototype\n   *\n   * @type {Cesium3DTileContent}\n   * @readonly\n   */\n  content: {\n    get: function () {\n      return this._content;\n    },\n  },\n\n  /**\n   * Get the tile's bounding volume.\n   *\n   * @memberof Cesium3DTile.prototype\n   *\n   * @type {TileBoundingVolume}\n   * @readonly\n   * @private\n   */\n  boundingVolume: {\n    get: function () {\n      return this._boundingVolume;\n    },\n  },\n\n  /**\n   * Get the bounding volume of the tile's contents.  This defaults to the\n   * tile's bounding volume when the content's bounding volume is\n   * <code>undefined</code>.\n   *\n   * @memberof Cesium3DTile.prototype\n   *\n   * @type {TileBoundingVolume}\n   * @readonly\n   * @private\n   */\n  contentBoundingVolume: {\n    get: function () {\n      return this._contentBoundingVolume ?? this._boundingVolume;\n    },\n  },\n\n  /**\n   * Get the bounding sphere derived from the tile's bounding volume.\n   *\n   * @memberof Cesium3DTile.prototype\n   *\n   * @type {BoundingSphere}\n   * @readonly\n   */\n  boundingSphere: {\n    get: function () {\n      return this._boundingVolume.boundingSphere;\n    },\n  },\n\n  /**\n   * Determines if the tile is visible within the current field of view\n   *\n   * @memberof Cesium3DTile.prototype\n   *\n   * @type {boolean}\n   * @readonly\n   *\n   * @private\n   */\n  isVisible: {\n    get: function () {\n      return this._visible && this._inRequestVolume;\n    },\n  },\n\n  /**\n   * Returns the <code>extras</code> property in the tileset JSON for this tile, which contains application specific metadata.\n   * Returns <code>undefined</code> if <code>extras</code> does not exist.\n   *\n   * @memberof Cesium3DTile.prototype\n   *\n   * @type {object}\n   * @readonly\n   * @see {@link https://github.com/CesiumGS/3d-tiles/tree/main/specification#specifying-extensions-and-application-specific-extras|Extras in the 3D Tiles specification.}\n   */\n  extras: {\n    get: function () {\n      return this._header.extras;\n    },\n  },\n\n  /**\n   * Gets or sets the tile's highlight color.\n   *\n   * @memberof Cesium3DTile.prototype\n   *\n   * @type {Color}\n   *\n   * @default {@link Color.WHITE}\n   *\n   * @private\n   */\n  color: {\n    get: function () {\n      if (!defined(this._color)) {\n        this._color = new Color();\n      }\n      return Color.clone(this._color);\n    },\n    set: function (value) {\n      this._color = Color.clone(value, this._color);\n      this._colorDirty = true;\n    },\n  },\n\n  /**\n   * Determines if the tile has available content to render.  <code>true</code> if the tile's\n   * content is ready or if it has expired content that renders while new content loads; otherwise,\n   * <code>false</code>.\n   *\n   * @memberof Cesium3DTile.prototype\n   *\n   * @type {boolean}\n   * @readonly\n   *\n   * @private\n   */\n  contentAvailable: {\n    get: function () {\n      return (\n        (this.contentReady && this.hasRenderableContent) ||\n        (defined(this._expiredContent) && !this.contentFailed)\n      );\n    },\n  },\n\n  /**\n   * Determines if the tile's content is ready. This is automatically <code>true</code> for\n   * tile's with empty content.\n   *\n   * @memberof Cesium3DTile.prototype\n   *\n   * @type {boolean}\n   * @readonly\n   *\n   * @private\n   */\n  contentReady: {\n    get: function () {\n      return this._contentState === Cesium3DTileContentState.READY;\n    },\n  },\n\n  /**\n   * Determines if the tile's content has not be requested. <code>true</code> if tile's\n   * content has not be requested; otherwise, <code>false</code>.\n   *\n   * @memberof Cesium3DTile.prototype\n   *\n   * @type {boolean}\n   * @readonly\n   *\n   * @private\n   */\n  contentUnloaded: {\n    get: function () {\n      return this._contentState === Cesium3DTileContentState.UNLOADED;\n    },\n  },\n\n  /**\n   * Determines if the tile has renderable content which is unloaded\n   *\n   * @memberof Cesium3DTile.prototype\n   *\n   * @type {boolean}\n   * @readonly\n   *\n   * @private\n   */\n  hasUnloadedRenderableContent: {\n    get: function () {\n      return this.hasRenderableContent && this.contentUnloaded;\n    },\n  },\n\n  /**\n   * Determines if the tile's content is expired. <code>true</code> if tile's\n   * content is expired; otherwise, <code>false</code>.\n   *\n   * @memberof Cesium3DTile.prototype\n   *\n   * @type {boolean}\n   * @readonly\n   *\n   * @private\n   */\n  contentExpired: {\n    get: function () {\n      return this._contentState === Cesium3DTileContentState.EXPIRED;\n    },\n  },\n\n  /**\n   * Determines if the tile's content failed to load.  <code>true</code> if the tile's\n   * content failed to load; otherwise, <code>false</code>.\n   *\n   * @memberof Cesium3DTile.prototype\n   *\n   * @type {boolean}\n   * @readonly\n   *\n   * @private\n   */\n  contentFailed: {\n    get: function () {\n      return this._contentState === Cesium3DTileContentState.FAILED;\n    },\n  },\n\n  /**\n   * Returns the number of draw commands used by this tile.\n   *\n   * @readonly\n   *\n   * @private\n   */\n  commandsLength: {\n    get: function () {\n      return this._commandsLength;\n    },\n  },\n});\n\nconst scratchCartesian = new Cartesian3();\n\n/**\n * @private\n * @param {Cesium3DTile} tile\n * @param {FrameState} frameState\n * @returns {boolean}\n */\nfunction isPriorityDeferred(tile, frameState) {\n  const { tileset, boundingSphere } = tile;\n  const { radius, center } = boundingSphere;\n  const { camera } = frameState;\n\n  // If closest point on line is inside the sphere then set foveatedFactor to 0.\n  // Otherwise, the dot product is with the line from camera to the point on the sphere that is closest to the line.\n  const scaledCameraDirection = Cartesian3.multiplyByScalar(\n    camera.directionWC,\n    tile._centerZDepth,\n    scratchCartesian,\n  );\n  const closestPointOnLine = Cartesian3.add(\n    camera.positionWC,\n    scaledCameraDirection,\n    scratchCartesian,\n  );\n  // The distance from the camera's view direction to the tile.\n  const toLine = Cartesian3.subtract(\n    closestPointOnLine,\n    center,\n    scratchCartesian,\n  );\n  const distanceToCenterLine = Cartesian3.magnitude(toLine);\n  const notTouchingSphere = distanceToCenterLine > radius;\n\n  // If camera's direction vector is inside the bounding sphere then consider\n  // this tile right along the line of sight and set _foveatedFactor to 0.\n  // Otherwise,_foveatedFactor is one minus the dot product of the camera's direction\n  // and the vector between the camera and the point on the bounding sphere closest to the view line.\n  if (notTouchingSphere) {\n    const toLineNormalized = Cartesian3.normalize(toLine, scratchCartesian);\n    const scaledToLine = Cartesian3.multiplyByScalar(\n      toLineNormalized,\n      radius,\n      scratchCartesian,\n    );\n    const closestOnSphere = Cartesian3.add(\n      center,\n      scaledToLine,\n      scratchCartesian,\n    );\n    const toClosestOnSphere = Cartesian3.subtract(\n      closestOnSphere,\n      camera.positionWC,\n      scratchCartesian,\n    );\n    const toClosestOnSphereNormalize = Cartesian3.normalize(\n      toClosestOnSphere,\n      scratchCartesian,\n    );\n    tile._foveatedFactor =\n      1.0 -\n      Math.abs(Cartesian3.dot(camera.directionWC, toClosestOnSphereNormalize));\n  } else {\n    tile._foveatedFactor = 0.0;\n  }\n\n  // Skip this feature if: non-skipLevelOfDetail and replace refine, if the foveated settings are turned off, if tile is progressive resolution and replace refine and skipLevelOfDetail (will help get rid of ancestor artifacts faster)\n  // Or if the tile is a preload of any kind\n  const replace = tile.refine === Cesium3DTileRefine.REPLACE;\n  const skipLevelOfDetail = tileset.isSkippingLevelOfDetail;\n  if (\n    (replace && !skipLevelOfDetail) ||\n    !tileset.foveatedScreenSpaceError ||\n    tileset.foveatedConeSize === 1.0 ||\n    (tile._priorityProgressiveResolution && replace && skipLevelOfDetail) ||\n    tileset._pass === Cesium3DTilePass.PRELOAD_FLIGHT ||\n    tileset._pass === Cesium3DTilePass.PRELOAD\n  ) {\n    return false;\n  }\n\n  const maximumFovatedFactor = 1.0 - Math.cos(camera.frustum.fov * 0.5); // 0.14 for fov = 60. NOTE very hard to defer vertically foveated tiles since max is based on fovy (which is fov). Lowering the 0.5 to a smaller fraction of the screen height will start to defer vertically foveated tiles.\n  const foveatedConeFactor = tileset.foveatedConeSize * maximumFovatedFactor;\n\n  // If it's inside the user-defined view cone, then it should not be deferred.\n  if (tile._foveatedFactor <= foveatedConeFactor) {\n    return false;\n  }\n\n  // Relax SSE based on how big the angle is between the tile and the edge of the foveated cone.\n  const range = maximumFovatedFactor - foveatedConeFactor;\n  const normalizedFoveatedFactor = CesiumMath.clamp(\n    (tile._foveatedFactor - foveatedConeFactor) / range,\n    0.0,\n    1.0,\n  );\n  const sseRelaxation = tileset.foveatedInterpolationCallback(\n    tileset.foveatedMinimumScreenSpaceErrorRelaxation,\n    tileset.memoryAdjustedScreenSpaceError,\n    normalizedFoveatedFactor,\n  );\n  const sse =\n    tile._screenSpaceError === 0.0 && defined(tile.parent)\n      ? tile.parent._screenSpaceError * 0.5\n      : tile._screenSpaceError;\n\n  return tileset.memoryAdjustedScreenSpaceError - sseRelaxation <= sse;\n}\n\nconst scratchJulianDate = new JulianDate();\n\n/**\n * Get the tile's screen space error.\n *\n * @private\n * @param {FrameState} frameState\n * @param {boolean} useParentGeometricError\n * @param {number} progressiveResolutionHeightFraction\n */\nCesium3DTile.prototype.getScreenSpaceError = function (\n  frameState,\n  useParentGeometricError,\n  progressiveResolutionHeightFraction,\n) {\n  const tileset = this._tileset;\n  const heightFraction = progressiveResolutionHeightFraction ?? 1.0;\n  const parentGeometricError = defined(this.parent)\n    ? this.parent.geometricError\n    : tileset._scaledGeometricError;\n  const geometricError = useParentGeometricError\n    ? parentGeometricError\n    : this.geometricError;\n  if (geometricError === 0.0) {\n    // Leaf tiles do not have any error so save the computation\n    return 0.0;\n  }\n  const { camera, context } = frameState;\n  let frustum = camera.frustum;\n  const width = context.drawingBufferWidth;\n  const height = context.drawingBufferHeight * heightFraction;\n  let error;\n  if (\n    frameState.mode === SceneMode.SCENE2D ||\n    frustum instanceof OrthographicFrustum\n  ) {\n    const offCenterFrustum = frustum.offCenterFrustum;\n    if (defined(offCenterFrustum)) {\n      frustum = offCenterFrustum;\n    }\n    const pixelSize =\n      Math.max(frustum.top - frustum.bottom, frustum.right - frustum.left) /\n      Math.max(width, height);\n    error = geometricError / pixelSize;\n  } else {\n    // Avoid divide by zero when viewer is inside the tile\n    const distance = Math.max(this._distanceToCamera, CesiumMath.EPSILON7);\n    const sseDenominator = frustum.sseDenominator;\n    error = (geometricError * height) / (distance * sseDenominator);\n    if (tileset.dynamicScreenSpaceError) {\n      const density = tileset._dynamicScreenSpaceErrorComputedDensity;\n      const factor = tileset.dynamicScreenSpaceErrorFactor;\n      const dynamicError = CesiumMath.fog(distance, density) * factor;\n      error -= dynamicError;\n    }\n  }\n\n  error /= frameState.pixelRatio;\n\n  return error;\n};\n\n/**\n * @private\n * @param {Cesium3DTileset} tileset\n * @param {Cesium3DTile} tile\n * @returns {boolean}\n */\nfunction isPriorityProgressiveResolution(tileset, tile) {\n  if (\n    tileset.progressiveResolutionHeightFraction <= 0.0 ||\n    tileset.progressiveResolutionHeightFraction > 0.5\n  ) {\n    return false;\n  }\n\n  const maximumScreenSpaceError = tileset.memoryAdjustedScreenSpaceError;\n  let isProgressiveResolutionTile =\n    tile._screenSpaceErrorProgressiveResolution > maximumScreenSpaceError; // Mark non-SSE leaves\n  tile._priorityProgressiveResolutionScreenSpaceErrorLeaf = false; // Needed for skipLOD\n  const parent = tile.parent;\n  const tilePasses =\n    tile._screenSpaceErrorProgressiveResolution <= maximumScreenSpaceError;\n  const parentFails =\n    defined(parent) &&\n    parent._screenSpaceErrorProgressiveResolution > maximumScreenSpaceError;\n  if (tilePasses && parentFails) {\n    // A progressive resolution SSE leaf, promote its priority as well\n    tile._priorityProgressiveResolutionScreenSpaceErrorLeaf = true;\n    isProgressiveResolutionTile = true;\n  }\n  return isProgressiveResolutionTile;\n}\n\n/**\n * @private\n * @param {Cesium3DTileset} tileset\n * @param {Cesium3DTile} tile\n * @returns {number}\n */\nfunction getPriorityReverseScreenSpaceError(tileset, tile) {\n  const parent = tile.parent;\n  const useParentScreenSpaceError =\n    defined(parent) &&\n    (!tileset.isSkippingLevelOfDetail ||\n      tile._screenSpaceError === 0.0 ||\n      parent.hasTilesetContent ||\n      parent.hasImplicitContent);\n  const screenSpaceError = useParentScreenSpaceError\n    ? parent._screenSpaceError\n    : tile._screenSpaceError;\n  return tileset.root._screenSpaceError - screenSpaceError;\n}\n\n/**\n * Update the tile's visibility.\n *\n * @private\n * @param {FrameState} frameState\n */\nCesium3DTile.prototype.updateVisibility = function (frameState) {\n  const { parent, tileset } = this;\n  if (this._updatedVisibilityFrame === tileset._updatedVisibilityFrame) {\n    // The tile has already been updated for this frame\n    return;\n  }\n\n  const parentTransform = defined(parent)\n    ? parent.computedTransform\n    : tileset.modelMatrix;\n  const parentVisibilityPlaneMask = defined(parent)\n    ? parent._visibilityPlaneMask\n    : CullingVolume.MASK_INDETERMINATE;\n  this.updateTransform(parentTransform, frameState);\n  this._distanceToCamera = this.distanceToTile(frameState);\n  this._centerZDepth = this.distanceToTileCenter(frameState);\n  this._screenSpaceError = this.getScreenSpaceError(frameState, false);\n  this._screenSpaceErrorProgressiveResolution = this.getScreenSpaceError(\n    frameState,\n    false,\n    tileset.progressiveResolutionHeightFraction,\n  );\n  this._visibilityPlaneMask = this.visibility(\n    frameState,\n    parentVisibilityPlaneMask,\n  ); // Use parent's plane mask to speed up visibility test\n  this._visible = this._visibilityPlaneMask !== CullingVolume.MASK_OUTSIDE;\n  this._inRequestVolume = this.insideViewerRequestVolume(frameState);\n  this._priorityReverseScreenSpaceError = getPriorityReverseScreenSpaceError(\n    tileset,\n    this,\n  );\n  this._priorityProgressiveResolution = isPriorityProgressiveResolution(\n    tileset,\n    this,\n  );\n  this.priorityDeferred = isPriorityDeferred(this, frameState);\n\n  this._updatedVisibilityFrame = tileset._updatedVisibilityFrame;\n};\n\n/**\n * Update whether the tile has expired.\n *\n * @private\n */\nCesium3DTile.prototype.updateExpiration = function () {\n  if (\n    defined(this.expireDate) &&\n    this.contentReady &&\n    !this.hasEmptyContent &&\n    !this.hasMultipleContents\n  ) {\n    const now = JulianDate.now(scratchJulianDate);\n    if (JulianDate.lessThan(this.expireDate, now)) {\n      this._contentState = Cesium3DTileContentState.EXPIRED;\n      this._expiredContent = this._content;\n    }\n  }\n};\n\n/**\n * @private\n * @param {Cesium3DTile} tile\n */\nfunction updateExpireDate(tile) {\n  if (!defined(tile.expireDuration)) {\n    return;\n  }\n  const expireDurationDate = JulianDate.now(scratchJulianDate);\n  JulianDate.addSeconds(\n    expireDurationDate,\n    tile.expireDuration,\n    expireDurationDate,\n  );\n\n  if (defined(tile.expireDate)) {\n    if (JulianDate.lessThan(tile.expireDate, expireDurationDate)) {\n      JulianDate.clone(expireDurationDate, tile.expireDate);\n    }\n  } else {\n    tile.expireDate = JulianDate.clone(expireDurationDate);\n  }\n}\n\n/**\n * @private\n * @param {Cesium3DTile} tile\n * @returns {Function}\n */\nfunction createPriorityFunction(tile) {\n  return function () {\n    return tile._priority;\n  };\n}\n\n/**\n * Requests the tile's content.\n * <p>\n * The request may not be made if the Cesium Request Scheduler can't prioritize it.\n * </p>\n *\n * @return {Promise<Cesium3DTileContent>|undefined} A promise that resolves when the request completes, or undefined if there is no request needed, or the request cannot be scheduled.\n * @private\n */\nCesium3DTile.prototype.requestContent = function () {\n  // empty contents don't require any HTTP requests\n  if (this.hasEmptyContent) {\n    return;\n  }\n\n  if (this.hasMultipleContents) {\n    return requestMultipleContents(this);\n  }\n\n  return requestSingleContent(this);\n};\n\n/**\n * Multiple {@link Cesium3DTileContent}s are allowed within a single tile either through\n * the tile JSON (3D Tiles 1.1) or the <code>3DTILES_multiple_contents</code> extension.\n * Due to differences in request scheduling, this is handled separately.\n * <p>\n * This implementation of multiple contents does not\n * support tile expiry like requestSingleContent does. If this changes,\n * note that the resource.setQueryParameters() details must go inside {@link Multiple3DTileContent} since that is per-request.\n * </p>\n *\n * @private\n * @param {Cesium3DTile} tile\n * @returns {Promise<Cesium3DTileContent>|Promise<undefined>|undefined} A promise that resolves to the tile content once loaded, or a promise that resolves to undefined if the request was cancelled mid-flight, or undefined if the request cannot be scheduled this frame\n */\nfunction requestMultipleContents(tile) {\n  let multipleContents = tile._content;\n  const tileset = tile._tileset;\n\n  if (!defined(multipleContents)) {\n    // Create the content object immediately, it will handle scheduling\n    // requests for inner contents.\n    const contentsJson = hasExtension(tile._header, \"3DTILES_multiple_contents\")\n      ? tile._header.extensions[\"3DTILES_multiple_contents\"]\n      : tile._header;\n\n    multipleContents = new Multiple3DTileContent(\n      tileset,\n      tile,\n      tile._contentResource.clone(),\n      contentsJson,\n    );\n    tile._content = multipleContents;\n  }\n\n  const promise = multipleContents.requestInnerContents();\n\n  if (!defined(promise)) {\n    // Request could not all be scheduled this frame\n    return;\n  }\n\n  tile._contentState = Cesium3DTileContentState.LOADING;\n  return promise\n    .then((content) => {\n      if (tile.isDestroyed()) {\n        // Tile is unloaded before the content can process\n        return;\n      }\n\n      // Tile was canceled, try again later\n      if (!defined(content)) {\n        return;\n      }\n\n      tile._contentState = Cesium3DTileContentState.PROCESSING;\n      return multipleContents;\n    })\n    .catch((error) => {\n      if (tile.isDestroyed()) {\n        // Tile is unloaded before the content can process\n        return;\n      }\n\n      tile._contentState = Cesium3DTileContentState.FAILED;\n      throw error;\n    });\n}\n\nasync function processArrayBuffer(\n  tile,\n  tileset,\n  request,\n  expired,\n  requestPromise,\n) {\n  const previousState = tile._contentState;\n  tile._contentState = Cesium3DTileContentState.LOADING;\n  ++tileset.statistics.numberOfPendingRequests;\n\n  let arrayBuffer;\n  try {\n    arrayBuffer = await requestPromise;\n  } catch (error) {\n    --tileset.statistics.numberOfPendingRequests;\n    if (tile.isDestroyed()) {\n      // Tile is unloaded before the content can process\n      return;\n    }\n\n    if (request.cancelled || request.state === RequestState.CANCELLED) {\n      // Cancelled due to low priority - try again later.\n      tile._contentState = previousState;\n      ++tileset.statistics.numberOfAttemptedRequests;\n      return;\n    }\n\n    tile._contentState = Cesium3DTileContentState.FAILED;\n    throw error;\n  }\n\n  if (tile.isDestroyed()) {\n    --tileset.statistics.numberOfPendingRequests;\n    // Tile is unloaded before the content can process\n    return;\n  }\n\n  if (request.cancelled || request.state === RequestState.CANCELLED) {\n    // Cancelled due to low priority - try again later.\n    tile._contentState = previousState;\n    --tileset.statistics.numberOfPendingRequests;\n    ++tileset.statistics.numberOfAttemptedRequests;\n    return;\n  }\n\n  try {\n    const content = await makeContent(tile, arrayBuffer);\n    --tileset.statistics.numberOfPendingRequests;\n\n    if (tile.isDestroyed()) {\n      // Tile is unloaded before the content can process\n      return;\n    }\n\n    if (expired) {\n      tile.expireDate = undefined;\n    }\n\n    tile._content = content;\n    tile._contentState = Cesium3DTileContentState.PROCESSING;\n\n    return content;\n  } catch (error) {\n    --tileset.statistics.numberOfPendingRequests;\n    if (tile.isDestroyed()) {\n      // Tile is unloaded before the content can process\n      return;\n    }\n\n    tile._contentState = Cesium3DTileContentState.FAILED;\n    throw error;\n  }\n}\n\n/**\n * @private\n * @param {Cesium3DTile} tile\n * @returns {Promise<Cesium3DTileContent>|Promise<undefined>|undefined} A promise that resolves to the tile content once loaded; a promise that resolves to undefined if the tile was destroyed before processing can happen or the request was cancelled mid-flight; or undefined if the request cannot be scheduled this frame.\n */\nfunction requestSingleContent(tile) {\n  // it is important to clone here. The fetchArrayBuffer() below uses\n  // throttling, but other uses of the resources do not.\n  const resource = tile._contentResource.clone();\n  const expired = tile.contentExpired;\n  if (expired) {\n    // Append a query parameter of the tile expiration date to prevent caching\n    resource.setQueryParameters({\n      expired: tile.expireDate.toString(),\n    });\n  }\n\n  const request = new Request({\n    throttle: true,\n    throttleByServer: true,\n    type: RequestType.TILES3D,\n    priorityFunction: createPriorityFunction(tile),\n    serverKey: tile._serverKey,\n  });\n\n  tile._request = request;\n  resource.request = request;\n  const tileset = tile._tileset;\n  const promise = resource.fetchArrayBuffer();\n  if (!defined(promise)) {\n    ++tileset.statistics.numberOfAttemptedRequests;\n    return;\n  }\n\n  return processArrayBuffer(tile, tileset, request, expired, promise);\n}\n\n/**\n * Given a downloaded content payload, construct a {@link Cesium3DTileContent}.\n * <p>\n * This is only used for single contents.\n * </p>\n *\n * @param {Cesium3DTile} tile The tile\n * @param {ArrayBuffer} arrayBuffer The downloaded payload containing data for the content\n * @return {Promise<Cesium3DTileContent>} A content object\n * @private\n */\nasync function makeContent(tile, arrayBuffer) {\n  const preprocessed = preprocess3DTileContent(arrayBuffer);\n\n  // Vector and Geometry tile rendering do not support the skip LOD optimization.\n  const tileset = tile._tileset;\n  tileset._disableSkipLevelOfDetail =\n    tileset._disableSkipLevelOfDetail ||\n    preprocessed.contentType === Cesium3DTileContentType.GEOMETRY ||\n    preprocessed.contentType === Cesium3DTileContentType.VECTOR;\n\n  if (\n    preprocessed.contentType === Cesium3DTileContentType.IMPLICIT_SUBTREE ||\n    preprocessed.contentType === Cesium3DTileContentType.IMPLICIT_SUBTREE_JSON\n  ) {\n    tile.hasImplicitContent = true;\n    tile.hasRenderableContent = false;\n  }\n\n  if (preprocessed.contentType === Cesium3DTileContentType.EXTERNAL_TILESET) {\n    tile.hasTilesetContent = true;\n    tile.hasRenderableContent = false;\n  }\n\n  let content;\n  const contentFactory = Cesium3DTileContentFactory[preprocessed.contentType];\n  if (tile.isDestroyed()) {\n    return;\n  }\n\n  if (defined(preprocessed.binaryPayload)) {\n    content = await Promise.resolve(\n      contentFactory(\n        tileset,\n        tile,\n        tile._contentResource,\n        preprocessed.binaryPayload.buffer,\n        0,\n      ),\n    );\n  } else {\n    // JSON formats\n    content = await Promise.resolve(\n      contentFactory(\n        tileset,\n        tile,\n        tile._contentResource,\n        preprocessed.jsonPayload,\n      ),\n    );\n  }\n\n  const contentHeader = tile._contentHeader;\n\n  if (tile.hasImplicitContentMetadata) {\n    const subtree = tile.implicitSubtree;\n    const coordinates = tile.implicitCoordinates;\n    content.metadata = subtree.getContentMetadataView(coordinates, 0);\n  } else if (!tile.hasImplicitContent) {\n    content.metadata = findContentMetadata(tileset, contentHeader);\n  }\n\n  const groupMetadata = findGroupMetadata(tileset, contentHeader);\n  if (defined(groupMetadata)) {\n    content.group = new Cesium3DContentGroup({\n      metadata: groupMetadata,\n    });\n  }\n\n  return content;\n}\n\n/**\n * Cancel requests for the tile's contents. This is called when the tile\n * goes out of view.\n *\n * @private\n */\nCesium3DTile.prototype.cancelRequests = function () {\n  if (this.hasMultipleContents) {\n    this._content.cancelRequests();\n  } else {\n    this._request.cancel();\n  }\n};\n\n/**\n * Unloads the tile's content.\n *\n * @private\n */\nCesium3DTile.prototype.unloadContent = function () {\n  if (!this.hasRenderableContent) {\n    return;\n  }\n\n  this._content = this._content && this._content.destroy();\n  this._contentState = Cesium3DTileContentState.UNLOADED;\n\n  this.lastStyleTime = 0.0;\n  this.clippingPlanesDirty = this._clippingPlanesState === 0;\n  this._clippingPlanesState = 0;\n  this.clippingPolygonsDirty = this._clippingPolygonsState === 0;\n  this._clippingPolygonsState = 0;\n\n  this._debugColorizeTiles = false;\n\n  this._debugBoundingVolume =\n    this._debugBoundingVolume && this._debugBoundingVolume.destroy();\n  this._debugContentBoundingVolume =\n    this._debugContentBoundingVolume &&\n    this._debugContentBoundingVolume.destroy();\n  this._debugViewerRequestVolume =\n    this._debugViewerRequestVolume && this._debugViewerRequestVolume.destroy();\n};\n\nconst scratchProjectedBoundingSphere = new BoundingSphere();\n\n/**\n * @private\n * @param {Cesium3DTile} tile\n * @param {FrameState} frameState\n * @returns {TileBoundingVolume}\n */\nfunction getBoundingVolume(tile, frameState) {\n  if (\n    frameState.mode !== SceneMode.SCENE3D &&\n    !defined(tile._boundingVolume2D)\n  ) {\n    const boundingSphere = tile._boundingVolume.boundingSphere;\n    const sphere = BoundingSphere.projectTo2D(\n      boundingSphere,\n      frameState.mapProjection,\n      scratchProjectedBoundingSphere,\n    );\n    tile._boundingVolume2D = new TileBoundingSphere(\n      sphere.center,\n      sphere.radius,\n    );\n  }\n\n  return frameState.mode !== SceneMode.SCENE3D\n    ? tile._boundingVolume2D\n    : tile._boundingVolume;\n}\n\n/**\n * @private\n * @param {Cesium3DTile} tile\n * @param {FrameState} frameState\n * @returns {TileBoundingVolume}\n */\nfunction getContentBoundingVolume(tile, frameState) {\n  if (\n    frameState.mode !== SceneMode.SCENE3D &&\n    !defined(tile._contentBoundingVolume2D)\n  ) {\n    const boundingSphere = tile._contentBoundingVolume.boundingSphere;\n    const sphere = BoundingSphere.projectTo2D(\n      boundingSphere,\n      frameState.mapProjection,\n      scratchProjectedBoundingSphere,\n    );\n    tile._contentBoundingVolume2D = new TileBoundingSphere(\n      sphere.center,\n      sphere.radius,\n    );\n  }\n  return frameState.mode !== SceneMode.SCENE3D\n    ? tile._contentBoundingVolume2D\n    : tile._contentBoundingVolume;\n}\n\n/**\n * Determines whether the tile's bounding volume intersects the culling volume.\n *\n * @param {FrameState} frameState The frame state.\n * @param {number} parentVisibilityPlaneMask The parent's plane mask to speed up the visibility check.\n * @returns {number} A plane mask as described above in {@link CullingVolume#computeVisibilityWithPlaneMask}.\n *\n * @private\n */\nCesium3DTile.prototype.visibility = function (\n  frameState,\n  parentVisibilityPlaneMask,\n) {\n  const cullingVolume = frameState.cullingVolume;\n  const boundingVolume = getBoundingVolume(this, frameState);\n\n  const tileset = this._tileset;\n  const clippingPlanes = tileset.clippingPlanes;\n  if (defined(clippingPlanes) && clippingPlanes.enabled) {\n    const intersection = clippingPlanes.computeIntersectionWithBoundingVolume(\n      boundingVolume,\n      tileset.clippingPlanesOriginMatrix,\n    );\n    this._isClipped = intersection !== Intersect.INSIDE;\n    if (intersection === Intersect.OUTSIDE) {\n      return CullingVolume.MASK_OUTSIDE;\n    }\n  }\n\n  const clippingPolygons = tileset.clippingPolygons;\n  if (defined(clippingPolygons) && clippingPolygons.enabled) {\n    const intersection =\n      clippingPolygons.computeIntersectionWithBoundingVolume(boundingVolume);\n\n    this._isClippedByPolygon = intersection !== Intersect.OUTSIDE;\n    // Polygon clipping intersections are determined by outer rectangles, therefore we cannot\n    // preemptively determine if a tile is completely clipped or not here.\n  }\n\n  return cullingVolume.computeVisibilityWithPlaneMask(\n    boundingVolume,\n    parentVisibilityPlaneMask,\n  );\n};\n\n/**\n * Assuming the tile's bounding volume intersects the culling volume, determines\n * whether the tile's content's bounding volume intersects the culling volume.\n *\n * @param {FrameState} frameState The frame state.\n * @returns {Intersect} The result of the intersection: the tile's content is completely outside, completely inside, or intersecting the culling volume.\n *\n * @private\n */\nCesium3DTile.prototype.contentVisibility = function (frameState) {\n  // Assumes the tile's bounding volume intersects the culling volume already, so\n  // just return Intersect.INSIDE if there is no content bounding volume.\n  if (!defined(this._contentBoundingVolume)) {\n    return Intersect.INSIDE;\n  }\n\n  if (this._visibilityPlaneMask === CullingVolume.MASK_INSIDE) {\n    // The tile's bounding volume is completely inside the culling volume so\n    // the content bounding volume must also be inside.\n    return Intersect.INSIDE;\n  }\n\n  // PERFORMANCE_IDEA: is it possible to burn less CPU on this test since we know the\n  // tile's (not the content's) bounding volume intersects the culling volume?\n  const cullingVolume = frameState.cullingVolume;\n  const boundingVolume = getContentBoundingVolume(this, frameState);\n\n  const tileset = this._tileset;\n  const clippingPlanes = tileset.clippingPlanes;\n  if (defined(clippingPlanes) && clippingPlanes.enabled) {\n    const intersection = clippingPlanes.computeIntersectionWithBoundingVolume(\n      boundingVolume,\n      tileset.clippingPlanesOriginMatrix,\n    );\n    this._isClipped = intersection !== Intersect.INSIDE;\n    if (intersection === Intersect.OUTSIDE) {\n      return Intersect.OUTSIDE;\n    }\n  }\n\n  const clippingPolygons = tileset.clippingPolygons;\n  if (defined(clippingPolygons) && clippingPolygons.enabled) {\n    const intersection =\n      clippingPolygons.computeIntersectionWithBoundingVolume(boundingVolume);\n    this._isClippedByPolygon = intersection !== Intersect.OUTSIDE;\n    if (intersection === Intersect.INSIDE) {\n      return Intersect.OUTSIDE;\n    }\n  }\n\n  return cullingVolume.computeVisibility(boundingVolume);\n};\n\n/**\n * Computes the (potentially approximate) distance from the closest point of the tile's bounding volume to the camera.\n *\n * @param {FrameState} frameState The frame state.\n * @returns {number} The distance, in meters, or zero if the camera is inside the bounding volume.\n *\n * @private\n */\nCesium3DTile.prototype.distanceToTile = function (frameState) {\n  const boundingVolume = getBoundingVolume(this, frameState);\n  return boundingVolume.distanceToCamera(frameState);\n};\n\nconst scratchToTileCenter = new Cartesian3();\n\n/**\n * Computes the distance from the center of the tile's bounding volume to the camera's plane defined by its position and view direction.\n *\n * @param {FrameState} frameState The frame state.\n * @returns {number} The distance, in meters.\n *\n * @private\n */\nCesium3DTile.prototype.distanceToTileCenter = function (frameState) {\n  const tileBoundingVolume = getBoundingVolume(this, frameState);\n  const boundingVolume = tileBoundingVolume.boundingVolume; // Gets the underlying OrientedBoundingBox or BoundingSphere\n  const toCenter = Cartesian3.subtract(\n    boundingVolume.center,\n    frameState.camera.positionWC,\n    scratchToTileCenter,\n  );\n  return Cartesian3.dot(frameState.camera.directionWC, toCenter);\n};\n\n/**\n * Checks if the camera is inside the viewer request volume.\n *\n * @param {FrameState} frameState The frame state.\n * @returns {boolean} Whether the camera is inside the volume.\n *\n * @private\n */\nCesium3DTile.prototype.insideViewerRequestVolume = function (frameState) {\n  const viewerRequestVolume = this._viewerRequestVolume;\n  return (\n    !defined(viewerRequestVolume) ||\n    viewerRequestVolume.distanceToCamera(frameState) === 0.0\n  );\n};\n\nconst scratchMatrix = new Matrix3();\nconst scratchScale = new Cartesian3();\nconst scratchHalfAxes = new Matrix3();\nconst scratchCenter = new Cartesian3();\nconst scratchRectangle = new Rectangle();\nconst scratchOrientedBoundingBox = new OrientedBoundingBox();\nconst scratchTransform = new Matrix4();\n\n/**\n * @private\n * @param {Array} box An array of 12 numbers that define an oriented bounding box\n * @param {Matrix4} transform\n * @param {TileBoundingVolume} [result]\n * @returns {TileOrientedBoundingBox}\n */\nfunction createBox(box, transform, result) {\n  let center = Cartesian3.fromElements(box[0], box[1], box[2], scratchCenter);\n  let halfAxes = Matrix3.fromArray(box, 3, scratchHalfAxes);\n\n  // Find the transformed center and halfAxes\n  center = Matrix4.multiplyByPoint(transform, center, center);\n  const rotationScale = Matrix4.getMatrix3(transform, scratchMatrix);\n  halfAxes = Matrix3.multiply(rotationScale, halfAxes, halfAxes);\n\n  if (defined(result)) {\n    result.update(center, halfAxes);\n    return result;\n  }\n  return new TileOrientedBoundingBox(center, halfAxes);\n}\n\n/**\n * @private\n * @param {Array} region An array of six numbers that define a bounding geographic region in EPSG:4979 coordinates with the order [west, south, east, north, minimum height, maximum height]\n * @param {Matrix4} transform\n * @param {Matrix4} initialTransform\n * @param {TileOrientedBoundingBox} [result]\n * @returns {TileOrientedBoundingBox}\n */\nfunction createBoxFromTransformedRegion(\n  region,\n  transform,\n  initialTransform,\n  result,\n) {\n  const rectangle = Rectangle.unpack(region, 0, scratchRectangle);\n  const minimumHeight = region[4];\n  const maximumHeight = region[5];\n\n  const orientedBoundingBox = OrientedBoundingBox.fromRectangle(\n    rectangle,\n    minimumHeight,\n    maximumHeight,\n    Ellipsoid.WGS84,\n    scratchOrientedBoundingBox,\n  );\n  let center = orientedBoundingBox.center;\n  let halfAxes = orientedBoundingBox.halfAxes;\n\n  // A region bounding volume is not transformed by the transform in the tileset JSON,\n  // but may be transformed by additional transforms applied in Cesium.\n  // This is why the transform is calculated as the difference between the initial transform and the current transform.\n  transform = Matrix4.multiplyTransformation(\n    transform,\n    Matrix4.inverseTransformation(initialTransform, scratchTransform),\n    scratchTransform,\n  );\n  center = Matrix4.multiplyByPoint(transform, center, center);\n  const rotationScale = Matrix4.getMatrix3(transform, scratchMatrix);\n  halfAxes = Matrix3.multiply(rotationScale, halfAxes, halfAxes);\n\n  if (defined(result) && result instanceof TileOrientedBoundingBox) {\n    result.update(center, halfAxes);\n    return result;\n  }\n\n  return new TileOrientedBoundingBox(center, halfAxes);\n}\n\n/**\n * Creates a TileBoundingVolume from the given region and transform\n * information.\n *\n * This may either be a TileBoundingRegion or a TileOrientedBoundingBox.\n *\n * If the given transform is the initial transform, then this will return\n * a TileBoundingRegion. This will either be the given result parameter,\n * or a new TileBoundingRegion, if the given result parameter was not\n * a TileBoundingRegion.\n *\n * If the given transform deviates from the initial transform, then this\n * will return a TileOrientedBoundingBox that was computed by applying\n * the given transform to the given region. This will either be the\n * given result parameter, or a new TileOrientedBoundingBox, if the given\n * result parameter was not a TileOrientedBoundingBox\n *\n * @private\n * @param {Array} region An array of six numbers that define a bounding\n * geographic region in EPSG:4979 coordinates with the order\n * [west, south, east, north, minimum height, maximum height]\n * @param {Matrix4} transform The current computedTransform of the tile,\n * which includes the parent transform (which, in turn, includes the\n * modelMatrix of the containing tileset)\n * @param {Matrix4} initialTransform The initial transform of the tile,\n * before any changes to the modelMatrix of the containing tileset\n * @param {TileBoundingVolume} [result] An optional result.\n * @returns {TileBoundingVolume} The resulting bounding volume\n */\nfunction createRegion(region, transform, initialTransform, result) {\n  if (\n    !Matrix4.equalsEpsilon(transform, initialTransform, CesiumMath.EPSILON8)\n  ) {\n    if (result instanceof TileOrientedBoundingBox) {\n      return createBoxFromTransformedRegion(\n        region,\n        transform,\n        initialTransform,\n        result,\n      );\n    }\n    return createBoxFromTransformedRegion(\n      region,\n      transform,\n      initialTransform,\n      undefined,\n    );\n  }\n\n  const rectangleRegion = Rectangle.unpack(region, 0, scratchRectangle);\n\n  if (result instanceof TileBoundingRegion) {\n    result.rectangle = Rectangle.clone(rectangleRegion, result.rectangle);\n    result.minimumHeight = region[4];\n    result.maximumHeight = region[5];\n    // The TileBoundingRegion was already constructed with the default\n    // WGS84 ellipsoid, so keep it consistent when updating.\n    result.computeBoundingVolumes(Ellipsoid.WGS84);\n    return result;\n  }\n\n  return new TileBoundingRegion({\n    rectangle: rectangleRegion,\n    minimumHeight: region[4],\n    maximumHeight: region[5],\n  });\n}\n\n/**\n * @private\n * @param {Array} sphere An array of four numbers that define a bounding sphere\n * @param {Matrix4} transform\n * @param {TileBoundingVolume} [result]\n * @returns {TileBoundingSphere}\n */\nfunction createSphere(sphere, transform, result) {\n  let center = Cartesian3.fromElements(\n    sphere[0],\n    sphere[1],\n    sphere[2],\n    scratchCenter,\n  );\n  let radius = sphere[3];\n\n  // Find the transformed center and radius\n  center = Matrix4.multiplyByPoint(transform, center, center);\n  const scale = Matrix4.getScale(transform, scratchScale);\n  const uniformScale = Cartesian3.maximumComponent(scale);\n  radius *= uniformScale;\n\n  if (defined(result)) {\n    result.update(center, radius);\n    return result;\n  }\n  return new TileBoundingSphere(center, radius);\n}\n\n/**\n * Create a bounding volume from the tile's bounding volume header.\n *\n * @param {object} boundingVolumeHeader The tile's bounding volume header.\n * @param {Matrix4} transform The transform to apply to the bounding volume.\n * @param {TileBoundingVolume} [result] The object onto which to store the result.\n *\n * @returns {TileBoundingVolume} The modified result parameter or a new TileBoundingVolume instance if none was provided.\n *\n * @private\n */\nCesium3DTile.prototype.createBoundingVolume = function (\n  boundingVolumeHeader,\n  transform,\n  result,\n) {\n  // if explicit tile metadata includes TILE_BOUNDING_BOX, TILE_BOUNDING_REGION,\n  // or TILE_BOUNDING_SPHERE, override tile.boundingVolume.\n  const tileMetadata = this.metadata;\n  let metadataBoundingVolumeHeader;\n  if (defined(tileMetadata)) {\n    metadataBoundingVolumeHeader =\n      BoundingVolumeSemantics.parseBoundingVolumeSemantic(\"TILE\", tileMetadata);\n  }\n  if (defined(metadataBoundingVolumeHeader)) {\n    boundingVolumeHeader = metadataBoundingVolumeHeader;\n  }\n\n  if (!defined(boundingVolumeHeader)) {\n    throw new RuntimeError(\"boundingVolume must be defined\");\n  }\n\n  if (hasExtension(boundingVolumeHeader, \"3DTILES_bounding_volume_S2\")) {\n    return new TileBoundingS2Cell(\n      boundingVolumeHeader.extensions[\"3DTILES_bounding_volume_S2\"],\n    );\n  }\n\n  const { box, region, sphere } = boundingVolumeHeader;\n  if (defined(box)) {\n    const tileOrientedBoundingBox = createBox(box, transform, result);\n    if (this._verticalExaggeration !== 1.0) {\n      exaggerateBoundingBox(\n        tileOrientedBoundingBox,\n        this._verticalExaggeration,\n        this._verticalExaggerationRelativeHeight,\n      );\n    }\n    return tileOrientedBoundingBox;\n  }\n  if (defined(region)) {\n    const tileBoundingVolume = createRegion(\n      region,\n      transform,\n      this._initialTransform,\n      result,\n    );\n    if (this._verticalExaggeration === 1.0) {\n      return tileBoundingVolume;\n    }\n    if (tileBoundingVolume instanceof TileOrientedBoundingBox) {\n      exaggerateBoundingBox(\n        tileBoundingVolume,\n        this._verticalExaggeration,\n        this._verticalExaggerationRelativeHeight,\n      );\n    } else {\n      tileBoundingVolume.minimumHeight = VerticalExaggeration.getHeight(\n        tileBoundingVolume.minimumHeight,\n        this._verticalExaggeration,\n        this._verticalExaggerationRelativeHeight,\n      );\n      tileBoundingVolume.maximumHeight = VerticalExaggeration.getHeight(\n        tileBoundingVolume.maximumHeight,\n        this._verticalExaggeration,\n        this._verticalExaggerationRelativeHeight,\n      );\n      tileBoundingVolume.computeBoundingVolumes(Ellipsoid.WGS84);\n    }\n    return tileBoundingVolume;\n  }\n  if (defined(sphere)) {\n    const tileBoundingSphere = createSphere(sphere, transform, result);\n    if (this._verticalExaggeration !== 1.0) {\n      const exaggeratedCenter = VerticalExaggeration.getPosition(\n        tileBoundingSphere.center,\n        Ellipsoid.WGS84,\n        this._verticalExaggeration,\n        this._verticalExaggerationRelativeHeight,\n        scratchCenter,\n      );\n      const exaggeratedRadius =\n        tileBoundingSphere.radius * this._verticalExaggeration;\n      tileBoundingSphere.update(exaggeratedCenter, exaggeratedRadius);\n    }\n    return tileBoundingSphere;\n  }\n  throw new RuntimeError(\n    \"boundingVolume must contain a sphere, region, or box\",\n  );\n};\n\nconst scratchExaggeratedCorners = Cartesian3.unpackArray(\n  new Array(8 * 3).fill(0),\n);\n\n/**\n * Exaggerates the bounding box of a tile based on the provided exaggeration factors.\n *\n * @private\n * @param {TileOrientedBoundingBox} tileOrientedBoundingBox - The oriented bounding box of the tile.\n * @param {number} exaggeration - The exaggeration factor to apply to the tile's bounding box.\n * @param {number} exaggerationRelativeHeight - The height relative to which exaggeration will be applied.\n */\nfunction exaggerateBoundingBox(\n  tileOrientedBoundingBox,\n  exaggeration,\n  exaggerationRelativeHeight,\n) {\n  const exaggeratedCorners = tileOrientedBoundingBox.boundingVolume\n    .computeCorners(scratchExaggeratedCorners)\n    .map((corner) =>\n      VerticalExaggeration.getPosition(\n        corner,\n        Ellipsoid.WGS84,\n        exaggeration,\n        exaggerationRelativeHeight,\n        corner,\n      ),\n    );\n  const exaggeratedBox = OrientedBoundingBox.fromPoints(\n    exaggeratedCorners,\n    scratchOrientedBoundingBox,\n  );\n  tileOrientedBoundingBox.update(\n    exaggeratedBox.center,\n    exaggeratedBox.halfAxes,\n  );\n}\n\n/**\n * Update the tile's transform. The transform is applied to the tile's bounding volumes.\n *\n * @private\n * @param {Matrix4} parentTransform\n * @param {FrameState} [frameState]\n */\nCesium3DTile.prototype.updateTransform = function (\n  parentTransform,\n  frameState,\n) {\n  parentTransform = parentTransform ?? Matrix4.IDENTITY;\n  const computedTransform = Matrix4.multiplyTransformation(\n    parentTransform,\n    this.transform,\n    scratchTransform,\n  );\n  const transformChanged = !Matrix4.equals(\n    computedTransform,\n    this.computedTransform,\n  );\n  const exaggerationChanged =\n    defined(frameState) &&\n    (this._verticalExaggeration !== frameState.verticalExaggeration ||\n      this._verticalExaggerationRelativeHeight !==\n        frameState.verticalExaggerationRelativeHeight);\n\n  if (!transformChanged && !exaggerationChanged) {\n    return;\n  }\n  if (transformChanged) {\n    Matrix4.clone(computedTransform, this.computedTransform);\n  }\n  if (exaggerationChanged) {\n    this._verticalExaggeration = frameState.verticalExaggeration;\n    this._verticalExaggerationRelativeHeight =\n      frameState.verticalExaggerationRelativeHeight;\n  }\n\n  // Update the bounding volumes\n  const header = this._header;\n  const contentHeader = this._contentHeader;\n  this._boundingVolume = this.createBoundingVolume(\n    header.boundingVolume,\n    this.computedTransform,\n    this._boundingVolume,\n  );\n  if (defined(this._contentBoundingVolume)) {\n    this._contentBoundingVolume = this.createBoundingVolume(\n      contentHeader.boundingVolume,\n      this.computedTransform,\n      this._contentBoundingVolume,\n    );\n  }\n  if (defined(this._viewerRequestVolume)) {\n    this._viewerRequestVolume = this.createBoundingVolume(\n      header.viewerRequestVolume,\n      this.computedTransform,\n      this._viewerRequestVolume,\n    );\n  }\n\n  this.updateGeometricErrorScale();\n\n  // Destroy the debug bounding volumes. They will be generated fresh.\n  this._debugBoundingVolume =\n    this._debugBoundingVolume && this._debugBoundingVolume.destroy();\n  this._debugContentBoundingVolume =\n    this._debugContentBoundingVolume &&\n    this._debugContentBoundingVolume.destroy();\n  this._debugViewerRequestVolume =\n    this._debugViewerRequestVolume && this._debugViewerRequestVolume.destroy();\n};\n\nCesium3DTile.prototype.updateGeometricErrorScale = function () {\n  const scale = Matrix4.getScale(this.computedTransform, scratchScale);\n  const uniformScale = Cartesian3.maximumComponent(scale);\n  this.geometricError = this._geometricError * uniformScale;\n\n  if (!defined(this.parent)) {\n    // Update the tileset's geometric error\n    const tileset = this._tileset;\n    tileset._scaledGeometricError = tileset._geometricError * uniformScale;\n  }\n};\n\n/**\n * @private\n * @param {Cesium3DTile} tile\n * @param {Cesium3DTileset} tileset\n * @param {FrameState} frameState\n * @param {object} passOptions\n */\nfunction applyDebugSettings(tile, tileset, frameState, passOptions) {\n  if (!passOptions.isRender) {\n    return;\n  }\n\n  const hasContentBoundingVolume =\n    defined(tile._contentHeader) && defined(tile._contentHeader.boundingVolume);\n\n  const showVolume =\n    tileset.debugShowBoundingVolume ||\n    (tileset.debugShowContentBoundingVolume && !hasContentBoundingVolume);\n  if (showVolume) {\n    let color;\n    if (!tile._finalResolution) {\n      color = Color.YELLOW;\n    } else if (!tile.hasRenderableContent) {\n      color = Color.DARKGRAY;\n    } else {\n      color = Color.WHITE;\n    }\n    if (!defined(tile._debugBoundingVolume)) {\n      tile._debugBoundingVolume = tile._boundingVolume.createDebugVolume(color);\n    }\n    tile._debugBoundingVolume.update(frameState);\n    const attributes =\n      tile._debugBoundingVolume.getGeometryInstanceAttributes(\"outline\");\n    attributes.color = ColorGeometryInstanceAttribute.toValue(\n      color,\n      attributes.color,\n    );\n  } else if (!showVolume && defined(tile._debugBoundingVolume)) {\n    tile._debugBoundingVolume = tile._debugBoundingVolume.destroy();\n  }\n\n  if (tileset.debugShowContentBoundingVolume && hasContentBoundingVolume) {\n    if (!defined(tile._debugContentBoundingVolume)) {\n      tile._debugContentBoundingVolume =\n        tile._contentBoundingVolume.createDebugVolume(Color.BLUE);\n    }\n    tile._debugContentBoundingVolume.update(frameState);\n  } else if (\n    !tileset.debugShowContentBoundingVolume &&\n    defined(tile._debugContentBoundingVolume)\n  ) {\n    tile._debugContentBoundingVolume =\n      tile._debugContentBoundingVolume.destroy();\n  }\n\n  if (\n    tileset.debugShowViewerRequestVolume &&\n    defined(tile._viewerRequestVolume)\n  ) {\n    if (!defined(tile._debugViewerRequestVolume)) {\n      tile._debugViewerRequestVolume =\n        tile._viewerRequestVolume.createDebugVolume(Color.YELLOW);\n    }\n    tile._debugViewerRequestVolume.update(frameState);\n  } else if (\n    !tileset.debugShowViewerRequestVolume &&\n    defined(tile._debugViewerRequestVolume)\n  ) {\n    tile._debugViewerRequestVolume = tile._debugViewerRequestVolume.destroy();\n  }\n\n  const debugColorizeTilesOn =\n    (tileset.debugColorizeTiles && !tile._debugColorizeTiles) ||\n    defined(tileset._heatmap.tilePropertyName);\n  const debugColorizeTilesOff =\n    !tileset.debugColorizeTiles && tile._debugColorizeTiles;\n\n  if (debugColorizeTilesOn) {\n    tileset._heatmap.colorize(tile, frameState); // Skipped if tileset._heatmap.tilePropertyName is undefined\n    tile._debugColorizeTiles = true;\n    tile.color = tile._debugColor;\n  } else if (debugColorizeTilesOff) {\n    tile._debugColorizeTiles = false;\n    tile.color = Color.WHITE;\n  }\n\n  if (tile._colorDirty) {\n    tile._colorDirty = false;\n    tile._content.applyDebugSettings(true, tile._color);\n  }\n\n  if (debugColorizeTilesOff) {\n    tileset.makeStyleDirty(); // Re-apply style now that colorize is switched off\n  }\n}\n\n/**\n * @private\n * @param {Cesium3DTile} tile\n * @param {Cesium3DTileset} tileset\n * @param {FrameState} frameState\n */\nfunction updateContent(tile, tileset, frameState) {\n  const expiredContent = tile._expiredContent;\n\n  // expired content is not supported for multiple contents\n  if (!tile.hasMultipleContents && defined(expiredContent)) {\n    if (!tile.contentReady) {\n      // Render the expired content while the content loads\n      try {\n        expiredContent.update(tileset, frameState);\n      } catch (error) {\n        // Eat error for expired content\n      }\n      return;\n    }\n\n    // New content is ready, destroy expired content\n    tile._expiredContent.destroy();\n    tile._expiredContent = undefined;\n  }\n\n  if (!defined(tile.content)) {\n    // Implicit placeholder tile\n    return;\n  }\n\n  try {\n    tile.content.update(tileset, frameState);\n  } catch (error) {\n    tile._contentState = Cesium3DTileContentState.FAILED;\n    throw error;\n  }\n}\n\n/**\n * Compute and compare ClippingPlanes state:\n *  - enabled-ness - are clipping planes enabled? is this tile clipped?\n *  - clipping plane count\n *  - clipping function (union v. intersection)\n\n * @private\n * @param {Cesium3DTile} tile\n * @param {Cesium3DTileset} tileset\n */\nfunction updateClippingPlanes(tile, tileset) {\n  const clippingPlanes = tileset.clippingPlanes;\n  let currentClippingPlanesState = 0;\n  if (defined(clippingPlanes) && tile._isClipped && clippingPlanes.enabled) {\n    currentClippingPlanesState = clippingPlanes.clippingPlanesState;\n  }\n  // If clippingPlaneState for tile changed, mark clippingPlanesDirty so content can update\n  if (currentClippingPlanesState !== tile._clippingPlanesState) {\n    tile._clippingPlanesState = currentClippingPlanesState;\n    tile.clippingPlanesDirty = true;\n  }\n}\n\n/**\n * Compute and compare ClippingPolygons state:\n *  - enabled-ness - are clipping polygons enabled? is this tile clipped?\n *  - clipping polygon count & position count\n *  - clipping function (inverse)\n\n * @private\n * @param {Cesium3DTile} tile\n * @param {Cesium3DTileset} tileset\n */\nfunction updateClippingPolygons(tile, tileset) {\n  const clippingPolygons = tileset.clippingPolygons;\n  let currentClippingPolygonsState = 0;\n  if (\n    defined(clippingPolygons) &&\n    tile._isClippedByPolygon &&\n    clippingPolygons.enabled\n  ) {\n    currentClippingPolygonsState = clippingPolygons.clippingPolygonsState;\n  }\n  // If clippingPolygonState for tile changed, mark clippingPolygonsDirty so content can update\n  if (currentClippingPolygonsState !== tile._clippingPolygonsState) {\n    tile._clippingPolygonsState = currentClippingPolygonsState;\n    tile.clippingPolygonsDirty = true;\n  }\n}\n\n/**\n * Get the draw commands needed to render this tile.\n *\n * @private\n * @param {Cesium3DTileset} tileset\n * @param {FrameState} frameState\n * @param {object} passOptions\n */\nCesium3DTile.prototype.update = function (tileset, frameState, passOptions) {\n  const { commandList } = frameState;\n  const commandStart = commandList.length;\n\n  updateClippingPlanes(this, tileset);\n  updateClippingPolygons(this, tileset);\n  applyDebugSettings(this, tileset, frameState, passOptions);\n  updateContent(this, tileset, frameState);\n\n  const commandEnd = commandList.length;\n  this._commandsLength = commandEnd - commandStart;\n\n  for (let i = commandStart; i < commandEnd; ++i) {\n    const command = commandList[i];\n    const translucent = command.pass === Pass.TRANSLUCENT;\n    command.depthForTranslucentClassification = translucent;\n  }\n\n  this.clippingPlanesDirty = false; // reset after content update\n  this.clippingPolygonsDirty = false;\n};\n\nconst scratchCommandList = [];\n\n/**\n * Processes the tile's content, e.g., create WebGL resources, to move from the PROCESSING to READY state.\n *\n * @param {Cesium3DTileset} tileset The tileset containing this tile.\n * @param {FrameState} frameState The frame state.\n *\n * @private\n */\nCesium3DTile.prototype.process = function (tileset, frameState) {\n  if (!this.contentExpired && !this.contentReady && this._content.ready) {\n    updateExpireDate(this);\n\n    // Refresh style for expired content\n    this._selectedFrame = 0;\n    this.lastStyleTime = 0.0;\n\n    JulianDate.now(this._loadTimestamp);\n    this._contentState = Cesium3DTileContentState.READY;\n\n    if (!this.hasTilesetContent && !this.hasImplicitContent) {\n      // RESEARCH_IDEA: ability to unload tiles (without content) for an\n      // external tileset when all the tiles are unloaded.\n      tileset._statistics.incrementLoadCounts(this.content);\n      ++tileset._statistics.numberOfTilesWithContentReady;\n      ++tileset._statistics.numberOfLoadedTilesTotal;\n\n      // Add to the tile cache. Previously expired tiles are already in the cache and won't get re-added.\n      tileset._cache.add(this);\n    }\n  }\n\n  const savedCommandList = frameState.commandList;\n  frameState.commandList = scratchCommandList;\n\n  try {\n    this._content.update(tileset, frameState);\n  } catch (error) {\n    this._contentState = Cesium3DTileContentState.FAILED;\n    throw error;\n  }\n\n  scratchCommandList.length = 0;\n  frameState.commandList = savedCommandList;\n};\n\n/**\n * @private\n * @param {number} normalizedValue\n * @param {number} numberOfDigits\n * @param {number} leftShift\n * @returns {number}\n */\nfunction isolateDigits(normalizedValue, numberOfDigits, leftShift) {\n  const scaled = normalizedValue * Math.pow(10, numberOfDigits);\n  const integer = parseInt(scaled);\n  return integer * Math.pow(10, leftShift);\n}\n\n/**\n * @private\n * @param {number} value\n * @param {number} minimum\n * @param {number} maximum\n * @returns {number}\n */\nfunction priorityNormalizeAndClamp(value, minimum, maximum) {\n  // Subtract epsilon since we only want decimal digits present in the output.\n  return Math.max(\n    CesiumMath.normalize(value, minimum, maximum) - CesiumMath.EPSILON7,\n    0.0,\n  );\n}\n\n/**\n * Sets the priority of the tile based on distance and depth\n * @private\n */\nCesium3DTile.prototype.updatePriority = function () {\n  const tileset = this.tileset;\n  const preferLeaves = tileset.preferLeaves;\n  const minimumPriority = tileset._minimumPriority;\n  const maximumPriority = tileset._maximumPriority;\n\n  // Combine priority systems together by mapping them into a base 10 number where each priority controls a specific set of digits in the number.\n  // For number priorities, map them to a 0.xxxxx number then left shift it up into a set number of digits before the decimal point. Chop of the fractional part then left shift again into the position it needs to go.\n  // For blending number priorities, normalize them to 0-1 and interpolate to get a combined 0-1 number, then proceed as normal.\n  // Booleans can just be 0 or 10^leftshift.\n  // Think of digits as penalties since smaller numbers are higher priority. If a tile has some large quantity or has a flag raised it's (usually) penalized for it, expressed as a higher number for the digit.\n  // Priority number format: preloadFlightDigits(1) | foveatedDeferDigits(1) | foveatedDigits(4) | preloadProgressiveResolutionDigits(1) | preferredSortingDigits(4) . depthDigits(the decimal digits)\n  // Certain flags like preferLeaves will flip / turn off certain digits to get desired load order.\n\n  // Setup leftShifts, digit counts, and scales (for booleans)\n  const digitsForANumber = 4;\n  const digitsForABoolean = 1;\n\n  const preferredSortingLeftShift = 0;\n  const preferredSortingDigitsCount = digitsForANumber;\n\n  const foveatedLeftShift =\n    preferredSortingLeftShift + preferredSortingDigitsCount;\n  const foveatedDigitsCount = digitsForANumber;\n\n  const preloadProgressiveResolutionLeftShift =\n    foveatedLeftShift + foveatedDigitsCount;\n  const preloadProgressiveResolutionDigitsCount = digitsForABoolean;\n  const preloadProgressiveResolutionScale = Math.pow(\n    10,\n    preloadProgressiveResolutionLeftShift,\n  );\n\n  const foveatedDeferLeftShift =\n    preloadProgressiveResolutionLeftShift +\n    preloadProgressiveResolutionDigitsCount;\n  const foveatedDeferDigitsCount = digitsForABoolean;\n  const foveatedDeferScale = Math.pow(10, foveatedDeferLeftShift);\n\n  const preloadFlightLeftShift =\n    foveatedDeferLeftShift + foveatedDeferDigitsCount;\n  const preloadFlightScale = Math.pow(10, preloadFlightLeftShift);\n\n  // Compute the digits for each priority\n  let depthDigits = priorityNormalizeAndClamp(\n    this._depth,\n    minimumPriority.depth,\n    maximumPriority.depth,\n  );\n  depthDigits = preferLeaves ? 1.0 - depthDigits : depthDigits;\n\n  // Map 0-1 then convert to digit. Include a distance sort when doing non-skipLOD and replacement refinement, helps things like non-skipLOD photogrammetry\n  const useDistance =\n    !tileset.isSkippingLevelOfDetail &&\n    this.refine === Cesium3DTileRefine.REPLACE;\n  const normalizedPreferredSorting = useDistance\n    ? priorityNormalizeAndClamp(\n        this._priorityHolder._distanceToCamera,\n        minimumPriority.distance,\n        maximumPriority.distance,\n      )\n    : priorityNormalizeAndClamp(\n        this._priorityReverseScreenSpaceError,\n        minimumPriority.reverseScreenSpaceError,\n        maximumPriority.reverseScreenSpaceError,\n      );\n  const preferredSortingDigits = isolateDigits(\n    normalizedPreferredSorting,\n    preferredSortingDigitsCount,\n    preferredSortingLeftShift,\n  );\n\n  const preloadProgressiveResolutionDigits = this._priorityProgressiveResolution\n    ? 0\n    : preloadProgressiveResolutionScale;\n\n  const normalizedFoveatedFactor = priorityNormalizeAndClamp(\n    this._priorityHolder._foveatedFactor,\n    minimumPriority.foveatedFactor,\n    maximumPriority.foveatedFactor,\n  );\n  const foveatedDigits = isolateDigits(\n    normalizedFoveatedFactor,\n    foveatedDigitsCount,\n    foveatedLeftShift,\n  );\n\n  const foveatedDeferDigits = this.priorityDeferred ? foveatedDeferScale : 0;\n\n  const preloadFlightDigits =\n    tileset._pass === Cesium3DTilePass.PRELOAD_FLIGHT ? 0 : preloadFlightScale;\n\n  // Get the final base 10 number\n  this._priority =\n    depthDigits +\n    preferredSortingDigits +\n    preloadProgressiveResolutionDigits +\n    foveatedDigits +\n    foveatedDeferDigits +\n    preloadFlightDigits;\n};\n\n/**\n * @private\n */\nCesium3DTile.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * @private\n */\nCesium3DTile.prototype.destroy = function () {\n  // For the interval between new content being requested and downloaded, expiredContent === content, so don't destroy twice\n  this._content = this._content && this._content.destroy();\n  this._expiredContent =\n    this._expiredContent &&\n    !this._expiredContent.isDestroyed() &&\n    this._expiredContent.destroy();\n  this._debugBoundingVolume =\n    this._debugBoundingVolume && this._debugBoundingVolume.destroy();\n  this._debugContentBoundingVolume =\n    this._debugContentBoundingVolume &&\n    this._debugContentBoundingVolume.destroy();\n  this._debugViewerRequestVolume =\n    this._debugViewerRequestVolume && this._debugViewerRequestVolume.destroy();\n  return destroyObject(this);\n};\n\nexport default Cesium3DTile;\n"],"names":["Cesium3DTile","tileset","baseResource","header","parent","_tileset","_header","hasContentsArray","contents","hasMultipleContents","length","contentHeader","content","_contentHeader","transform","unpack","clone","IDENTITY","parentTransform","computedTransform","modelMatrix","multiply","parentInitialTransform","_initialTransform","metadata","_verticalExaggeration","_verticalExaggerationRelativeHeight","_boundingVolume","createBoundingVolume","boundingVolume","_boundingVolume2D","undefined","contentBoundingVolume","_contentBoundingVolume","_contentBoundingVolume2D","viewerRequestVolume","_viewerRequestVolume","geometricError","_geometricError","_deprecationWarning","updateGeometricErrorScale","refine","toUpperCase","REPLACE","ADD","children","hasEmptyContent","contentState","contentResource","serverKey","createIfNeeded","UNLOADED","contentHeaderUri","uri","url","READY","getDerivedResource","getServerKey","getUrlComponent","_content","_contentResource","_contentState","_expiredContent","_serverKey","hasTilesetContent","hasImplicitContent","hasRenderableContent","hasImplicitContentMetadata","cacheNode","expire","expireDuration","expireDate","duration","date","fromIso8601","lastStyleTime","_optimChildrenWithinParent","NOT_COMPUTED","clippingPlanesDirty","clippingPolygonsDirty","priorityDeferred","implicitTileset","implicitCoordinates","implicitSubtree","_distanceToCamera","_centerZDepth","_screenSpaceError","_screenSpaceErrorProgressiveResolution","_visibilityPlaneMask","_visible","_inRequestVolume","_finalResolution","_depth","_stackLength","_selectionDepth","_updatedVisibilityFrame","_touchedFrame","_visitedFrame","_selectedFrame","_wasSelectedLastFrame","_requestedFrame","_ancestorWithContent","_ancestorWithContentAvailable","_refines","_shouldSelect","_isClipped","_isClippedByPolygon","_clippingPlanesState","_clippingPolygonsState","_debugBoundingVolume","_debugContentBoundingVolume","_debugViewerRequestVolume","_debugColor","fromRandom","alpha","_debugColorizeTiles","_priority","_priorityHolder","_priorityProgressiveResolution","_priorityProgressiveResolutionScreenSpaceErrorLeaf","_priorityReverseScreenSpaceError","_foveatedFactor","_wasMinPriorityChild","_loadTimestamp","_commandsLength","_color","_colorDirty","_request","Object","defineProperties","prototype","get","boundingSphere","isVisible","extras","color","set","value","contentAvailable","contentReady","contentFailed","contentUnloaded","hasUnloadedRenderableContent","contentExpired","EXPIRED","FAILED","commandsLength","scratchCartesian","isPriorityDeferred","tile","frameState","radius","center","camera","scaledCameraDirection","multiplyByScalar","directionWC","closestPointOnLine","add","positionWC","toLine","subtract","distanceToCenterLine","magnitude","notTouchingSphere","toLineNormalized","normalize","scaledToLine","closestOnSphere","toClosestOnSphere","toClosestOnSphereNormalize","Math","abs","dot","replace","skipLevelOfDetail","isSkippingLevelOfDetail","foveatedScreenSpaceError","foveatedConeSize","_pass","PRELOAD_FLIGHT","PRELOAD","maximumFovatedFactor","cos","frustum","fov","foveatedConeFactor","range","normalizedFoveatedFactor","clamp","sseRelaxation","foveatedInterpolationCallback","foveatedMinimumScreenSpaceErrorRelaxation","memoryAdjustedScreenSpaceError","sse","scratchJulianDate","getScreenSpaceError","useParentGeometricError","progressiveResolutionHeightFraction","heightFraction","parentGeometricError","_scaledGeometricError","context","width","drawingBufferWidth","height","drawingBufferHeight","error","mode","SCENE2D","offCenterFrustum","pixelSize","max","top","bottom","right","left","distance","EPSILON7","sseDenominator","dynamicScreenSpaceError","density","_dynamicScreenSpaceErrorComputedDensity","factor","dynamicScreenSpaceErrorFactor","dynamicError","fog","pixelRatio","isPriorityProgressiveResolution","maximumScreenSpaceError","isProgressiveResolutionTile","tilePasses","parentFails","getPriorityReverseScreenSpaceError","useParentScreenSpaceError","screenSpaceError","root","updateVisibility","parentVisibilityPlaneMask","MASK_INDETERMINATE","updateTransform","distanceToTile","distanceToTileCenter","visibility","MASK_OUTSIDE","insideViewerRequestVolume","updateExpiration","now","lessThan","updateExpireDate","expireDurationDate","addSeconds","createPriorityFunction","requestContent","requestMultipleContents","requestSingleContent","multipleContents","contentsJson","extensions","promise","requestInnerContents","LOADING","then","isDestroyed","PROCESSING","catch","processArrayBuffer","request","expired","requestPromise","previousState","statistics","numberOfPendingRequests","arrayBuffer","cancelled","state","CANCELLED","numberOfAttemptedRequests","makeContent","resource","setQueryParameters","toString","throttle","throttleByServer","type","TILES3D","priorityFunction","fetchArrayBuffer","preprocessed","_disableSkipLevelOfDetail","contentType","GEOMETRY","VECTOR","IMPLICIT_SUBTREE","IMPLICIT_SUBTREE_JSON","EXTERNAL_TILESET","contentFactory","binaryPayload","Promise","resolve","buffer","jsonPayload","subtree","coordinates","getContentMetadataView","groupMetadata","group","cancelRequests","cancel","unloadContent","destroy","scratchProjectedBoundingSphere","getBoundingVolume","SCENE3D","sphere","projectTo2D","mapProjection","getContentBoundingVolume","cullingVolume","clippingPlanes","enabled","intersection","computeIntersectionWithBoundingVolume","clippingPlanesOriginMatrix","INSIDE","OUTSIDE","clippingPolygons","computeVisibilityWithPlaneMask","contentVisibility","MASK_INSIDE","computeVisibility","distanceToCamera","scratchToTileCenter","tileBoundingVolume","toCenter","scratchMatrix","scratchScale","scratchHalfAxes","scratchCenter","scratchRectangle","scratchOrientedBoundingBox","scratchTransform","createBox","box","result","fromElements","halfAxes","fromArray","multiplyByPoint","rotationScale","getMatrix3","update","createBoxFromTransformedRegion","region","initialTransform","rectangle","minimumHeight","maximumHeight","orientedBoundingBox","fromRectangle","WGS84","multiplyTransformation","inverseTransformation","createRegion","equalsEpsilon","EPSILON8","rectangleRegion","computeBoundingVolumes","createSphere","scale","getScale","uniformScale","maximumComponent","boundingVolumeHeader","tileMetadata","metadataBoundingVolumeHeader","parseBoundingVolumeSemantic","tileOrientedBoundingBox","exaggerateBoundingBox","getHeight","tileBoundingSphere","exaggeratedCenter","getPosition","exaggeratedRadius","scratchExaggeratedCorners","unpackArray","Array","fill","exaggeration","exaggerationRelativeHeight","exaggeratedCorners","computeCorners","map","corner","exaggeratedBox","fromPoints","transformChanged","equals","exaggerationChanged","verticalExaggeration","verticalExaggerationRelativeHeight","applyDebugSettings","passOptions","isRender","hasContentBoundingVolume","showVolume","debugShowBoundingVolume","debugShowContentBoundingVolume","YELLOW","DARKGRAY","WHITE","createDebugVolume","attributes","getGeometryInstanceAttributes","toValue","BLUE","debugShowViewerRequestVolume","debugColorizeTilesOn","debugColorizeTiles","_heatmap","tilePropertyName","debugColorizeTilesOff","colorize","makeStyleDirty","updateContent","expiredContent","updateClippingPlanes","currentClippingPlanesState","clippingPlanesState","updateClippingPolygons","currentClippingPolygonsState","clippingPolygonsState","commandList","commandStart","commandEnd","i","command","translucent","pass","TRANSLUCENT","depthForTranslucentClassification","scratchCommandList","process","ready","_statistics","incrementLoadCounts","numberOfTilesWithContentReady","numberOfLoadedTilesTotal","_cache","savedCommandList","isolateDigits","normalizedValue","numberOfDigits","leftShift","scaled","pow","integer","parseInt","priorityNormalizeAndClamp","minimum","maximum","updatePriority","preferLeaves","minimumPriority","_minimumPriority","maximumPriority","_maximumPriority","digitsForANumber","digitsForABoolean","preferredSortingLeftShift","preferredSortingDigitsCount","foveatedLeftShift","foveatedDigitsCount","preloadProgressiveResolutionLeftShift","preloadProgressiveResolutionDigitsCount","preloadProgressiveResolutionScale","foveatedDeferLeftShift","foveatedDeferDigitsCount","foveatedDeferScale","preloadFlightLeftShift","preloadFlightScale","depthDigits","depth","useDistance","normalizedPreferredSorting","reverseScreenSpaceError","preferredSortingDigits","preloadProgressiveResolutionDigits","foveatedFactor","foveatedDigits","foveatedDeferDigits","preloadFlightDigits"],"mappings":"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","ignoreList":[0]}}]
}